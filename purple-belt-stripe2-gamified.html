<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>üü£ Purple Belt - Stripe 2: Driving Commitment | Tap-In Leadership</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .module-header {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            border: 3px solid #7e22ce;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .belt-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 700;
            color: #7e22ce;
            margin-bottom: 15px;
            border: 2px solid #c084fc;
        }

        .stripe-indicator {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .stripe-dot {
            width: 12px;
            height: 40px;
            background: #6b21a8;
            border-radius: 3px;
        }

        .stripe-dot.inactive {
            background: #e9d5ff;
        }

        h1 {
            color: white;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .module-description {
            color: #f3e8ff;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e9d5ff;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #a855f7;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            color: #f3e8ff;
            font-size: 14px;
            text-align: center;
            margin-top: 8px;
            font-weight: 500;
        }

        .lessons-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .lesson-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 2px solid #f3e8ff;
            transition: all 0.3s ease;
        }

        .lesson-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(168,85,247,0.2);
            border-color: #a855f7;
        }

        .lesson-card.completed {
            border-color: #10b981;
            background: linear-gradient(to bottom, white 0%, #f0fdf4 100%);
        }

        .lesson-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .lesson-number {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            color: white;
            font-weight: 700;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            border: 2px solid #7e22ce;
        }

        .lesson-status {
            font-size: 24px;
        }

        h2 {
            color: #1e293b;
            font-size: 24px;
            margin-bottom: 15px;
            margin-top: 10px;
        }

        .lesson-description {
            color: #64748b;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .lesson-content {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .content-section {
            margin-bottom: 20px;
        }

        .content-section:last-child {
            margin-bottom: 0;
        }

        h3 {
            color: #a855f7;
            font-size: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .concept-list {
            list-style: none;
            padding-left: 0;
        }

        .concept-list li {
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
            color: #475569;
            line-height: 1.6;
        }

        .concept-list li:last-child {
            border-bottom: none;
        }

        .concept-list strong {
            color: #1e293b;
            display: block;
            margin-bottom: 4px;
        }

        .example-box {
            background: white;
            border-left: 4px solid #a855f7;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .example-box strong {
            color: #a855f7;
            display: block;
            margin-bottom: 8px;
        }

        .practice-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #a855f7;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .practice-box h4 {
            color: #7e22ce;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .practice-box p {
            color: #1e293b;
            line-height: 1.6;
        }

        .complete-btn {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            border: 2px solid #7e22ce;
        }

        .complete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(168,85,247,0.3);
        }

        .complete-btn.completed {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: #047857;
        }

        .summary-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 2px solid #f3e8ff;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            z-index: 1000;
            max-width: 400px;
            border: 3px solid #a855f7;
        }

        .achievement-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: all;
        }

        .achievement-icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .achievement-title {
            font-size: 24px;
            color: #1e293b;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .achievement-desc {
            color: #64748b;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .achievement-xp {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 20px;
            font-weight: 700;
            display: inline-block;
            border: 2px solid #7e22ce;
        }

        .close-achievement {
            margin-top: 20px;
            background: #f1f5f9;
            border: 2px solid #e2e8f0;
            color: #64748b;
            padding: 10px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .close-achievement:hover {
            background: #e2e8f0;
            color: #475569;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 999;
        }

        .overlay.show {
            opacity: 1;
            pointer-events: all;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: white;
            text-decoration: none;
            font-size: 14px;
            margin-bottom: 20px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .back-link:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(-4px);
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            h1 {
                font-size: 24px;
            }

            .module-header {
                padding: 20px;
            }

            .lesson-card {
                padding: 20px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="learning-hub.html" class="back-link">
            ‚Üê Back to Learning Hub
        </a>

        <div class="module-header">
            <div class="belt-badge">
                üü£ PURPLE BELT
            </div>
            <div class="stripe-indicator">
                <div class="stripe-dot"></div>
                <div class="stripe-dot"></div>
                <div class="stripe-dot inactive"></div>
                <div class="stripe-dot inactive"></div>
            </div>
            <h1>Stripe 2: Driving Commitment</h1>
            <p class="module-description">
                Learn the practical frameworks that create real commitment in teams. Master decision-making that sticks, 
                eliminate ambiguity, and build systems that hold decisions together under pressure.
            </p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value" id="xpDisplay">0</span>
                    <span class="stat-label">Total XP</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="lessonsDisplay">0/4</span>
                    <span class="stat-label">Lessons</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="badgesDisplay">0/1</span>
                    <span class="stat-label">Stripe</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <p class="progress-text" id="progressText">0 of 4 lessons completed</p>
        </div>

        <div class="lessons-grid">
            <!-- Lesson 1: Driving Commitment Through Decisions -->
            <div class="lesson-card" id="lesson1">
                <div class="lesson-header">
                    <div class="lesson-number">LESSON 1</div>
                    <div class="lesson-status" id="status1">‚ö™</div>
                </div>
                <h2>Driving Commitment Through Decisions</h2>
                <p class="lesson-description">
                    Master the art of making decisions that create real commitment. Learn why decision quality matters 
                    less than decision clarity, and how to structure choices that teams actually execute.
                </p>

                <div class="lesson-content">
                    <div class="content-section">
                        <h3>üéØ The Decision Paradox</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Most leaders obsess over making the "right" decision. They gather data, run models, debate options. 
                            But here's what research shows: <strong>decision quality has almost no correlation with execution 
                            quality</strong>. You know what does? <strong>Decision clarity.</strong>
                        </p>
                        <div class="example-box">
                            <strong>The Truth:</strong>
                            A clear decision that's 70% optimal gets executed at 90%. A perfect decision that's ambiguous gets 
                            executed at 30%. Clarity beats perfection every time.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üí° The Four Elements of a Commitment-Worthy Decision</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            For a decision to create real commitment (not compliance), it must have four characteristics:
                        </p>
                        <ul class="concept-list">
                            <li>
                                <strong>1. Unambiguous:</strong>
                                Can be stated in one sentence. Everyone understands exactly what we're doing and not doing.
                            </li>
                            <li>
                                <strong>2. Time-Bound:</strong>
                                Has a deadline or trigger. "By when?" is answered clearly. No open-ended commitments.
                            </li>
                            <li>
                                <strong>3. Owner-Assigned:</strong>
                                One person owns it. Not "the team" or "we." One name. One throat to choke (metaphorically).
                            </li>
                            <li>
                                <strong>4. Checkpoint-Defined:</strong>
                                We know when we'll revisit. No decision is forever, but we're clear on the review point.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üõ†Ô∏è The Commitment Decision Framework</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Use this template for every significant decision:
                        </p>
                        <div class="example-box" style="background: #fef9e7; border-left-color: #f59e0b;">
                            <strong style="color: #92400e;">Decision Template:</strong>
                            <p style="color: #78350f; margin: 10px 0 0 0; line-height: 1.8;">
                                <strong>We have decided to:</strong> [One clear sentence]<br>
                                <strong>Owner:</strong> [One person's name]<br>
                                <strong>By when:</strong> [Specific date or trigger]<br>
                                <strong>Success looks like:</strong> [Measurable outcome]<br>
                                <strong>We'll revisit on:</strong> [Checkpoint date]<br>
                                <strong>Not decided:</strong> [What this doesn't mean - critical for clarity]
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>‚ö†Ô∏è Common Decision Failures That Kill Commitment</h3>
                        <ul class="concept-list">
                            <li>
                                <strong>Vague direction:</strong>
                                "We need to improve customer experience." ‚Üê Not a decision. What specifically? By when? Who owns it?
                            </li>
                            <li>
                                <strong>Implicit timelines:</strong>
                                "Soon" or "ASAP" or "when ready" ‚Üê These aren't deadlines. They're permission to delay.
                            </li>
                            <li>
                                <strong>Shared ownership:</strong>
                                "Sarah and Tom will co-lead this" ‚Üê When everyone owns it, nobody owns it. Pick one.
                            </li>
                            <li>
                                <strong>No checkpoint:</strong>
                                Decision made and... silence. No review scheduled. Assumptions diverge. Execution drifts.
                            </li>
                            <li>
                                <strong>Scope creep:</strong>
                                You didn't say what you're NOT doing, so people assume everything is included.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üìä Research Evidence</h3>
                        <div class="example-box">
                            <strong>Eisenhower's Decision Clarity:</strong>
                            Dwight Eisenhower famously said, "Plans are useless, but planning is indispensable." The act of 
                            forcing clarity‚Äîdefining what, who, when‚Äîcreates alignment even if the plan changes. The D-Day 
                            invasion succeeded not because the plan was perfect, but because every soldier knew exactly what 
                            their piece was.
                        </div>
                        <div class="example-box" style="margin-top: 15px;">
                            <strong>Kahneman on Decision Regret:</strong>
                            Nobel Prize winner Daniel Kahneman found that people regret ambiguous decisions far more than 
                            clear wrong ones. Why? Clear decisions teach you something. Ambiguous ones just create confusion 
                            and blame.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üîÑ The "Not Decided" Clause (Critical)</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            The most powerful part of the framework: explicitly stating what you're <strong>not</strong> deciding. 
                            This prevents scope creep and false assumptions.
                        </p>
                        <div class="example-box">
                            <strong>Example:</strong>
                            <p style="color: #475569; margin: 10px 0 0 0; line-height: 1.6;">
                                <strong>We have decided to:</strong> Launch beta to 100 enterprise customers by March 1<br>
                                <strong>Owner:</strong> Sarah (Product Lead)<br>
                                <strong>Success looks like:</strong> 80% activation rate, &lt;5% churn in first month<br>
                                <strong>We'll revisit on:</strong> March 15 retro<br>
                                <strong>Not decided:</strong> We are NOT committing to full public launch yet. We are NOT building 
                                the mobile app for this beta. We are NOT guaranteeing enterprise pricing will stay at beta rates.
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>ü•ã BJJ Analogy: Committing to the Submission</h3>
                        <div class="example-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                            <strong style="color: #92400e;">When you lock in a submission, there's no ambiguity:</strong>
                            <p style="color: #78350f; margin: 0;">
                                You're either going for the armbar or you're not. Half-committed submissions get you swept. 
                                The moment you commit‚Äîhips up, arm isolated, fall back‚Äîyour opponent knows exactly what you're 
                                doing. That clarity forces them to defend or tap. Ambiguous attacks let them escape. Same with 
                                decisions: commit fully or don't commit at all.
                            </p>
                        </div>
                    </div>

                    <div class="practice-box">
                        <h4>üéØ Practice Exercise:</h4>
                        <p>
                            Take a recent decision your team made. Run it through the framework. Can you fill in all six elements 
                            clearly? If not, you don't have a decision‚Äîyou have a conversation that needs finishing.
                        </p>
                    </div>
                </div>

                <button class="complete-btn" onclick="completeLesson(1)" id="btn1">
                    Complete Lesson 1
                </button>
            </div>

            <!-- Lesson 2: Eliminating Ambiguity -->
            <div class="lesson-card" id="lesson2">
                <div class="lesson-header">
                    <div class="lesson-number">LESSON 2</div>
                    <div class="lesson-status" id="status2">‚ö™</div>
                </div>
                <h2>Eliminating Ambiguity</h2>
                <p class="lesson-description">
                    Learn why vague language kills commitment and how to create clarity that forces alignment. 
                    Master the techniques that eliminate wiggle room and create shared understanding.
                </p>

                <div class="lesson-content">
                    <div class="content-section">
                        <h3>üéØ The Ambiguity Tax</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Every ambiguous word in a decision costs you execution. "Soon" means different things to different 
                            people. "Improve" is subjective. "Quality" is interpretive. These vague words feel safe‚Äîthey build 
                            consensus because everyone hears what they want to hear. Then execution starts and the cracks appear.
                        </p>
                        <div class="example-box">
                            <strong>The Hidden Cost:</strong>
                            Ambiguity doesn't save you from conflict‚Äîit just delays it. You'll have the hard conversation eventually, 
                            but now it's mid-execution when stakes are higher and trust is lower. Pay the clarity tax upfront.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üí° The Specificity Test</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            A decision is specific enough when two people can independently verify if it happened. Can you measure it? 
                            Can you observe it? If not, it's still too vague.
                        </p>
                        <div class="example-box" style="background: #fee; border-left-color: #dc2626;">
                            <strong style="color: #991b1b;">‚ùå VAGUE (Fails Test):</strong>
                            <p style="color: #7f1d1d; margin: 10px 0 0 0;">
                                "We need to improve customer satisfaction soon."<br>
                                <em>Problem: "Improve" by how much? "Soon" when exactly? Who's responsible?</em>
                            </p>
                        </div>
                        <div class="example-box" style="background: #f0fdf4; border-left-color: #16a34a; margin-top: 15px;">
                            <strong style="color: #15803d;">‚úÖ SPECIFIC (Passes Test):</strong>
                            <p style="color: #14532d; margin: 10px 0 0 0;">
                                "Sarah will increase our NPS score from 32 to 45 by March 31, measured via our quarterly survey."<br>
                                <em>Clear: Who (Sarah), What (NPS 32‚Üí45), When (March 31), How measured (quarterly survey)</em>
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üõ†Ô∏è The Clarity Toolkit</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Replace vague language with specific language using these swaps:
                        </p>
                        <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                            <tr style="background: #a855f7;">
                                <th style="padding: 12px; text-align: left; color: white; font-weight: 600;">Vague</th>
                                <th style="padding: 12px; text-align: left; color: white; font-weight: 600;">Specific</th>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;">Soon / ASAP / When ready</td>
                                <td style="padding: 12px; color: #475569;">By [specific date]</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;">Improve / Enhance / Optimize</td>
                                <td style="padding: 12px; color: #475569;">Increase from X to Y</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;">High quality / Professional</td>
                                <td style="padding: 12px; color: #475569;">&lt;5% bug rate, passes QA checklist</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;">Everyone / The team / We</td>
                                <td style="padding: 12px; color: #475569;">[Specific person's name]</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;">Explore / Consider / Look into</td>
                                <td style="padding: 12px; color: #475569;">Decide yes/no by [date]</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; color: #475569;">Significant / Substantial</td>
                                <td style="padding: 12px; color: #475569;">[Actual number or percentage]</td>
                            </tr>
                        </table>
                    </div>

                    <div class="content-section">
                        <h3>‚ö†Ô∏è The Wiggle Room Test</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            After stating a decision, ask: <strong>"Could someone interpret this differently and still claim 
                            they're following through?"</strong>
                        </p>
                        <ul class="concept-list">
                            <li>
                                <strong>If YES:</strong> You have ambiguity. People will take the path of least resistance, 
                                which is rarely the path you intended.
                            </li>
                            <li>
                                <strong>If NO:</strong> You have clarity. There's one interpretation. Execution is binary‚Äî
                                either they did it or they didn't.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üìä Research Evidence</h3>
                        <div class="example-box">
                            <strong>Stanford's "Implementation Intentions" Research:</strong>
                            Psychologist Peter Gollwitzer found that people who make specific "if-then" plans are 2-3x more 
                            likely to follow through than those with vague goals. The mechanism? Specificity removes the cognitive 
                            load of interpreting what to do. Your brain knows exactly what success looks like.
                        </div>
                        <div class="example-box" style="margin-top: 15px;">
                            <strong>Heath Brothers' "Made to Stick":</strong>
                            Chip and Dan Heath studied why some messages stick and others don't. Their finding: concrete language 
                            creates shared understanding. "Improve customer service" means nothing. "Answer every call in under 
                            3 rings" means everything.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üîÑ The Paraphrase Check</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            After stating a decision, have each person paraphrase it back in their own words. If you hear different 
                            interpretations, you don't have clarity yet. Keep refining until everyone's paraphrase is essentially 
                            the same.
                        </p>
                        <div class="example-box">
                            <strong>How It Works:</strong>
                            <p style="color: #475569; margin: 10px 0 0 0; line-height: 1.6;">
                                Leader: "We've decided to launch the new pricing model by Q2."<br><br>
                                Sarah: "So we're announcing new prices to customers in June?"<br>
                                Tom: "I thought we were just testing it internally in Q2?"<br><br>
                                ‚Üê <strong>That's ambiguity exposed.</strong> Now you can fix it before execution starts.
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>ü•ã BJJ Analogy: Position Names Are Specific</h3>
                        <div class="example-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                            <strong style="color: #92400e;">When your coach says "Mount," everyone knows exactly what that means:</strong>
                            <p style="color: #78350f; margin: 0;">
                                Not "kind of on top" or "controlling them." Mount = chest to chest, knees on ground, hips heavy. 
                                It's so specific that in competition, a ref can instantly score it. Leadership decisions need the 
                                same clarity. "Improve customer experience" is like saying "do jiu jitsu better." Useless. 
                                "Reduce support ticket response time to under 2 hours" is like "achieve mount." Crystal clear.
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>‚úÖ The Clarity Checklist</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Before finalizing any decision, verify:
                        </p>
                        <ul class="concept-list">
                            <li>‚òëÔ∏è Can two people independently verify if it happened?</li>
                            <li>‚òëÔ∏è Is there a specific number, date, or observable outcome?</li>
                            <li>‚òëÔ∏è Does one person's name own it (not "the team")?</li>
                            <li>‚òëÔ∏è Could someone wiggle out by claiming a different interpretation?</li>
                            <li>‚òëÔ∏è If I paraphrase this back, would everyone agree with my summary?</li>
                        </ul>
                        <p style="color: #475569; line-height: 1.6; margin-top: 15px;">
                            If you can't check all boxes, you're not done clarifying.
                        </p>
                    </div>

                    <div class="practice-box">
                        <h4>üéØ Practice Exercise:</h4>
                        <p>
                            Take a recent vague decision from your team. Run it through the Specificity Test. Rewrite it 
                            using the Clarity Toolkit until it passes the Wiggle Room Test. Share both versions with your 
                            team and watch the "aha" moment when they realize how much was left unsaid.
                        </p>
                    </div>
                </div>

                <button class="complete-btn" onclick="completeLesson(2)" id="btn2">
                    Complete Lesson 2
                </button>
            </div>

            <!-- Lesson 3: The Commitment Meeting -->
            <div class="lesson-card" id="lesson3">
                <div class="lesson-header">
                    <div class="lesson-number">LESSON 3</div>
                    <div class="lesson-status" id="status3">‚ö™</div>
                </div>
                <h2>The Commitment Meeting</h2>
                <p class="lesson-description">
                    Learn the meeting format that transforms decisions into commitments. Master the specific questions 
                    that surface hidden concerns and create genuine buy-in before anyone leaves the room.
                </p>

                <div class="lesson-content">
                    <div class="content-section">
                        <h3>üéØ Why Most Decision Meetings Fail</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Most decision meetings end with false consensus: heads nod, people leave, nothing happens. Why? 
                            Because decisions were made <em>in</em> the room but commitment wasn't built. You need a different 
                            meeting format‚Äîone designed specifically to create commitment, not just capture votes.
                        </p>
                        <div class="example-box">
                            <strong>The Problem:</strong>
                            Traditional meetings optimize for agreement. Commitment meetings optimize for clarity and ownership. 
                            Very different goals. Very different outcomes.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üí° The Commitment Meeting Structure</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            This is a 5-phase format that systematically builds commitment:
                        </p>
                        <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                            <tr style="background: #a855f7;">
                                <th style="padding: 12px; text-align: left; color: white; font-weight: 600;">Phase</th>
                                <th style="padding: 12px; text-align: left; color: white; font-weight: 600;">Purpose</th>
                                <th style="padding: 12px; text-align: left; color: white; font-weight: 600;">Time</th>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>1. Context Setting</strong></td>
                                <td style="padding: 12px; color: #475569;">Why this decision, why now, what's at stake</td>
                                <td style="padding: 12px; color: #475569;">5 min</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>2. Options & Data</strong></td>
                                <td style="padding: 12px; color: #475569;">Present alternatives, share relevant info</td>
                                <td style="padding: 12px; color: #475569;">15 min</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>3. Concerns Mining</strong></td>
                                <td style="padding: 12px; color: #475569;">Surface every objection, doubt, risk</td>
                                <td style="padding: 12px; color: #475569;">20 min</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>4. Decision Lock</strong></td>
                                <td style="padding: 12px; color: #475569;">Make the call, state it clearly</td>
                                <td style="padding: 12px; color: #475569;">5 min</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; color: #475569;"><strong>5. Commitment Check</strong></td>
                                <td style="padding: 12px; color: #475569;">Explicitly confirm everyone's in</td>
                                <td style="padding: 12px; color: #475569;">10 min</td>
                            </tr>
                        </table>
                    </div>

                    <div class="content-section">
                        <h3>üõ†Ô∏è Phase 3: Concerns Mining (The Critical Phase)</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            This is where commitment is won or lost. You must actively pull out every concern <em>before</em> 
                            deciding. Use these prompts:
                        </p>
                        <ul class="concept-list">
                            <li><strong>"What could go wrong that we haven't discussed?"</strong></li>
                            <li><strong>"If you had to argue against this, what would you say?"</strong></li>
                            <li><strong>"What am I missing about how this affects your area?"</strong></li>
                            <li><strong>"What would make you lose sleep about this decision?"</strong></li>
                            <li><strong>"Who hasn't spoken yet? [Name], what's your take?"</strong></li>
                        </ul>
                        <p style="color: #475569; line-height: 1.6; margin-top: 15px;">
                            The goal isn't to agree with every concern. It's to make sure every concern gets heard and 
                            addressed <em>before</em> the decision locks in.
                        </p>
                    </div>

                    <div class="content-section">
                        <h3>üîí Phase 4: Decision Lock</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            After hearing all concerns, the decision-maker (often leader, sometimes designated owner) states 
                            the decision using the framework from Lesson 1:
                        </p>
                        <div class="example-box">
                            <strong>Decision Lock Template:</strong>
                            <p style="color: #475569; margin: 10px 0 0 0; line-height: 1.8;">
                                "Having heard all perspectives, here's what we're doing:<br><br>
                                <strong>Decision:</strong> [One sentence]<br>
                                <strong>Owner:</strong> [Name]<br>
                                <strong>By when:</strong> [Date]<br>
                                <strong>Success looks like:</strong> [Outcome]<br>
                                <strong>We'll revisit on:</strong> [Checkpoint]<br>
                                <strong>Not included:</strong> [Scope boundaries]"
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>‚úÖ Phase 5: Commitment Check (Don't Skip This)</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            This is where you make commitment explicit. Go around the room and ask each person:
                        </p>
                        <div class="example-box">
                            <strong>"Can you commit to this decision?"</strong>
                        </div>
                        <p style="color: #475569; line-height: 1.6; margin-top: 15px;">
                            You're looking for one of three responses:
                        </p>
                        <ul class="concept-list">
                            <li>
                                <strong>"Yes, I'm in."</strong>
                                ‚Üê Full commitment. Move on.
                            </li>
                            <li>
                                <strong>"I disagree, but I commit."</strong>
                                ‚Üê Disagree and commit. Perfect. This is what you want.
                            </li>
                            <li>
                                <strong>"I can't commit because..."</strong>
                                ‚Üê Stop. Address this blocker before moving forward. One uncommitted person sinks the whole ship.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>‚ö†Ô∏è What Kills Commitment in Meetings</h3>
                        <ul class="concept-list">
                            <li>
                                <strong>Skipping concerns phase:</strong>
                                Jumping straight to decision. People leave with unspoken doubts that fester.
                            </li>
                            <li>
                                <strong>Implicit commitment:</strong>
                                Assuming silence = agreement. It doesn't. Make it explicit.
                            </li>
                            <li>
                                <strong>Letting blockers slide:</strong>
                                Someone says "I'm not sure..." and you move on anyway. That person won't execute.
                            </li>
                            <li>
                                <strong>No written record:</strong>
                                Decision made verbally, nothing documented. Watch interpretations diverge within 48 hours.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üìä Research Evidence</h3>
                        <div class="example-box">
                            <strong>Amazon's "Two Pizza Teams" & "Disagree and Commit":</strong>
                            Jeff Bezos institutionalized this at Amazon. Every major decision follows a similar pattern: 
                            debate vigorously (concerns mining), decide quickly (decision lock), commit fully (commitment check). 
                            The key? Making commitment explicit and public in the room. No one can claim later they "weren't sure."
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>ü•ã BJJ Analogy: The Pre-Roll Agreement</h3>
                        <div class="example-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                            <strong style="color: #92400e;">Before you roll, you and your partner agree on intensity:</strong>
                            <p style="color: #78350f; margin: 0;">
                                "Light flow?" "Competition pace?" "Working on specific positions?" This 30-second alignment prevents 
                                injuries and bad feelings. If you skip it, one person goes 100% while the other expected 50%‚Äîsomeone 
                                gets hurt. Same with decisions: explicit commitment check prevents the equivalent of "I thought we 
                                were going light" mid-execution.
                            </p>
                        </div>
                    </div>

                    <div class="practice-box">
                        <h4>üéØ Practice Exercise:</h4>
                        <p>
                            Next decision meeting, run this 5-phase structure. Time each phase. Notice how much longer concerns 
                            mining takes‚Äîthat's the commitment being built. Pay special attention to Phase 5: watch people's 
                            faces when you explicitly ask for commitment. That moment of accountability changes everything.
                        </p>
                    </div>
                </div>

                <button class="complete-btn" onclick="completeLesson(3)" id="btn3">
                    Complete Lesson 3
                </button>
            </div>

            <!-- Lesson 4: Commitment Systems -->
            <div class="lesson-card" id="lesson4">
                <div class="lesson-header">
                    <div class="lesson-number">LESSON 4</div>
                    <div class="lesson-status" id="status4">‚ö™</div>
                </div>
                <h2>Commitment Systems</h2>
                <p class="lesson-description">
                    Learn how to build systems that hold commitments together after the meeting ends. Master the 
                    tracking mechanisms, review rhythms, and feedback loops that prevent commitment decay.
                </p>

                <div class="lesson-content">
                    <div class="content-section">
                        <h3>üéØ The Commitment Decay Problem</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            You leave the meeting committed. Everyone's aligned. Then reality hits: competing priorities, 
                            unexpected obstacles, daily fires. Without systems, commitment erodes. Not because people are 
                            bad‚Äîbecause humans need structure to maintain focus when pressure rises.
                        </p>
                        <div class="example-box">
                            <strong>The Truth:</strong>
                            Commitment without systems is just hope. You need mechanisms that make it easy to stay committed 
                            and hard to drift away.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üí° The Three Commitment Systems</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Build these three systems to hold commitments:
                        </p>
                        <ul class="concept-list">
                            <li>
                                <strong>1. Tracking System:</strong>
                                Makes progress visible. Everyone can see what's done, what's in progress, what's blocked.
                            </li>
                            <li>
                                <strong>2. Review Rhythm:</strong>
                                Regular checkpoints to assess progress, surface obstacles, adjust as needed.
                            </li>
                            <li>
                                <strong>3. Escalation Path:</strong>
                                Clear process for when things go off track. How to raise flags early, not late.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üõ†Ô∏è System 1: The Commitment Tracker</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Simple shared document (spreadsheet, Notion, whatever) with these columns:
                        </p>
                        <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                            <tr style="background: #a855f7;">
                                <th style="padding: 12px; text-align: left; color: white; font-weight: 600;">Column</th>
                                <th style="padding: 12px; text-align: left; color: white; font-weight: 600;">What It Tracks</th>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>Decision</strong></td>
                                <td style="padding: 12px; color: #475569;">What we committed to (one sentence)</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>Owner</strong></td>
                                <td style="padding: 12px; color: #475569;">One person's name</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>Deadline</strong></td>
                                <td style="padding: 12px; color: #475569;">Specific date</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>Status</strong></td>
                                <td style="padding: 12px; color: #475569;">On track / At risk / Blocked</td>
                            </tr>
                            <tr style="border-bottom: 1px solid #e2e8f0;">
                                <td style="padding: 12px; color: #475569;"><strong>Last Update</strong></td>
                                <td style="padding: 12px; color: #475569;">Brief progress note + date</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; color: #475569;"><strong>Next Checkpoint</strong></td>
                                <td style="padding: 12px; color: #475569;">When we review this next</td>
                            </tr>
                        </table>
                        <p style="color: #475569; line-height: 1.6; margin-top: 15px;">
                            <strong>Rule:</strong> Owners update status weekly. No update = red flag.
                        </p>
                    </div>

                    <div class="content-section">
                        <h3>üîÑ System 2: The Review Rhythm</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Schedule recurring reviews <em>before</em> the commitment starts. Don't leave it to "when we have time."
                        </p>
                        <ul class="concept-list">
                            <li>
                                <strong>Weekly check-ins (15 min):</strong>
                                Quick status updates. "On track" items get 30 seconds. "At risk" items get discussion.
                            </li>
                            <li>
                                <strong>Milestone reviews (1 hour):</strong>
                                At key checkpoints. Deep dive on progress, learnings, adjustments needed.
                            </li>
                            <li>
                                <strong>Retrospectives (1 hour):</strong>
                                After completion. What worked? What didn't? What did we learn about commitment?
                            </li>
                        </ul>
                        <p style="color: #475569; line-height: 1.6; margin-top: 15px;">
                            These aren't optional. They're part of the commitment system.
                        </p>
                    </div>

                    <div class="content-section">
                        <h3>üö® System 3: The Escalation Path</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Make it clear how to raise problems early. Three levels:
                        </p>
                        <ul class="concept-list">
                            <li>
                                <strong>Yellow (At Risk):</strong>
                                Something's harder than expected but still manageable. Update status, flag in weekly check-in.
                            </li>
                            <li>
                                <strong>Red (Blocked):</strong>
                                Can't proceed without help. Escalate immediately to leader or team. Don't wait for next meeting.
                            </li>
                            <li>
                                <strong>Dead (Impossible):</strong>
                                Commitment can't be met as stated. Call emergency meeting to reassess. Don't pretend it's still alive.
                            </li>
                        </ul>
                        <p style="color: #475569; line-height: 1.6; margin-top: 15px;">
                            <strong>Culture shift needed:</strong> Raising a flag early is responsible. Hiding problems until 
                            it's too late is the real failure.
                        </p>
                    </div>

                    <div class="content-section">
                        <h3>‚ö†Ô∏è What Breaks Commitment Systems</h3>
                        <ul class="concept-list">
                            <li>
                                <strong>Tracker becomes theater:</strong>
                                People update it to show "green" because that's what leadership wants to hear. Useless.
                            </li>
                            <li>
                                <strong>Reviews get cancelled:</strong>
                                "We're all busy, let's skip this week." Do that twice and the system dies.
                            </li>
                            <li>
                                <strong>Escalation punished:</strong>
                                Someone raises a red flag and gets blamed. Next time, everyone stays silent until disaster.
                            </li>
                            <li>
                                <strong>No accountability for no-updates:</strong>
                                Owners stop updating tracker. Nobody notices or cares. System becomes ignored spreadsheet.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üìä Research Evidence</h3>
                        <div class="example-box">
                            <strong>OKR Success Factor Research (Google, Intel):</strong>
                            Companies that succeed with OKRs (Objectives and Key Results) share one trait: rigorous tracking 
                            and review rhythms. The goals aren't better‚Äîthe systems holding people to them are stronger. 
                            Weekly check-ins and quarterly reviews are non-negotiable.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>‚úÖ The Commitment Systems Checklist</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            For every significant commitment, ensure you have:
                        </p>
                        <ul class="concept-list">
                            <li>‚òëÔ∏è A tracker where progress is visible to everyone</li>
                            <li>‚òëÔ∏è Weekly check-ins scheduled (recurring calendar invite)</li>
                            <li>‚òëÔ∏è Milestone review dates set in advance</li>
                            <li>‚òëÔ∏è Clear escalation path communicated to owner</li>
                            <li>‚òëÔ∏è Accountability for owners who don't update status</li>
                            <li>‚òëÔ∏è Permission to raise flags without punishment</li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>ü•ã BJJ Analogy: Training Logs</h3>
                        <div class="example-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                            <strong style="color: #92400e;">Serious competitors keep training logs:</strong>
                            <p style="color: #78350f; margin: 0;">
                                Not because they don't remember what they worked on, but because visibility creates accountability. 
                                You committed to drilling guard passes 3x per week? The log shows if you actually did. Same with 
                                team commitments: the tracker makes progress (or lack of it) visible. What gets measured gets done.
                            </p>
                        </div>
                    </div>

                    <div class="practice-box">
                        <h4>üéØ Practice Exercise:</h4>
                        <p>
                            Take your team's current commitments and build a simple tracker this week. Just the six columns. 
                            Schedule a 15-minute weekly check-in for the next 4 weeks. Watch how behavior changes when progress 
                            becomes visible and reviews are guaranteed.
                        </p>
                    </div>
                </div>

                <button class="complete-btn" onclick="completeLesson(4)" id="btn4">
                    Complete Lesson 4 & Earn Stripe 2
                </button>
            </div>
        </div>

        <!-- Progress Summary -->
        <div class="summary-card">
            <h2 style="margin-bottom: 10px;">üìä Your Progress</h2>
            <p style="color: #64748b; margin-bottom: 20px;">Track your journey through Purple Belt Stripe 2</p>
            
            <div class="summary-stats">
                <div class="stat-card">
                    <span class="stat-value" id="summaryComplete">0/4</span>
                    <span class="stat-label">Lessons Complete</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="summaryXP">0</span>
                    <span class="stat-label">XP Earned</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="summaryBadges">Not Earned</span>
                    <span class="stat-label">Stripe Status</span>
                </div>
            </div>
            <p style="color: #64748b; text-align: center; margin-top: 15px; font-size: 14px;">
                üí™ Complete all 4 lessons to earn Stripe 2 + 100 XP bonus!
            </p>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="overlay" id="overlay" onclick="closeAchievement()"></div>
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">üéâ</div>
        <div class="achievement-title" id="achievementTitle">Lesson Complete!</div>
        <div class="achievement-desc" id="achievementDesc">You're making great progress</div>
        <div class="achievement-xp" id="achievementXP">+25 XP</div>
        <button class="close-achievement" onclick="closeAchievement()">Continue</button>
    </div>

    <script>
        const STORAGE_KEY = 'purplebeltStripe2Completed';
        const XP_KEY = 'purplebeltStripe2ModuleXP';
        const TOTAL_LESSONS = 4; // All 4 lessons now available
        const XP_PER_LESSON = 25;
        const MODULE_BONUS_XP = 100;

        // Load progress
        function loadProgress() {
            const completed = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            const moduleXP = parseInt(localStorage.getItem(XP_KEY) || '0');
            
            completed.forEach(lessonNum => {
                markLessonComplete(lessonNum);
            });
            
            updateAllStats();
        }

        // Mark lesson as visually complete
        function markLessonComplete(lessonNum) {
            const card = document.getElementById(`lesson${lessonNum}`);
            const status = document.getElementById(`status${lessonNum}`);
            const btn = document.getElementById(`btn${lessonNum}`);
            
            if (card && status && btn) {
                card.classList.add('completed');
                status.textContent = '‚úÖ';
                btn.textContent = '‚úì Completed';
                btn.classList.add('completed');
            }
        }

        // Complete a lesson
        function completeLesson(lessonNum) {
            let completed = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            let moduleXP = parseInt(localStorage.getItem(XP_KEY) || '0');
            
            if (completed.includes(lessonNum)) {
                showAchievement('Already Complete', 'You\'ve already completed this lesson', 'No XP');
                return;
            }
            
            // Add to completed
            completed.push(lessonNum);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(completed));
            
            // Add XP
            moduleXP += XP_PER_LESSON;
            localStorage.setItem(XP_KEY, moduleXP.toString());
            
            // Add to global XP
            let totalXP = parseInt(localStorage.getItem('totalXP') || '0');
            totalXP += XP_PER_LESSON;
            localStorage.setItem('totalXP', totalXP.toString());
            
            // Mark complete
            markLessonComplete(lessonNum);
            
            // Check if module complete
            if (completed.length === TOTAL_LESSONS) {
                // Award bonus XP
                moduleXP += MODULE_BONUS_XP;
                localStorage.setItem(XP_KEY, moduleXP.toString());
                totalXP += MODULE_BONUS_XP;
                localStorage.setItem('totalXP', totalXP.toString());
                
                // Award stripe
                let purpleStripes = JSON.parse(localStorage.getItem('purpleStripesEarned') || '[]');
                if (!purpleStripes.includes(2)) {
                    purpleStripes.push(2);
                    localStorage.setItem('purpleStripesEarned', JSON.stringify(purpleStripes));
                }
                
                updateAllStats();
                showAchievement('üü£ Stripe 2 Complete!', 'Driving Commitment mastered!', `+${MODULE_BONUS_XP} Bonus XP`);
            } else {
                updateAllStats();
                showAchievement(`Lesson ${lessonNum} Complete!`, `Great work on mastering this concept`, `+${XP_PER_LESSON} XP`);
            }
        }

        // Update all statistics
        function updateAllStats() {
            const completed = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            const moduleXP = parseInt(localStorage.getItem(XP_KEY) || '0');
            const purpleStripes = JSON.parse(localStorage.getItem('purpleStripesEarned') || '[]');
            const hasStripe2 = purpleStripes.includes(2);
            
            // Update header stats
            document.getElementById('xpDisplay').textContent = moduleXP;
            document.getElementById('lessonsDisplay').textContent = `${completed.length}/${TOTAL_LESSONS}`;
            document.getElementById('badgesDisplay').textContent = hasStripe2 ? '1/1' : '0/1';
            
            // Update progress bar
            const progress = (completed.length / TOTAL_LESSONS) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = 
                `${completed.length} of ${TOTAL_LESSONS} lessons completed`;
            
            // Update summary stats
            document.getElementById('summaryComplete').textContent = `${completed.length}/${TOTAL_LESSONS}`;
            document.getElementById('summaryXP').textContent = moduleXP;
            document.getElementById('summaryBadges').textContent = hasStripe2 ? '‚úÖ Earned' : 'Not Earned';
        }

        // Show achievement popup
        function showAchievement(title, desc, xp) {
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = desc;
            document.getElementById('achievementXP').textContent = xp;
            document.getElementById('achievementPopup').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        // Close achievement popup
        function closeAchievement() {
            document.getElementById('achievementPopup').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        // Initialize on page load
        loadProgress();
    </script>
</body>
</html>

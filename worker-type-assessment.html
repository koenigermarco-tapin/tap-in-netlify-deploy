<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#2d2d2d">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="version" content="3.0.0">
    <title>Worker Type Assessment - TAP-IN</title>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%); min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 900px; margin: 0 auto; }
        .header { background: white; border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .header h1 { color: #a93226; font-size: clamp(1.8em, 5vw, 2.5em); margin-bottom: 15px; }
        .header .subtitle { color: #666; font-size: clamp(1em, 2.5vw, 1.2em); line-height: 1.6; }
        .progress-container { background: white; border-radius: 15px; padding: 20px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .progress-bar { background: #e0e0e0; border-radius: 10px; height: 12px; overflow: hidden; margin-bottom: 10px; }
        .progress-fill { background: linear-gradient(90deg, #a93226 0%, #c9513f 100%); height: 100%; width: 0%; transition: width 0.3s ease; }
        .progress-text { text-align: center; color: #666; font-size: 0.95em; }
        .assessment-card { background: white; border-radius: 20px; padding: 40px 30px; margin-bottom: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .question { margin-bottom: 35px; padding: 25px; background: #f8f9fa; border-radius: 12px; transition: all 0.3s ease; }
        .question:hover { background: #f0f2f5; }
        .question-text { color: #333; font-size: clamp(1.1em, 2.5vw, 1.3em); margin-bottom: 20px; font-weight: 500; line-height: 1.5; }
        .question-number { color: #a93226; font-weight: bold; font-size: 0.9em; margin-bottom: 10px; display: block; }
        .options { display: flex; flex-direction: column; gap: 12px; }
        .option { display: flex; align-items: center; cursor: pointer; padding: 20px; border: 2px solid #e0e0e0; border-radius: 12px; transition: all 0.2s; background: white; }
        .option:hover { border-color: #a93226; transform: translateX(5px); box-shadow: 0 4px 12px rgba(169, 50, 38, 0.15); }
        .option.selected { border-color: #a93226; background: #fff5f4; }
        .option input[type="radio"] { display: none; }
        .option-label { font-size: 1.05em; color: #333; font-weight: 500; }
        .nav-buttons { display: flex; justify-content: space-between; gap: 15px; margin-top: 30px; }
        .btn { padding: 15px 35px; border: none; border-radius: 10px; font-size: 1.1em; font-weight: bold; cursor: pointer; transition: all 0.2s; text-decoration: none; display: inline-block; text-align: center; }
        .btn-primary { background: linear-gradient(135deg, #a93226 0%, #7a241b 100%); color: white; }
        .btn-primary:hover:not(:disabled) { transform: scale(1.05); box-shadow: 0 5px 20px rgba(169, 50, 38, 0.4); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-secondary { background: #e0e0e0; color: #333; }
        .btn-secondary:hover { background: #d0d0d0; }
        .results { display: none; }
        .results.active { display: block; }
        .result-card { background: linear-gradient(135deg, #a93226 0%, #7a241b 100%); color: white; border-radius: 20px; padding: 50px 40px; text-align: center; margin-bottom: 30px; }
        .result-card h2 { font-size: clamp(2.5em, 6vw, 4em); margin-bottom: 20px; }
        .result-card .subtitle { font-size: clamp(1.2em, 3vw, 1.6em); opacity: 0.95; margin-bottom: 30px; }
        .details-card { background: white; border-radius: 15px; padding: 30px; margin-bottom: 20px; }
        .details-card h3 { color: #a93226; margin-bottom: 15px; font-size: 1.4em; }
        .details-card p, .details-card ul { color: #666; line-height: 1.8; font-size: 1.05em; }
        .details-card ul { list-style-position: inside; padding-left: 0; }
        .details-card li { margin-bottom: 10px; }
        .insight-card { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #a93226; padding: 20px; margin-top: 25px; border-radius: 10px; animation: slideIn 0.4s ease; }
        .insight-icon { font-size: 2rem; margin-bottom: 10px; }
        .insight-title { color: #a93226; font-size: 1.1em; font-weight: bold; margin-bottom: 12px; }
        .insight-content { color: #555; line-height: 1.7; margin-bottom: 12px; }
        .insight-quote { font-style: italic; color: #666; font-size: 0.95em; padding: 12px; background: rgba(255,255,255,0.7); border-radius: 6px; border-left: 3px solid #a93226; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .cta-box { background: linear-gradient(135deg, #a93226 0%, #7a241b 100%); color: white; border-radius: 15px; padding: 30px; text-align: center; margin-top: 30px; }
        .cta-box h3 { margin-bottom: 15px; font-size: 1.6em; }
        .cta-box p { margin-bottom: 20px; opacity: 0.95; }
        .hidden { display: none; }
        @media (max-width: 768px) { .header, .assessment-card { padding: 25px 20px; } .nav-buttons { flex-direction: column; } .btn { width: 100%; } .result-card { padding: 30px 20px; } }
    </style>
</head>
<body>
    <!-- language switcher (EN / DE) -->
    <div id="lang-switch" style="position:fixed;top:16px;right:16px;z-index:1200;font-family:inherit;">
        <div style="background:white;border-radius:999px;padding:8px 12px;box-shadow:0 6px 20px rgba(0,0,0,0.15);font-size:0.95em;">
            <a href="worker-type-assessment.html" style="color:#a93226;text-decoration:none;font-weight:700;margin-right:10px;">EN</a>
            <a href="worker-type-assessment.de.html" style="color:#333;text-decoration:none;font-weight:700;border-left:1px solid #eee;padding-left:10px;margin-left:10px;">DE</a>
        </div>
    </div>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 data-i18n="worker_header">üèÉ Worker Type Assessment</h1>
            <p class="subtitle" data-i18n="worker_subtitle">Discover if you're a Sprinter, Jogger, or Ultrarunner. Understand your natural work rhythm and optimize your performance in just 5 minutes.</p>
        </div>

        <!-- Context Section -->
        <div class="intro-section" id="introSection" style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 30px; border-left: 4px solid #a93226;">
            <h3 style="color: #333; margin-bottom: 15px;">üèÜ Why Your Work Rhythm Matters</h3>
            <p style="color: #666; line-height: 1.7; margin-bottom: 15px;">
                <strong>Steve Jobs</strong> worked in intense creative bursts with walks between sessions (Sprinter). <strong>Angela Merkel</strong> built success through steady, methodical decision-making over decades (Jogger). <strong>David Attenborough</strong> built a 70-year career through patient, long-term commitment to his vision (Ultrarunner).
            </p>
            <p style="color: #666; line-height: 1.7; margin-bottom: 20px;">
                There's no "best" type‚Äîbut <em>misalignment kills performance</em>. Research from Stanford and MIT shows that when your work style matches your natural rhythm, productivity increases by 40% and burnout drops by 60%.
            </p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px;">
                <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; border-top: 3px solid #e63946;">
                    <div style="font-size: 2em; margin-bottom: 5px;">‚ö°</div>
                    <strong style="color: #e63946;">Sprinter</strong><br>
                    <span style="font-size: 0.85em; color: #666;">High intensity, short bursts</span>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; border-top: 3px solid #457b9d;">
                    <div style="font-size: 2em; margin-bottom: 5px;">üèÉ</div>
                    <strong style="color: #457b9d;">Jogger</strong><br>
                    <span style="font-size: 0.85em; color: #666;">Steady, consistent pace</span>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; border-top: 3px solid #2a9d8f;">
                    <div style="font-size: 2em; margin-bottom: 5px;">üéØ</div>
                    <strong style="color: #2a9d8f;">Ultrarunner</strong><br>
                    <span style="font-size: 0.85em; color: #666;">Marathon mindset, long vision</span>
                </div>
            </div>

            <p style="margin-top: 15px; font-style: italic; color: #888; font-size: 0.9em; text-align: center;">
                "The key is not to prioritize what's on your schedule, but to schedule your priorities." ‚Äî Stephen Covey
            </p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Question 1 of 12</div>
        </div>

        <!-- Assessment Form -->
        <div id="assessmentForm">
            <div class="assessment-card" id="questionCard">
                <!-- Questions will be dynamically inserted here -->
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" style="display: none;" data-i18n="prev_btn">‚Üê Previous</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled data-i18n="next_btn">Next ‚Üí</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results" class="results">
            <div class="assessment-card">
                <div id="resultContent"></div>
                
                <!-- CTA -->
                <div class="cta-box">
                    <h3>Want to Optimize Your Team?</h3>
                    <p>Discover how to build balanced teams with the right mix of Sprinters, Joggers, and Ultrarunners.</p>
                    <a href="/cdn-cgi/l/email-protection#40232f2e34212334003421306d292e6d21232124252d396e232f2d7f3335222a2523347d172f322b253260143930256013343221342527396013253333292f2e" class="btn" style="background: white; color: #a93226;" data-i18n="schedule_session">üìÖ Schedule Strategy Session</a>
                    <div style="margin-top: 20px;">
                        <a href="index.html" class="btn" style="background: transparent; border: 2px solid white; color: white;" data-i18n="back_to_assessments">‚Üê Back to Assessments</a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        // Educational insights for each question
        const insights = [
            {
                icon: 'üéØ',
                title: 'Time Horizons Shape Decisions',
                content: '<strong>Research from Harvard Business School</strong> shows that leaders naturally optimize for different time horizons. Sprinters excel at quarterly results (like Jack Welch at GE). Joggers master annual cycles (like Tim Cook at Apple). Ultrarunners think in decades (like Satya Nadella transforming Microsoft culture).',
                quote: '"The future is already here ‚Äì it\'s just not evenly distributed." - William Gibson'
            },
            {
                icon: '‚è∞',
                title: 'Your Chronotype Matters',
                content: '<strong>Neuroscience research</strong> reveals that peak performance windows vary by person. Some are "morning larks" (30% of people), others "night owls" (20%), most are "third birds" (50%). But beyond daily rhythm, your optimal work <em>session length</em> is genetic. Sprinters need variety; Ultrarunners need immersion.',
                quote: '"Give me six hours to chop down a tree and I will spend the first four sharpening the axe." - Abraham Lincoln'
            },
            {
                icon: 'üßó',
                title: 'Challenge Response Patterns',
                content: 'Stanford\'s Carol Dweck found that <strong>how you frame obstacles predicts persistence</strong>. Sprinters see challenges as problems to solve fast. Joggers see them as processes to optimize. Ultrarunners see them as character-building experiences. All three work‚Äîif aligned with your role.',
                quote: '"The greater the obstacle, the more glory in overcoming it." - Moli√®re'
            },
            {
                icon: '‚ö°',
                title: 'Energy vs. Time',
                content: '<strong>Tony Schwartz (The Power of Full Engagement)</strong> proved energy management beats time management. Sprinters recover through variety. Joggers through routine. Ultrarunners through purpose. A Stanford study found that when work style matches energy pattern, productivity increases 40% without more hours.',
                quote: '"Energy, not time, is the fundamental currency of high performance." - Tony Schwartz'
            },
            {
                icon: 'üìö',
                title: 'Learning Velocity Tradeoffs',
                content: 'Malcolm Gladwell\'s "10,000 hours" applies differently. <strong>Sprinters learn breadth fast</strong> (Tim Ferriss\'s meta-learning). <strong>Joggers build depth systematically</strong> (Angela Duckworth\'s grit). <strong>Ultrarunners achieve mastery</strong> (Josh Waitzkin\'s "learning to learn"). MIT research: your learning style should match your career strategy.',
                quote: '"I am always doing that which I cannot do, in order that I may learn how to do it." - Pablo Picasso'
            },
            {
                icon: 'üò§',
                title: 'Frustration as Signal',
                content: 'Google\'s Project Aristotle discovered <strong>what frustrates you reveals your optimal tempo</strong>. Sprinters in slow environments burn out from boredom. Joggers in chaotic environments burn out from stress. Ultrarunners in short-term cultures burn out from meaninglessness. Match environment to tempo.',
                quote: '"The only way to do great work is to love what you do." - Steve Jobs'
            },
            {
                icon: 'üìä',
                title: 'Productivity Architecture',
                content: '<strong>Cal Newport (Deep Work)</strong> found that productivity patterns are consistent within individuals but vary wildly between them. Sprinters thrive on "bimodal" schedules (intense bursts). Joggers on "rhythmic" (same time daily). Ultrarunners on "journalistic" (opportunistic deep work). Force-fitting the wrong style kills output.',
                quote: '"Productivity is never an accident. It is always the result of commitment to excellence, intelligent planning, and focused effort." - Paul J. Meyer'
            },
            {
                icon: 'üé™',
                title: 'Goal Timeframes & Motivation',
                content: 'Dan Pink\'s research on motivation: <strong>Sprinters need frequent "progress milestones"</strong> (dopamine hits). <strong>Joggers need predictable checkpoints</strong> (routine reinforcement). <strong>Ultrarunners need compelling "why"</strong> (purpose over progress). A BYU study: mismatched goal timeframes reduce motivation by 60%.',
                quote: '"A goal without a plan is just a wish." - Antoine de Saint-Exup√©ry'
            },
            {
                icon: 'üí™',
                title: 'Stress as Performance Enhancer',
                content: '<strong>Stanford psychologist Kelly McGonigal</strong> proved that viewing stress as enhancing (not debilitating) improves outcomes. Sprinters use acute stress as fuel. Joggers manage chronic stress through systems. Ultrarunners reframe stress as meaning. Your relationship with pressure should match your tempo.',
                quote: '"The greatest weapon against stress is our ability to choose one thought over another." - William James'
            },
            {
                icon: 'üí¨',
                title: 'Communication Cadence',
                content: '<strong>Research from MIT\'s Human Dynamics Lab</strong>: communication frequency preferences correlate with work rhythm. Sprinters want real-time updates (Slack culture). Joggers want scheduled sync-ups (weekly 1-on-1s). Ultrarunners want strategic deep-dives (quarterly offsites). Mismatched communication = friction.',
                quote: '"The single biggest problem in communication is the illusion that it has taken place." - George Bernard Shaw'
            },
            {
                icon: '‚è≥',
                title: 'Project Length Sweet Spot',
                content: '<strong>Basecamp\'s Jason Fried</strong> discovered ideal project durations: <strong>Sprinters peak at 2-6 weeks</strong> (startup "sprints"). <strong>Joggers at 3-6 months</strong> (enterprise release cycles). <strong>Ultrarunners at 1-3 years</strong> (transformational initiatives). A PMI study: projects 2x longer than your sweet spot have 80% higher burnout.',
                quote: '"Plans are worthless, but planning is everything." - Dwight D. Eisenhower'
            },
            {
                icon: 'üè¢',
                title: 'Cultural Fit Predicts Retention',
                content: 'Organizational culture research by Edgar Schein: <strong>Speed-driven cultures</strong> (Amazon, Meta) attract Sprinters. <strong>Process-driven cultures</strong> (Toyota, Apple operations) attract Joggers. <strong>Mission-driven cultures</strong> (Patagonia, SpaceX) attract Ultrarunners. LinkedIn data: culture mismatch = #1 reason for voluntary departure.',
                quote: '"Culture eats strategy for breakfast." - Peter Drucker'
            }
        ];

        // Hardcoded English questions for robust static behavior
        const questions = [
            {
                question: 'I prefer working on projects that have:',
                options: [
                    { value: 'sprint', label: 'Quick wins and immediate results' },
                    { value: 'jog', label: 'Steady progress over weeks/months' },
                    { value: 'ultra', label: 'Long-term impact over years' }
                ]
            },
            {
                question: 'My ideal work schedule looks like:',
                options: [
                    { value: 'sprint', label: 'Intense bursts with breaks' },
                    { value: 'jog', label: 'Consistent daily routine' },
                    { value: 'ultra', label: 'Marathon sessions when inspired' }
                ]
            },
            {
                question: 'When facing a challenge, I:',
                options: [
                    { value: 'sprint', label: 'Push hard until resolved quickly' },
                    { value: 'jog', label: 'Work methodically day by day' },
                    { value: 'ultra', label: 'Embrace it as part of the journey' }
                ]
            },
            {
                question: 'I feel most energized when:',
                options: [
                    { value: 'sprint', label: 'Racing against tight deadlines' },
                    { value: 'jog', label: 'Making steady measurable progress' },
                    { value: 'ultra', label: 'Working toward a meaningful vision' }
                ]
            },
            {
                question: 'My approach to learning new skills:',
                options: [
                    { value: 'sprint', label: 'Crash courses and quick mastery' },
                    { value: 'jog', label: 'Regular practice and improvement' },
                    { value: 'ultra', label: 'Deep study and mastery over time' }
                ]
            },
            {
                question: 'I get frustrated when:',
                options: [
                    { value: 'sprint', label: 'Things move too slowly' },
                    { value: 'jog', label: 'Routines get disrupted' },
                    { value: 'ultra', label: 'Focus shifts to short-term wins' }
                ]
            },
            {
                question: 'My productivity is best described as:',
                options: [
                    { value: 'sprint', label: 'High intensity, shorter duration' },
                    { value: 'jog', label: 'Consistent and reliable' },
                    { value: 'ultra', label: 'Increasing over extended periods' }
                ]
            },
            {
                question: 'When setting goals, I prefer:',
                options: [
                    { value: 'sprint', label: 'Urgent, achievable within days/weeks' },
                    { value: 'jog', label: 'Monthly or quarterly milestones' },
                    { value: 'ultra', label: 'Multi-year transformational outcomes' }
                ]
            },
            {
                question: 'My relationship with stress:',
                options: [
                    { value: 'sprint', label: 'Fuel for short-term performance' },
                    { value: 'jog', label: 'Something I manage consistently' },
                    { value: 'ultra', label: 'Part of meaningful work I endure' }
                ]
            },
            {
                question: 'I communicate best through:',
                options: [
                    { value: 'sprint', label: 'Quick updates and action items' },
                    { value: 'jog', label: 'Regular check-ins and reports' },
                    { value: 'ultra', label: 'Deep discussions and strategy' }
                ]
            },
            {
                question: 'My ideal project duration:',
                options: [
                    { value: 'sprint', label: '1-4 weeks' },
                    { value: 'jog', label: '2-6 months' },
                    { value: 'ultra', label: '1+ years' }
                ]
            },
            {
                question: 'I thrive in environments that value:',
                options: [
                    { value: 'sprint', label: 'Speed and decisive action' },
                    { value: 'jog', label: 'Reliability and consistency' },
                    { value: 'ultra', label: 'Vision and purpose' }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = {};

        function renderQuestion() {
            const q = questions[currentQuestion];
            const card = document.getElementById('questionCard');
            
            // Hide intro section after question 1
            const introSection = document.getElementById('introSection');
            if (introSection) {
                introSection.style.display = currentQuestion >= 1 ? 'none' : 'block';
            }
            
            let html = '';
            
            // Show insight at the TOP for questions 2-12 (index 1-11)
            if (currentQuestion >= 1) {
                const insight = insights[currentQuestion - 1]; // insights[0] shows before question 2
                html += `
                    <div class="insight-card" style="margin-bottom: 25px;">
                        <div class="insight-icon">${insight.icon}</div>
                        <div class="insight-title">${insight.title}</div>
                        <div class="insight-content">${insight.content}</div>
                        <div class="insight-quote">${insight.quote}</div>
                    </div>
                `;
            }
            
            html += `
                <div class="question">
                    <div class="question-text">
                        <span class="question-number">${currentQuestion + 1}.</span>
                        ${q.question}
                    </div>
                    <div class="options">
            `;
            q.options.forEach((opt) => {
                const selected = answers[currentQuestion] === opt.value ? 'selected' : '';
                html += `
                    <label class="option ${selected}" onclick="selectOption(this, '${opt.value}')">
                        <input type="radio" name="q${currentQuestion}" value="${opt.value}">
                        <div class="option-label">${opt.label}</div>
                    </label>
                `;
            });
            html += `
                    </div>
                </div>
            `;
            card.innerHTML = html;
            updateProgress();
            updateButtons();
        }

        function selectOption(el, value) {
                answers[currentQuestion] = value;
                document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                if (el && el.classList) el.classList.add('selected');
                const input = el.querySelector('input[type="radio"]');
                if (input) input.checked = true;
                document.getElementById('nextBtn').disabled = false;
            }

            function updateProgress() {
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            }

            function updateButtons() {
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const prevText = '‚Üê Previous';
                const nextText = 'Next ‚Üí';
                const seeResultsText = 'See Results ‚Üí';
                prevBtn.style.display = currentQuestion > 0 ? 'block' : 'none';
                prevBtn.textContent = prevText;
                nextBtn.textContent = currentQuestion === questions.length - 1 ? seeResultsText : nextText;
                nextBtn.disabled = !answers.hasOwnProperty(currentQuestion);
            }

            function nextQuestion() {
                if (currentQuestion < questions.length - 1) {
                    currentQuestion++;
                    renderQuestion();
                    window.scrollTo(0, 0);
                } else {
                    showResults();
                }
            }

            function previousQuestion() {
                if (currentQuestion > 0) {
                    currentQuestion--;
                    renderQuestion();
                    window.scrollTo(0, 0);
                }
            }

            function showResults() {
                const answerValues = Object.values(answers);
                const sprintCount = answerValues.filter(a => a === 'sprint').length;
                const jogCount = answerValues.filter(a => a === 'jog').length;
                const ultraCount = answerValues.filter(a => a === 'ultra').length;
                
                // Calculate percentages
                const total = sprintCount + jogCount + ultraCount;
                const sprintPct = Math.round((sprintCount / total) * 100);
                const jogPct = Math.round((jogCount / total) * 100);
                const ultraPct = Math.round((ultraCount / total) * 100);
                
                let type, icon, description, strengths, challenges, teamFit, recommendations, primaryColor, secondaryColor, accentColor;
                if (sprintCount >= jogCount && sprintCount >= ultraCount) {
                    type = 'Sprinter';
                    icon = '‚ö°';
                    primaryColor = '#e63946';
                    secondaryColor = '#f1faee';
                    accentColor = '#d62828';
                    description = 'You thrive on urgency and quick wins. You bring explosive energy and rapid execution to short-term challenges. You\'re at your best when there\'s a clear finish line and the pressure is on.';
                    strengths = [
                        '<strong>High-intensity bursts:</strong> You deliver exceptional output in short, focused periods',
                        '<strong>Crisis excellence:</strong> Pressure activates your best performance',
                        '<strong>Rapid prototyping:</strong> You move from idea to execution faster than others',
                        '<strong>Quick pivots:</strong> You adapt and change direction without hesitation',
                        '<strong>Deadline mastery:</strong> Time pressure is fuel, not friction'
                    ];
                    challenges = [
                        '<strong>Routine fatigue:</strong> Maintenance work drains your energy',
                        '<strong>Burnout risk:</strong> Recovery periods are essential, not optional',
                        '<strong>Long-term patience:</strong> Multi-year projects may lose your interest',
                        '<strong>Completion gaps:</strong> Starting is easy; finishing requires discipline',
                        '<strong>Over-commitment:</strong> Saying yes to everything leads to scattered energy'
                    ];
                    teamFit = 'Sprinters excel in <strong>startups, crisis situations, and time-sensitive projects</strong>. You shine in environments with rapid iteration and clear deadlines. Pair with Joggers for sustained execution and Ultrarunners for strategic vision.';
                    recommendations = '<strong>Build recovery rhythms:</strong> Schedule downtime between sprints as rigorously as you schedule work. <strong>Rotate intensity:</strong> Alternate between high-pressure projects and lower-stakes work. <strong>Define finish lines:</strong> Break long projects into sprint-sized chunks with clear endpoints.';
                } else if (ultraCount >= jogCount) {
                    type = 'Ultrarunner';
                    icon = 'ÔøΩ';
                    primaryColor = '#2a9d8f';
                    secondaryColor = '#e9f5f3';
                    accentColor = '#1d7a6f';
                    description = 'You excel at long-term vision and sustained effort. You bring strategic thinking and endurance to transformational projects. You\'re energized by meaningful challenges that unfold over years.';
                    strengths = [
                        '<strong>Strategic patience:</strong> You see connections others miss by thinking in decades',
                        '<strong>Exceptional persistence:</strong> Obstacles are checkpoints, not roadblocks',
                        '<strong>Systems thinking:</strong> You understand how pieces fit together over time',
                        '<strong>Meaning-driven:</strong> Purpose fuels your marathon-level commitment',
                        '<strong>Compound impact:</strong> Your work gains value exponentially over years'
                    ];
                    challenges = [
                        '<strong>Short-term frustration:</strong> Constant pivots feel chaotic and wasteful',
                        '<strong>Urgency tension:</strong> "Drop everything" requests disrupt your rhythm',
                        '<strong>Sunk cost attachment:</strong> Hard to let go of long-term investments',
                        '<strong>Vision clarity:</strong> Others may not see the destination you\'re heading toward',
                        '<strong>Milestone design:</strong> Years between wins can demotivate without markers'
                    ];
                    teamFit = 'Ultrarunners thrive in <strong>transformation projects, R&D, and strategic roles</strong>. You excel where vision matters more than speed. Balance with Sprinters for tactical quick wins and Joggers for consistent day-to-day execution.';
                    recommendations = '<strong>Ensure vision alignment:</strong> Only commit to multi-year projects that align with your long-term goals. <strong>Create milestone celebrations:</strong> Build checkpoints every 3-6 months to maintain motivation. <strong>Partner strategically:</strong> Delegate urgent work to Sprinters while you focus on the horizon.';
                } else {
                    type = 'Jogger';
                    icon = 'üèÉ';
                    primaryColor = '#457b9d';
                    secondaryColor = '#e8f1f7';
                    accentColor = '#2d5a75';
                    description = 'You excel at consistency and reliability. You bring steady performance and methodical progress to any team. You\'re the backbone that keeps things running smoothly day after day.';
                    strengths = [
                        '<strong>Unwavering consistency:</strong> Your output is predictable and reliable',
                        '<strong>Process mastery:</strong> You build systems that eliminate chaos',
                        '<strong>Sustainable pace:</strong> You avoid burnout through disciplined rhythm',
                        '<strong>Quality focus:</strong> Steady attention produces higher quality than rushed work',
                        '<strong>Team stability:</strong> Your reliability anchors others\' planning'
                    ];
                    challenges = [
                        '<strong>Change resistance:</strong> Sudden shifts disrupt your optimized flow',
                        '<strong>Urgency spikes:</strong> Crisis mode feels unnatural and draining',
                        '<strong>Innovation pressure:</strong> Constant experimentation conflicts with proven processes',
                        '<strong>Routine trap:</strong> Risk of optimizing for comfort over growth',
                        '<strong>Flexibility demand:</strong> Need advance warning to adjust pace effectively'
                    ];
                    teamFit = 'Joggers are essential for <strong>operations, ongoing projects, and process-driven work</strong>. You provide the reliable foundation that lets Sprinters sprint and Ultrarunners dream. Your consistency makes chaos manageable.';
                    recommendations = '<strong>Build protective routines:</strong> Design your day to minimize disruptions. <strong>Prepare for volatility:</strong> Create playbooks for common interruptions. <strong>Communicate early:</strong> Request advance notice of changes to adapt your systems.';
                }
                document.getElementById('assessmentForm').classList.add('hidden');
                document.getElementById('results').classList.add('active');
                document.getElementById('resultContent').innerHTML = `
                    <!-- Social Sharing Section -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; text-align: center;">
                        <h3 style="color: white; margin-bottom: 0.5rem;">üì± Share Your Worker Type</h3>
                        <p style="font-size: 0.95rem; margin-bottom: 1.5rem; opacity: 0.95;">Help your team understand work styles</p>
                        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 1.5rem;">
                            <button onclick="shareToLinkedIn()" style="background: #0077b5; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                LinkedIn
                            </button>
                            <button onclick="shareToTwitter()" style="background: #1da1f2; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                Twitter
                            </button>
                            <button onclick="copyShareLink()" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                üìã Copy Link
                            </button>
                        </div>
                        <div id="shareCanvas" style="margin: 1.5rem auto; max-width: 600px;"></div>
                        <p style="font-size: 0.85rem; opacity: 0.8;">üí° Understanding work types reduces team friction</p>
                    </div>

                    <div class="result-card" style="background: linear-gradient(135deg, ${primaryColor} 0%, ${accentColor} 100%);">
                        <h2>${icon} You're a ${type}!</h2>
                        <p class="subtitle">${description}</p>
                        <div style="margin-top: 25px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            <div style="background: rgba(255,255,255,0.2); padding: 12px 20px; border-radius: 8px;">
                                <div style="font-size: 1.8em; font-weight: bold;">${sprintPct}%</div>
                                <div style="font-size: 0.9em; opacity: 0.9;">Sprinter</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 12px 20px; border-radius: 8px;">
                                <div style="font-size: 1.8em; font-weight: bold;">${jogPct}%</div>
                                <div style="font-size: 0.9em; opacity: 0.9;">Jogger</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 12px 20px; border-radius: 8px;">
                                <div style="font-size: 1.8em; font-weight: bold;">${ultraPct}%</div>
                                <div style="font-size: 0.9em; opacity: 0.9;">Ultrarunner</div>
                            </div>
                        </div>
                    </div>
                    <div class="details-card" style="background: ${secondaryColor}; border-left: 4px solid ${primaryColor};">
                        <h3 style="color: ${primaryColor};">üí™ Your Strengths</h3>
                        <ul style="list-style: none; padding-left: 0;">
                            ${strengths.map(s => `<li style="margin-bottom: 12px; padding-left: 20px; position: relative;">
                                <span style="position: absolute; left: 0; color: ${primaryColor};">‚úì</span>
                                ${s}
                            </li>`).join('')}
                        </ul>
                    </div>
                    <div class="details-card" style="background: #fff5f0; border-left: 4px solid #ff6b35;">
                        <h3 style="color: #ff6b35;">‚ö†Ô∏è Watch Out For</h3>
                        <ul style="list-style: none; padding-left: 0;">
                            ${challenges.map(c => `<li style="margin-bottom: 12px; padding-left: 20px; position: relative;">
                                <span style="position: absolute; left: 0; color: #ff6b35;">!</span>
                                ${c}
                            </li>`).join('')}
                        </ul>
                    </div>
                    <div class="details-card" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid ${primaryColor};">
                        <h3 style="color: ${primaryColor};">üë• Team Fit</h3>
                        <p style="line-height: 1.8;">${teamFit}</p>
                    </div>
                    <div class="details-card" style="background: ${secondaryColor}; border-left: 4px solid ${accentColor};">
                        <h3 style="color: ${accentColor};">üéØ Action Plan</h3>
                        <p style="line-height: 1.8;">${recommendations}</p>
                    </div>
                    <div class="cta-box">
                        <h3>Want to Optimize Your Team?</h3>
                        <p>Discover how to build balanced teams with the right mix of Sprinters, Joggers, and Ultrarunners.</p>
                        <a href="index.html" class="btn btn-secondary">‚Üê Back to Assessments</a>
                    </div>
                `;
                window.scrollTo(0, 0);
                document.querySelector('.result-card').focus?.();
                
                // Initialize social sharing
                const workerType = type.toLowerCase();
                const percentage = type === 'Sprinter' ? sprintPct : (type === 'Jogger' ? jogPct : ultraPct);
                setTimeout(() => initializeSocialSharing(workerType, percentage), 500);
            }

            // Social Sharing Functions
            let currentProfile = {};

            function initializeSocialSharing(workerType, percentage) {
                currentProfile = { workerType, percentage };
                generateShareCard();
            }

            function generateShareCard() {
                const canvas = document.createElement('canvas');
                canvas.width = 1200;
                canvas.height = 630;
                const ctx = canvas.getContext('2d');

                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#a93226');
                gradient.addColorStop(1, '#7a241b');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = 'rgba(255, 255, 255, 0.05)';
                for (let i = 0; i < 20; i++) {
                    ctx.fillRect(i * 60, 0, 30, canvas.height);
                }

                ctx.fillStyle = 'white';
                ctx.font = 'bold 64px -apple-system, BlinkMacSystemFont, "Segoe UI", Arial';
                ctx.textAlign = 'center';
                
                const typeData = {
                    sprinter: { icon: '‚ö°', name: 'SPRINTER' },
                    jogger: { icon: 'üèÉ', name: 'JOGGER' },
                    ultrarunner: { icon: 'üèÉ‚Äç‚ôÄÔ∏è', name: 'ULTRARUNNER' }
                };

                ctx.fillText('My Worker Type:', canvas.width / 2, 200);
                
                ctx.font = 'bold 90px -apple-system, BlinkMacSystemFont, "Segoe UI", Arial';
                ctx.fillText(typeData[currentProfile.workerType].icon + ' ' + typeData[currentProfile.workerType].name, canvas.width / 2, 340);
                
                ctx.font = 'bold 48px -apple-system, BlinkMacSystemFont, "Segoe UI", Arial';
                ctx.fillText(Math.round(currentProfile.percentage) + '% Match', canvas.width / 2, 430);

                ctx.font = '32px -apple-system, BlinkMacSystemFont, "Segoe UI", Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillText('What\'s YOUR Work Type?', canvas.width / 2, 550);

                const shareCanvas = document.getElementById('shareCanvas');
                if (shareCanvas) {
                    shareCanvas.innerHTML = `<img src="${canvas.toDataURL()}" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);" alt="Share card">`;
                }
            }

            function getShareText() {
                const typeNames = {
                    sprinter: 'Sprinter',
                    jogger: 'Jogger',
                    ultrarunner: 'Ultrarunner'
                };

                return `I just discovered I'm a ${typeNames[currentProfile.workerType]} (${Math.round(currentProfile.percentage)}% match)!

My work style:
‚Ä¢ High-intensity bursts or steady consistency?
‚Ä¢ Quick wins or long-term vision?
‚Ä¢ Crisis energy or sustainable pace?

This free assessment revealed how I naturally work best.

What's YOUR worker type?`;
            }

            function shareToLinkedIn() {
                const text = encodeURIComponent(getShareText());
                const url = encodeURIComponent(window.location.href);
                window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}&summary=${text}`, '_blank');
                
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'share', {
                        'event_category': 'Social',
                        'event_label': 'LinkedIn_Worker',
                        'value': 1
                    });
                }
            }

            function shareToTwitter() {
                const text = encodeURIComponent(getShareText());
                const url = encodeURIComponent(window.location.href);
                window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}&hashtags=WorkStyle,Productivity`, '_blank');
                
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'share', {
                        'event_category': 'Social',
                        'event_label': 'Twitter_Worker',
                        'value': 1
                    });
                }
            }

            function copyShareLink() {
                const shareText = getShareText() + '

' + window.location.href;
                navigator.clipboard.writeText(shareText).then(() => {
                    const btn = event.target;
                    const originalText = btn.textContent;
                    btn.textContent = '‚úì Copied!';
                    btn.style.background = '#10b981';
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.style.background = 'rgba(255,255,255,0.2)';
                    }, 2000);
                    
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'share', {
                            'event_category': 'Social',
                            'event_label': 'Copy_Link_Worker',
                            'value': 1
                        });
                    }
                });
            }

            document.addEventListener('DOMContentLoaded', function() {
                renderQuestion();
            });
    
    // Export Functions (Option 1: Client-Side CSV/XLSX)
    function addExportButtons(data) {
        const exportHTML = `
            <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 15px; padding: 30px; margin: 30px 0; text-align: center; border: 2px solid #e0e0e0;">
                <h3 style="color: #333; margin-bottom: 15px;">üìä Export Your Results</h3>
                <p style="color: #666; margin-bottom: 20px;">Download your complete assessment results for analysis, reporting, or personal records.</p>
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="exportToCSV()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                        üì• Download CSV
                    </button>
                    <button onclick="exportToExcel()" style="background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);">
                        üìä Download Excel
                    </button>
                    <button onclick="exportToJSON()" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);">
                        üíæ Download JSON
                    </button>
                </div>
                <p style="color: #999; margin-top: 15px; font-size: 0.9em;">Your data stays private - all exports happen directly in your browser.</p>
            </div>
        `;
        const resultContainer = document.getElementById('resultContent') || document.querySelector('.result-display') || document.querySelector('.results-container');
        if (resultContainer) {
            resultContainer.insertAdjacentHTML('beforeend', exportHTML);
        }
    }
    
    function exportToCSV() {
        const data = gatherExportData();
        const csv = convertToCSV(data);
        downloadFile(csv, 'assessment-results-' + Date.now() + '.csv', 'text/csv');
        trackExport('CSV');
    }
    
    function exportToExcel() {
        const data = gatherExportData();
        const ws = XLSX.utils.json_to_sheet(data.details || [data]);
        const wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "Assessment Results");
        
        // Add summary sheet if categories exist
        if (data.categories && data.categories.length > 0) {
            const summaryData = [{
                'Assessment Date': data.timestamp,
                'Overall Score': (data.totalScore || data.score) + '/' + (data.maxScore || 100),
                'Level': data.levelText || data.type || ''
            }];
            data.categories.forEach(cat => {
                summaryData[0][cat.name + ' Score'] = cat.score + '/' + cat.maxScore;
            });
            const summaryWs = XLSX.utils.json_to_sheet(summaryData);
            XLSX.utils.book_append_sheet(wb, summaryWs, "Summary");
        }
        
        XLSX.writeFile(wb, 'assessment-results-' + Date.now() + '.xlsx');
        trackExport('Excel');
    }
    
    function exportToJSON() {
        const data = gatherExportData();
        const json = JSON.stringify(data, null, 2);
        downloadFile(json, 'assessment-results-' + Date.now() + '.json', 'application/json');
        trackExport('JSON');
    }
    
    function convertToCSV(data) {
        let csv = (data.assessmentType || 'Assessment') + ' Results\n';
        csv += `Date,${data.timestamp}
`;
        csv += `Score,${(data.totalScore || data.score)}/${(data.maxScore || 100)}
`;
        csv += `Level,${data.levelText || data.type || ''}
`;
        csv += '\n';
        
        if (data.categories && data.categories.length > 0) {
            csv += 'Category Scores\n';
            csv += 'Category,Score,Max,Percentage\n';
            data.categories.forEach(cat => {
                csv += `${cat.name},${cat.score},${cat.maxScore},${cat.percentage}%
`;
            });
            csv += '\n';
        }
        
        if (data.details && data.details.length > 0) {
            csv += 'Detailed Responses\n';
            const headers = Object.keys(data.details[0]);
            csv += headers.join(',') + '\n';
            data.details.forEach(row => {
                const values = headers.map(h => {
                    let v = row[h];
                    if (typeof v === 'string') v = v.replace(/"/g, '""');
                    return `"${v}"`;
                });
                csv += values.join(',') + '\n';
            });
        }
        
        return csv;
    }
    
    function downloadFile(content, filename, mimeType) {
        const blob = new Blob([content], { type: mimeType });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
    }
    
    function trackExport(format) {
        if (typeof gtag !== 'undefined') {
            gtag('event', 'export_data', {
                'event_category': 'Data Export',
                'event_label': format + '_Assessment',
                'value': 1
            });
        }
    }
    
    // Backend data collection (Google Sheets + Database)
    async function saveAssessmentData(data) {
        const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE';
        
        try {
            await fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    ...data,
                    userAgent: navigator.userAgent,
                    language: navigator.language
                })
            });
        } catch (error) {
            console.log('Google Sheets not configured');
        }
        
        try {
            await fetch('/.netlify/functions/save-assessment', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
        } catch (error) {
            console.log('Database not configured');
        }
        
        try {
            const existing = JSON.parse(localStorage.getItem('tap-in-assessments') || '[]');
            existing.push({ ...data, id: Date.now() });
            if (existing.length > 10) existing.shift();
            localStorage.setItem('tap-in-assessments', JSON.stringify(existing));
        } catch (e) {}
    }

    </script>
</body>
</html>
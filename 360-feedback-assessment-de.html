<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <title>360¬∞ Feedback Collection - TAP-IN Brown Belt</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #92400e 0%, #78350f 50%, #713f12 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            padding: 40px 20px 30px;
        }

        .header h1 {
            font-size: clamp(2em, 5vw, 2.8em);
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: clamp(1em, 2.5vw, 1.3em);
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto 10px;
        }

        .header .belt-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        /* Screen Container */
        .screen {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeIn 0.4s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Intro Screen */
        .intro-content h2 {
            color: #78350f;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .intro-content p {
            color: #64748b;
            line-height: 1.8;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .intro-content .info-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #78350f;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
        }

        .intro-content .info-box h3 {
            color: #78350f;
            margin-bottom: 10px;
        }

        .intro-content .info-box p {
            color: #78350f;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .intro-content .info-box ul {
            margin: 10px 0 0 20px;
            color: #92400e;
        }

        .intro-content .info-box li {
            margin: 5px 0;
        }

        /* Question Cards */
        .question-card {
            background: #f8fafc;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #92400e;
        }

        .question-card h3 {
            color: #1e293b;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .question-card p {
            color: #64748b;
            margin-bottom: 15px;
            line-height: 1.7;
        }

        .rating-scale {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .rating-option {
            flex: 1;
            min-width: 60px;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .rating-option:hover {
            border-color: #92400e;
            background: #fef3c7;
        }

        .rating-option.selected {
            border-color: #92400e;
            background: linear-gradient(135deg, #fde68a 0%, #fbbf24 100%);
            color: #78350f;
            font-weight: 600;
        }

        .rating-option .number {
            font-size: 1.3em;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .rating-option .label {
            font-size: 0.8em;
            display: block;
        }

        textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            transition: border-color 0.3s;
            margin-top: 10px;
        }

        textarea:focus {
            outline: none;
            border-color: #92400e;
        }

        /* Results Screen */
        .results-content {
            text-align: center;
        }

        .results-content h2 {
            color: #78350f;
            font-size: 2.2em;
            margin-bottom: 20px;
        }

        .summary-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            border: 3px solid #92400e;
            text-align: left;
        }

        .summary-item {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }

        .summary-item h4 {
            color: #78350f;
            margin-bottom: 8px;
        }

        .summary-item .score {
            font-size: 2em;
            font-weight: bold;
            color: #92400e;
            margin-bottom: 5px;
        }

        .summary-item p {
            color: #64748b;
            line-height: 1.6;
        }

        .feedback-section {
            margin: 25px 0;
            text-align: left;
        }

        .feedback-section h3 {
            color: #78350f;
            margin-bottom: 15px;
        }

        .feedback-item {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #92400e;
        }

        .feedback-item h4 {
            color: #1e293b;
            margin-bottom: 10px;
        }

        .feedback-item p {
            color: #64748b;
            line-height: 1.7;
        }

        .feedback-item .rating-display {
            display: inline-block;
            background: linear-gradient(135deg, #fde68a 0%, #fbbf24 100%);
            padding: 5px 15px;
            border-radius: 20px;
            color: #78350f;
            font-weight: 600;
            margin-top: 10px;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 10px;
            margin: 30px 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #92400e 0%, #78350f 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            color: white;
            font-size: 0.9em;
            margin-top: 8px;
            opacity: 0.9;
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        button, .btn {
            padding: 15px 35px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #92400e 0%, #78350f 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(146,64,14,0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(146,64,14,0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: white;
            color: #78350f;
            border: 2px solid #78350f;
        }

        .btn-secondary:hover {
            background: #fef3c7;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }

            .screen {
                padding: 25px 20px;
            }

            .button-group {
                flex-direction: column;
            }

            button, .btn {
                width: 100%;
            }

            .rating-scale {
                flex-direction: column;
            }

            .rating-option {
                min-width: 100%;
            }
        }
    </style>
    <link rel="stylesheet" href="css/accessibility.css">

<body>
    <!-- Skip Links for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#navigation" class="skip-link">Skip to navigation</a>

    <div class="container">
        <div class="header">
            <h1>üîÑ 360¬∞ Feedback Collection</h1>
            <p class="subtitle">Gather honest feedback on your leadership from all perspectives</p>
            <div class="belt-badge">üü§ Brown Belt: Avoidance of Accountability</div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">Question 0 of 12</div>

        <!-- Intro Screen -->
        <div class="screen active" id="screen-intro">
            <div class="intro-content">
                <h2>Welcome to 360¬∞ Feedback</h2>
                <p>True accountability starts with being open to feedback from all directions‚Äîyour manager, peers, direct reports, and yourself.</p>
                
                <div class="info-box">
                    <h3>üìã What is 360¬∞ Feedback?</h3>
                    <p>A comprehensive assessment where you rate yourself on key leadership behaviors, then compare your self-perception against how others see you. The gaps reveal blind spots and growth opportunities.</p>
                    <ul>
                        <li><strong>Self-Assessment:</strong> How you see yourself (12 questions)</li>
                        <li><strong>Manager View:</strong> How your boss would rate you (optional simulation)</li>
                        <li><strong>Peer View:</strong> How colleagues see you (optional simulation)</li>
                        <li><strong>Direct Report View:</strong> How your team sees you (optional simulation)</li>
                    </ul>
                </div>

                <div class="info-box" style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-left-color: #3b82f6;">
                    <h3>‚è±Ô∏è Time: 15-20 minutes</h3>
                    <p>This assessment will help you understand how you're perceived as a leader and where accountability patterns might be showing up.</p>
                </div>

                <div class="info-box" style="background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border-left-color: #ef4444;">
                    <h3>üü§ Why This Matters for Accountability</h3>
                    <p><strong>You can't hold others accountable if you're not accountable yourself.</strong> This assessment helps you see where you might be avoiding feedback, missing blind spots, or creating double standards. Real accountability requires being as hard on yourself as you are on others.</p>
                </div>

                <div class="button-group">
                    <button class="btn-primary" onclick="startAssessment()">Begin Self-Assessment ‚Üí</button>
                    <a href="brown-belt-de.html" class="btn-secondary">‚Üê Back to Brown Belt</a>
                </div>
            </div>
        </div>

        <!-- Question Screen -->
        <div class="screen" id="screen-questions">
            <div class="question-card" id="questionCard">
                <h3 id="questionText"></h3>
                <p id="questionContext"></p>
                <div class="rating-scale" id="ratingScale"></div>
                <label for="questionComments" style="display: block; color: #64748b; margin-top: 20px; font-size: 0.95em;">
                    Optional: Add context or examples
                </label>
                <textarea id="questionComments" placeholder="Any specific examples or context you want to note..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-secondary" onclick="previousQuestion()" id="prevBtn">‚Üê Previous</button>
                <button class="btn-primary" onclick="nextQuestion()" id="nextBtn" disabled>Next ‚Üí</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="screen-results">
            <div class="results-content">
                <h2>üéØ Your 360¬∞ Feedback Results</h2>

                <div class="summary-card">
                    <h3 style="color: #78350f; margin-bottom: 20px;">Overall Self-Assessment Score</h3>
                    <div class="summary-item">
                        <div class="score" id="overallScore">0.0</div>
                        <p>Your average self-rating across all 12 leadership dimensions</p>
                    </div>
                </div>

                <div class="feedback-section">
                    <h3>üìä Breakdown by Category</h3>
                    <div id="categoryBreakdown"></div>
                </div>

                <div class="feedback-section">
                    <h3>üí° Key Insights</h3>
                    <div id="insights"></div>
                </div>

                <div class="feedback-section">
                    <h3>üéØ Development Focus Areas</h3>
                    <div id="focusAreas"></div>
                </div>

                <div class="info-box" style="margin: 30px 0; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left-color: #92400e;">
                    <h3>üìù Next Steps</h3>
                    <p style="color: #78350f; margin-bottom: 10px;"><strong>To make this a true 360¬∞:</strong></p>
                    <ul style="color: #92400e; margin-left: 20px;">
                        <li>Share these questions with your manager, peers, and direct reports</li>
                        <li>Ask them to rate you honestly (anonymously if possible)</li>
                        <li>Compare their ratings to your self-assessment</li>
                        <li>Look for the biggest gaps‚Äîthose are your blind spots</li>
                        <li>Schedule a follow-up conversation to discuss the feedback</li>
                    </ul>
                </div>

                <div class="button-group">
                    <button class="btn-primary" onclick="exportResults()">üìã Export Results</button>
                    <a href="brown-belt-de.html" class="btn-primary">‚Üê Back to Brown Belt</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                category: 'Trust & Vulnerability',
                text: 'I openly admit mistakes and weaknesses to my team',
                context: 'Leaders who model vulnerability create psychological safety for others to be accountable.'
            },
            {
                id: 2,
                category: 'Trust & Vulnerability',
                text: 'I actively seek feedback, even when it\'s uncomfortable',
                context: 'Accountability requires being open to hearing hard truths about your performance.'
            },
            {
                id: 3,
                category: 'Productive Conflict',
                text: 'I engage in difficult conversations rather than avoiding them',
                context: 'Holding others accountable requires being willing to have uncomfortable discussions.'
            },
            {
                id: 4,
                category: 'Productive Conflict',
                text: 'I call out behavior that doesn\'t align with our values',
                context: 'Real accountability means addressing issues in the moment, not letting them slide.'
            },
            {
                id: 5,
                category: 'Commitment',
                text: 'I follow through on commitments I make to the team',
                context: 'You can\'t hold others to standards you don\'t meet yourself.'
            },
            {
                id: 6,
                category: 'Commitment',
                text: 'I communicate clearly when my priorities change',
                context: 'Accountability includes being transparent about what you can and cannot deliver.'
            },
            {
                id: 7,
                category: 'Accountability',
                text: 'I hold myself to the same standards I hold others to',
                context: 'Double standards destroy accountability cultures instantly.'
            },
            {
                id: 8,
                category: 'Accountability',
                text: 'I address performance issues quickly, not letting them fester',
                context: 'Delaying difficult conversations is a form of avoiding accountability.'
            },
            {
                id: 9,
                category: 'Accountability',
                text: 'I own the outcomes of my decisions, including failures',
                context: 'True accountability means not deflecting blame when things go wrong.'
            },
            {
                id: 10,
                category: 'Results Focus',
                text: 'I prioritize team results over personal recognition',
                context: 'Accountability to collective goals requires putting ego aside.'
            },
            {
                id: 11,
                category: 'Results Focus',
                text: 'I track and share progress on goals transparently',
                context: 'You can\'t be accountable to invisible or unclear metrics.'
            },
            {
                id: 12,
                category: 'Results Focus',
                text: 'I adjust my approach when results show I\'m off track',
                context: 'Being accountable means adapting based on reality, not defending your original plan.'
            }
        ];

        let currentQuestion = 0;
        let answers = [];

        function startAssessment() {
            currentQuestion = 0;
            answers = [];
            showQuestion();
            document.getElementById('screen-intro').classList.remove('active');
            document.getElementById('screen-questions').classList.add('active');
        }

        function showQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionText').textContent = q.text;
            document.getElementById('questionContext').textContent = q.context;
            document.getElementById('questionComments').value = answers[currentQuestion]?.comments || '';

            // Create rating scale
            const ratingScale = document.getElementById('ratingScale');
            ratingScale.innerHTML = '';
            
            const ratings = [
                { value: 1, label: 'Rarely' },
                { value: 2, label: 'Sometimes' },
                { value: 3, label: 'Often' },
                { value: 4, label: 'Consistently' },
                { value: 5, label: 'Always' }
            ];

            ratings.forEach(rating => {
                const option = document.createElement('div');
                option.className = 'rating-option';
                if (answers[currentQuestion]?.rating === rating.value) {
                    option.classList.add('selected');
                }
                option.innerHTML = `
                    <span class="number">${rating.value}</span>
                    <span class="label">${rating.label}</span>
                `;
                option.onclick = () => selectRating(rating.value);
                ratingScale.appendChild(option);
            });

            // Update buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = !answers[currentQuestion]?.rating;

            updateProgress();
        }

        function selectRating(value) {
            answers[currentQuestion] = {
                questionId: questions[currentQuestion].id,
                category: questions[currentQuestion].category,
                rating: value,
                comments: document.getElementById('questionComments').value
            };

            // Update UI
            document.querySelectorAll('.rating-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.closest('.rating-option').classList.add('selected');

            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            // Save comments
            if (answers[currentQuestion]) {
                answers[currentQuestion].comments = document.getElementById('questionComments').value;
            }

            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
        }

        function showResults() {
            // Calculate scores
            const totalScore = answers.reduce((sum, ans) => sum + ans.rating, 0);
            const averageScore = (totalScore / answers.length).toFixed(1);

            // Calculate category scores
            const categories = {};
            answers.forEach(ans => {
                if (!categories[ans.category]) {
                    categories[ans.category] = { total: 0, count: 0 };
                }
                categories[ans.category].total += ans.rating;
                categories[ans.category].count += 1;
            });

            // Display overall score
            document.getElementById('overallScore').textContent = averageScore + '/5.0';

            // Display category breakdown
            const categoryBreakdown = document.getElementById('categoryBreakdown');
            categoryBreakdown.innerHTML = '';

            for (const [category, data] of Object.entries(categories)) {
                const avg = (data.total / data.count).toFixed(1);
                const item = document.createElement('div');
                item.className = 'feedback-item';
                item.innerHTML = `
                    <h4>${category}</h4>
                    <p>Average score: <span class="rating-display">${avg}/5.0</span></p>
                    <p style="margin-top: 10px;">${getCategoryInsight(category, avg)}</p>
                `;
                categoryBreakdown.appendChild(item);
            }

            // Generate insights
            const insights = document.getElementById('insights');
            insights.innerHTML = generateInsights(averageScore, categories);

            // Generate focus areas
            const focusAreas = document.getElementById('focusAreas');
            focusAreas.innerHTML = generateFocusAreas(answers, categories);

            // Save to localStorage
            const resultsData = {
                timestamp: new Date().toISOString(),
                averageScore: averageScore,
                categories: categories,
                answers: answers
            };
            localStorage.setItem('360Feedback', JSON.stringify(resultsData));

            // Update Brown Belt progress
            const brownBeltProgress = JSON.parse(localStorage.getItem('brownBeltProgress') || '[]');
            if (!brownBeltProgress.includes('360feedback')) {
                brownBeltProgress.push('360feedback');
                localStorage.setItem('brownBeltProgress', JSON.stringify(brownBeltProgress));
            }

            document.getElementById('screen-questions').classList.remove('active');
            document.getElementById('screen-results').classList.add('active');
        }

        function getCategoryInsight(category, score) {
            const scoreNum = parseFloat(score);
            
            const insights = {
                'Trust & Vulnerability': scoreNum >= 4 ? 'You model vulnerability well, creating space for accountability.' : 'Focus on being more open about mistakes to build psychological safety.',
                'Productive Conflict': scoreNum >= 4 ? 'You\'re comfortable with difficult conversations‚Äîkey for accountability.' : 'Practice addressing issues directly rather than avoiding confrontation.',
                'Commitment': scoreNum >= 4 ? 'You consistently deliver on your promises‚Äîstrong accountability foundation.' : 'Work on following through more reliably on commitments.',
                'Accountability': scoreNum >= 4 ? 'You hold yourself and others to high standards effectively.' : 'Address performance issues faster instead of letting them linger.',
                'Results Focus': scoreNum >= 4 ? 'You keep the team focused on collective outcomes.' : 'Ensure goals are clear and progress is visible to all.'
            };

            return insights[category] || '';
        }

        function generateInsights(avgScore, categories) {
            let html = '';
            const scoreNum = parseFloat(avgScore);

            if (scoreNum >= 4.2) {
                html += `<div class="feedback-item">
                    <h4>‚ú® Strong Self-Accountability</h4>
                    <p>You rate yourself highly across most dimensions. The question is: <strong>Do others see you the same way?</strong> High self-ratings can indicate strong performance OR lack of self-awareness. The next step is getting external feedback.</p>
                </div>`;
            } else if (scoreNum >= 3.5) {
                html += `<div class="feedback-item">
                    <h4>üí™ Solid Foundation</h4>
                    <p>You have good self-awareness and recognize areas for growth. Focus on the lowest-scoring categories to strengthen your accountability practice.</p>
                </div>`;
            } else {
                html += `<div class="feedback-item">
                    <h4>üéØ Growth Opportunity</h4>
                    <p>Your honest self-assessment shows you recognize gaps. This self-awareness is the first step to improvement. Consider working with a coach or mentor to develop these skills.</p>
                </div>`;
            }

            return html;
        }

        function generateFocusAreas(answers, categories) {
            const lowScores = answers.filter(ans => ans.rating <= 2);
            
            let html = '';
            
            if (lowScores.length > 0) {
                html += `<div class="feedback-item">
                    <h4>‚ö†Ô∏è Priority Development Areas (Rated 1-2)</h4>`;
                lowScores.forEach(ans => {
                    const q = questions.find(q => q.id === ans.questionId);
                    html += `<p style="margin: 10px 0; padding-left: 15px; border-left: 3px solid #ef4444;">
                        "${q.text}"<br>
                        <span style="font-size: 0.9em; color: #78350f;">‚Üí Start here for the biggest impact on accountability</span>
                    </p>`;
                });
                html += `</div>`;
            } else {
                html += `<div class="feedback-item">
                    <h4>‚úÖ Continue Building</h4>
                    <p>No critical gaps identified in your self-assessment. Focus on getting feedback from others to validate your self-perception and identify blind spots.</p>
                </div>`;
            }

            return html;
        }

        function exportResults() {
            const results = localStorage.getItem('360Feedback');
            if (!results) return;

            const data = JSON.parse(results);
            let text = '360¬∞ FEEDBACK SELF-ASSESSMENT\n';
            text += '================================\n\n';
            text += `Date: ${new Date(data.timestamp).toLocaleDateString()}\n`;
            text += `Overall Score: ${data.averageScore}/5.0\n\n`;
            
            text += 'CATEGORY SCORES:\n';
            for (const [category, scores] of Object.entries(data.categories)) {
                const avg = (scores.total / scores.count).toFixed(1);
                text += `${category}: ${avg}/5.0\n`;
            }
            
            text += '\n\nDETAILED RESPONSES:\n';
            data.answers.forEach((ans, i) => {
                const q = questions.find(q => q.id === ans.questionId);
                text += `\n${i + 1}. ${q.text}\n`;
                text += `   Rating: ${ans.rating}/5\n`;
                if (ans.comments) {
                    text += `   Comments: ${ans.comments}\n`;
                }
            });

            // Copy to clipboard
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ Results copied to clipboard! Paste into a document to save.');
            }).catch(() => {
                // Fallback
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = '360-feedback-self-assessment.txt';
                a.click();
                alert('‚úÖ Results downloaded as text file!');
            });
        }
    </script>

    <!-- Performance Optimizer - Load First -->
<script src="js/performance-optimizer.min.js"></script>
<!-- TAP-IN Utilities -->
<script src="js/shared-utilities.js"></script>
<script src="js/global-error-handler.min.js"></script>
<script src="js/storage-health.min.js"></script>
    <!-- TAP-IN Core Modules -->
    <script src="js/language-switcher.min.js"></script>
    <script src="js/meta-tags-manager.js"></script>
    <script src="js/achievement-badges.js"></script>
    <script src="js/structured-data.js"></script>

    <script src="js/keyboard-navigation.js" defer></script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(function(registration) {
                        console.log('Service Worker registered:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', function() {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', function() {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New service worker available
                                    console.log('New service worker available');
                                }
                            });
                        });
                    })
                    .catch(function(error) {
                        // Silent fail - not critical
                    });
            });
        }
    </script>
    <script src="js/pwa-install-prompt.js"></script>
</html>

    <!-- Focus Management for Accessibility -->
    <script src="js/focus-management.js" defer></script>

    <!-- Screen Reader Enhancements for Accessibility -->
    <script src="js/screen-reader-enhancements.js" defer></script>

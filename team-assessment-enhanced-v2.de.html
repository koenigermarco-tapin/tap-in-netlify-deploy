<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#2d2d2d">
    <title>Team-Dynamik-Assessment - TAP-IN</title>
    <!-- ...existing styles from English version... -->
    <style>
        /* ...existing styles from English version... */
    </style>
</head>
<body>
    <!-- language switcher (EN / DE) -->
    <div id="lang-switch" style="position:fixed;top:16px;right:16px;z-index:1200;font-family:inherit;">
        <div style="background:white;border-radius:999px;padding:8px 12px;box-shadow:0 6px 20px rgba(0,0,0,0.15);font-size:0.95em;">
            <a href="team-assessment-enhanced-v2.html?lang=en" style="color:#333;text-decoration:none;font-weight:700;margin-right:10px;">EN</a>
            <a href="team-assessment-enhanced-v2.html?lang=de" style="color:#a93226;text-decoration:none;font-weight:700;border-left:1px solid #eee;padding-left:10px;margin-left:10px;">DE</a>
        </div>
    </div>
    <script src="/i18n/i18n.js"></script>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 data-i18n="team_header">ü§ù Team-Dynamik-Assessment</h1>
            <p class="subtitle" data-i18n="team_subtitle">Ein strukturiertes Assessment, um St√§rken, Rollen und Zusammenarbeit im Team sichtbar zu machen. Dauer: ca. 7 Minuten.</p>
            <div class="note">
                <strong>‚è±Ô∏è 7 Minuten</strong> ‚Ä¢ 20 Fragen zu 5 Schl√ºsselbereichen: Vertrauen, Konflikt, Commitment, Verantwortlichkeit, Ergebnisse
            </div>
        </div>
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Frage 1 von 20</div>
        </div>
        <!-- Assessment Form -->
        <div id="assessmentForm">
            <div class="assessment-card" id="questionCard">
                <!-- Questions will be dynamically inserted here -->
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" style="display: none;">‚Üê Zur√ºck</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled data-i18n="next_btn">Weiter ‚Üí</button>
            </div>
        </div>
        <!-- Results Section -->
        <div id="results" class="results">
            <div class="assessment-card">
                <div id="resultContent"></div>
                <!-- CTA -->
                <div class="cta-box">
                    <h3>Bereit, dein Team zu transformieren?</h3>
                    <p>Buche eine kostenlose 30-min√ºtige Team-Dynamik-Strategie-Session, um deine Ergebnisse zu besprechen und einen 90-Tage-Aktionsplan zu erstellen.</p>
                    <a href="/cdn-cgi/l/email-protection#b9dad6d7cdd8dacdf9cdd8c994d0d794d8dad8dddcd4c097dad6d486caccdbd3dcdacd84eddcd8d499f8cacadccacad4dcd7cd99eacdcbd8cddcdec099eadccacad0d6d7" class="btn" style="background: white; color: #a93226;">üìÖ Strategie-Sitzung buchen</a>
                    <div style="margin-top: 20px;">
                        <a href="index.html" class="btn" style="background: transparent; border: 2px solid white; color: white;">‚Üê Zur√ºck zu Assessments</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Use i18n for all questions and scale labels
        function getQuestionsFromI18n(){
            try{
                const t = window.__i18n && window.__i18n.t ? window.__i18n.t.bind(window.__i18n) : null;
                if(!t) return [];
                const out = [];
                for(let i=1;i<=20;i++){
                    const key = `team.q${i}`;
                    const txt = t(key);
                    out.push({ question: txt || `Frage ${i}` });
                }
                return out;
            }catch(e){ return []; }
        }
        let questions = getQuestionsFromI18n();
        let currentQuestion = 0;
        let answers = {};
        function renderQuestion() {
            const q = questions[currentQuestion];
            const card = document.getElementById('questionCard');
            let html = '';
            html += `
                <div class="question">
                    <div class="question-text">
                        <span class="question-number">${currentQuestion + 1}.</span>
                        ${q.question}
                    </div>
                    <div class="scale-options">
            `;
            const t = window.__i18n && window.__i18n.t ? window.__i18n.t.bind(window.__i18n) : null;
            const labels = t && t('scale') ? [t('scale.never'), t('scale.rarely'), t('scale.sometimes'), t('scale.often'), t('scale.always')] : ['Nie', 'Selten', 'Manchmal', 'Oft', 'Immer'];
            for (let i = 1; i <= 5; i++) {
                const selected = answers[currentQuestion] === i ? 'selected' : '';
                html += `
                    <label class="scale-option ${selected}" onclick="selectOption(event, ${i})">
                        <input type="radio" name="q${currentQuestion}" value="${i}">
                        <div class="scale-value">${i}</div>
                        <div class="scale-label">${labels[i-1]}</div>
                    </label>
                `;
            }
            html += `
                    </div>
                </div>
            `;
            card.innerHTML = html;
            updateProgress();
            updateButtons();
        }
        function selectOption(e, value) {
            answers[currentQuestion] = value;
            document.querySelectorAll('.scale-option').forEach(opt => opt.classList.remove('selected'));
            try{ e.currentTarget.classList.add('selected'); }catch(err){}
            document.getElementById('nextBtn').disabled = false;
        }
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            const t = window.__i18n && window.__i18n.t ? window.__i18n.t.bind(window.__i18n) : null;
            const qLabel = (t && t('question_label')) || 'Frage';
            document.getElementById('progressText').textContent = `${qLabel} ${currentQuestion + 1} von ${questions.length}`;
        }
        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const t = window.__i18n && window.__i18n.t ? window.__i18n.t.bind(window.__i18n) : null;
            prevBtn.style.display = currentQuestion > 0 ? 'block' : 'none';
            nextBtn.textContent = currentQuestion === questions.length - 1 ? (t && t('see_results') || 'Ergebnisse anzeigen ‚Üí') : (t && t('next_btn') || 'Weiter ‚Üí');
            nextBtn.disabled = !answers.hasOwnProperty(currentQuestion);
        }
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
                window.scrollTo(0, 0);
            } else {
                showResults();
            }
        }
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
                window.scrollTo(0, 0);
            }
        }
        function showResults() {
            // ...existing scoring and results logic from English version...
            document.getElementById('assessmentForm').classList.add('hidden');
            document.getElementById('results').classList.add('active');
            // ...existing results rendering logic...
        }
        renderQuestion();
    </script>
</body>
</html>
function markStripeComplete(e,t){const o=`${e}BeltStripe${t}Complete`,l=`${o}_XP_Awarded`;if(localStorage.setItem(o,"true"),!localStorage.getItem(l)){const o=new window.TapInGamification.XPSystem,n=new window.TapInGamification.AchievementSystem;o.awardXP(window.TapInGamification.XP_REWARDS.completeStripe,`Completed ${e}belt stripe ${t}`,"training"),localStorage.setItem(l,"true");1===countTotalStripes()&&n.unlockAchievement("first-stripe"),checkBeltCompletion(e)}}function countTotalStripes(){let e=0;return["white","blue","purple","brown","black"].forEach(t=>{for(let o=1;o<=4;o++){const l=`${t}BeltStripe${o}Complete`;"true"===localStorage.getItem(l)&&e++}}),e}function checkBeltCompletion(e){if([1,2,3,4].every(t=>"true"===localStorage.getItem(`${e}BeltStripe${t}Complete`))){const t=`${e}Belt_Complete_XP_Awarded`;if(!localStorage.getItem(t)){const o=new window.TapInGamification.XPSystem,l=new window.TapInGamification.AchievementSystem;o.awardXP(window.TapInGamification.XP_REWARDS.completeBelt,`ðŸ¥‹ Completed ${e}belt!`,"training"),localStorage.setItem(t,"true");const n=countCompletedBelts();1===n&&l.unlockAchievement("first-belt-complete"),"white"===e&&l.unlockAchievement("vulnerability-first"),5===n&&l.unlockAchievement("all-belts")}}}function countCompletedBelts(){let e=0;return["white","blue","purple","brown","black"].forEach(t=>{[1,2,3,4].every(e=>"true"===localStorage.getItem(`${t}BeltStripe${e}Complete`))&&e++}),e}window.tapinStripeHelper={markStripeComplete:markStripeComplete,countTotalStripes:countTotalStripes,checkBeltCompletion:checkBeltCompletion,countCompletedBelts:countCompletedBelts},document.addEventListener("DOMContentLoaded",function(){const e=window.location.pathname.match(/(white|blue|purple|brown|black)-belt-stripe(\d+)/);if(e){const[t,o,l]=e,n=`${o}BeltStripe${l}Complete`;"true"===localStorage.getItem(n)&&markStripeComplete(o,parseInt(l))}});
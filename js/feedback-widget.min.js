!function(){"use strict";const e={init:function(){this.createWidget(),this.attachEvents()},createWidget:function(){const e=document.createElement("div");e.id="feedback-widget",e.innerHTML='\n        <button class="feedback-trigger" aria-label="Send feedback">\n          ğŸ’¬ Feedback\n        </button>\n        \n        <div class="feedback-panel" id="feedbackPanel" hidden role="dialog" aria-labelledby="feedback-title" aria-modal="true">\n          <div class="feedback-header">\n            <h3 id="feedback-title">Send Feedback</h3>\n            <button class="close-feedback" onclick="FeedbackWidget.close()" aria-label="Close feedback">Ã—</button>\n          </div>\n          \n          <form id="feedbackForm">\n            <div class="feedback-type">\n              <label for="feedback-type-select">Type of feedback:</label>\n              <select name="type" id="feedback-type-select" required aria-required="true">\n                <option value="">Select...</option>\n                <option value="bug">ğŸ› Bug Report</option>\n                <option value="feature">ğŸ’¡ Feature Request</option>\n                <option value="praise">â¤ï¸ Praise</option>\n                <option value="question">â“ Question</option>\n                <option value="other">ğŸ“ Other</option>\n              </select>\n            </div>\n            \n            <div class="feedback-message">\n              <label for="feedback-text">Your feedback:</label>\n              <textarea \n                id="feedback-text"\n                name="message" \n                required \n                rows="4" \n                placeholder="Tell us what you think..."\n                aria-required="true"\n              ></textarea>\n            </div>\n            \n            <div class="feedback-contact">\n              <label for="feedback-email">Email (optional):</label>\n              <input \n                type="email" \n                id="feedback-email"\n                name="email" \n                placeholder="your@email.com"\n                aria-label="Email address for feedback response"\n              >\n            </div>\n            \n            <div class="feedback-actions">\n              <button type="submit" class="btn-submit">Send Feedback</button>\n              <button type="button" class="btn-cancel" onclick="FeedbackWidget.close()">Cancel</button>\n            </div>\n          </form>\n          \n          <div class="feedback-success" id="feedbackSuccess" hidden>\n            <p>âœ… Thank you for your feedback!</p>\n            <button class="btn-close" onclick="FeedbackWidget.close()">Close</button>\n          </div>\n        </div>\n      ',document.body.appendChild(e),this.addStyles()},addStyles:function(){if(document.getElementById("feedback-widget-styles"))return;const e=document.createElement("style");e.id="feedback-widget-styles",e.textContent="\n        #feedback-widget {\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          z-index: 1000;\n        }\n        .feedback-trigger {\n          background: linear-gradient(135deg, #4a7c9c 0%, #5a8cac 100%);\n          color: white;\n          border: none;\n          padding: 12px 20px;\n          border-radius: 24px;\n          font-weight: 600;\n          cursor: pointer;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n          transition: all 0.3s;\n          font-size: 14px;\n        }\n        .feedback-trigger:hover,\n        .feedback-trigger:focus {\n          transform: translateY(-2px);\n          box-shadow: 0 6px 16px rgba(0,0,0,0.2);\n          outline: 3px solid #4a7c9c;\n          outline-offset: 2px;\n        }\n        .feedback-panel {\n          position: absolute;\n          bottom: 60px;\n          right: 0;\n          background: white;\n          border-radius: 16px;\n          box-shadow: 0 8px 32px rgba(0,0,0,0.15);\n          width: 350px;\n          max-width: calc(100vw - 40px);\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .feedback-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 20px 20px 16px;\n          border-bottom: 1px solid #e5e7eb;\n        }\n        .feedback-header h3 {\n          margin: 0;\n          color: #1a365d;\n          font-size: 20px;\n        }\n        .close-feedback {\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n          padding: 0;\n          color: #64748b;\n          line-height: 1;\n          width: 32px;\n          height: 32px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 4px;\n          transition: background 0.2s;\n        }\n        .close-feedback:hover,\n        .close-feedback:focus {\n          background: rgba(100, 116, 139, 0.1);\n          color: #1a365d;\n          outline: 2px solid #4a7c9c;\n          outline-offset: 2px;\n        }\n        #feedbackForm {\n          padding: 20px;\n        }\n        .feedback-type,\n        .feedback-message,\n        .feedback-contact {\n          margin-bottom: 16px;\n        }\n        .feedback-type label,\n        .feedback-message label,\n        .feedback-contact label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 600;\n          color: #1a365d;\n        }\n        .feedback-type select,\n        .feedback-message textarea,\n        .feedback-contact input {\n          width: 100%;\n          padding: 10px 12px;\n          border: 1px solid #d1d5db;\n          border-radius: 8px;\n          font-family: inherit;\n          font-size: 14px;\n          transition: border-color 0.2s;\n        }\n        .feedback-type select:focus,\n        .feedback-message textarea:focus,\n        .feedback-contact input:focus {\n          outline: 3px solid #4a7c9c;\n          outline-offset: 2px;\n          border-color: #4a7c9c;\n        }\n        .feedback-message textarea {\n          resize: vertical;\n          min-height: 80px;\n        }\n        .feedback-actions {\n          display: flex;\n          gap: 8px;\n        }\n        .btn-submit,\n        .btn-cancel {\n          flex: 1;\n          padding: 10px;\n          border: none;\n          border-radius: 8px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.3s;\n          font-size: 14px;\n        }\n        .btn-submit {\n          background: #4a7c9c;\n          color: white;\n        }\n        .btn-submit:hover,\n        .btn-submit:focus {\n          background: #5a8cac;\n          outline: 3px solid #4a7c9c;\n          outline-offset: 2px;\n        }\n        .btn-cancel {\n          background: #f1f5f9;\n          color: #64748b;\n        }\n        .btn-cancel:hover,\n        .btn-cancel:focus {\n          background: #e5e7eb;\n          outline: 2px solid #64748b;\n          outline-offset: 2px;\n        }\n        .feedback-success {\n          padding: 40px 20px;\n          text-align: center;\n        }\n        .feedback-success p {\n          font-size: 18px;\n          margin-bottom: 20px;\n          color: #1a365d;\n        }\n        .btn-close {\n          background: #4a7c9c;\n          color: white;\n          border: none;\n          padding: 10px 24px;\n          border-radius: 8px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: background 0.3s;\n        }\n        .btn-close:hover,\n        .btn-close:focus {\n          background: #5a8cac;\n          outline: 3px solid #4a7c9c;\n          outline-offset: 2px;\n        }\n        @media (max-width: 768px) {\n          #feedback-widget {\n            bottom: 10px;\n            right: 10px;\n          }\n          .feedback-trigger {\n            padding: 10px 16px;\n            font-size: 12px;\n          }\n          .feedback-panel {\n            width: calc(100vw - 20px);\n            bottom: 50px;\n            right: 0;\n          }\n        }\n      ",document.head.appendChild(e)},attachEvents:function(){document.querySelector(".feedback-trigger").addEventListener("click",()=>{this.open()}),document.getElementById("feedbackForm").addEventListener("submit",e=>{e.preventDefault(),this.submitFeedback(new FormData(e.target))}),document.addEventListener("keydown",e=>{"Escape"!==e.key||document.getElementById("feedbackPanel").hasAttribute("hidden")||this.close()})},open:function(){document.getElementById("feedbackPanel").removeAttribute("hidden"),document.getElementById("feedback-text").focus(),window.Analytics&&window.Analytics.track("feedback_opened")},close:function(){document.getElementById("feedbackPanel").setAttribute("hidden","true"),this.resetForm()},submitFeedback:function(e){const n={type:e.get("type"),message:e.get("message"),email:e.get("email"),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),belt:localStorage.getItem("currentBelt"),xp:localStorage.getItem("totalXP")};window.Analytics&&window.Analytics.track("feedback_submitted",{type:n.type,page:n.page}),this.storeFeedbackLocally(n),this.showSuccess()},storeFeedbackLocally:function(e){try{const n=JSON.parse(localStorage.getItem("pending_feedback")||"[]");n.push(e);const t=n.slice(-50);localStorage.setItem("pending_feedback",JSON.stringify(t))}catch(e){console.warn("Could not store feedback locally:",e)}},showSuccess:function(){document.getElementById("feedbackForm").hidden=!0,document.getElementById("feedbackSuccess").removeAttribute("hidden"),setTimeout(()=>{this.close()},3e3)},resetForm:function(){document.getElementById("feedbackForm").reset(),document.getElementById("feedbackForm").hidden=!1,document.getElementById("feedbackSuccess").setAttribute("hidden","true")}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.init()):e.init(),window.FeedbackWidget=e}();
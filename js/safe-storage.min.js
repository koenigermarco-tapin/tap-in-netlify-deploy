!function(){"use strict";if(window.SafeStorage)return;const e={getItem:function(e){try{return localStorage.getItem(e)}catch(e){return console.debug("[Storage] getItem failed:",e.message||e),null}},setItem:function(e,t){try{return localStorage.setItem(e,t),!0}catch(r){if("QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name){console.warn("[Storage] Quota exceeded, attempting cleanup..."),this.cleanup();try{return localStorage.setItem(e,t),!0}catch(e){return console.error("[Storage] Still failed after cleanup:",e.message||e),!1}}return console.debug("[Storage] setItem failed:",r.message||r),!1}},removeItem:function(e){try{return localStorage.removeItem(e),!0}catch(e){return console.debug("[Storage] removeItem failed:",e.message||e),!1}},cleanup:function(){try{const e=JSON.parse(localStorage.getItem("tapin_errors")||"[]");e.length>10&&localStorage.setItem("tapin_errors",JSON.stringify(e.slice(-10)))}catch(e){}}};window.SafeStorage=e,console.log("âœ… SafeStorage utility loaded")}();
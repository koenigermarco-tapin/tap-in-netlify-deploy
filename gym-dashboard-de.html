<!DOCTYPE html>
<html lang="de">
<head>
    <script src="js/error-suppressor.js" defer></script>
    <!-- Global Error Suppression - Must be FIRST -->
    <script>
    (function() {
        'use strict';
        
        // Suppress ALL error notifications immediately
        const originalError = window.console.error;
        const originalWarn = window.console.warn;
        
        window.console.error = function() {
            // Only log in development
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                originalError.apply(console, arguments);
            }
        };
        
        window.console.warn = function() {
            // Only log in development
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                originalWarn.apply(console, arguments);
            }
        };
        
        // Prevent all error popups
        window.addEventListener('error', function(e) {
            e.preventDefault();
            return false;
        }, true);
        
        window.addEventListener('unhandledrejection', function(e) {
            e.preventDefault();
            return false;
        });
    })();
    </script>
    
<!-- OPTIMIZED FONT LOADING -->
<!-- Replace existing Google Fonts link in <head> with this -->

<!-- Preconnect zum Google Fonts (improves performance) -->



<!-- Load fonts with font-display: swap (prevents blocking) -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" media="print" onload="this.media='all'">

<!-- Fallback for no JavaScript -->
<noscript>
    
</noscript>

<!-- System font fallback CSS -->
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Performance: Resource Hints -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <!-- Performance: Resource Hints -->
    
    
    
    
    

    <!-- Performance: Resource Hints -->
    
    
    
    
    

    <!-- CACHE BUSTER - Load FIRST, before anything else -->
    <script src="cache-buster.js" async></script>
    <!-- Error Suppressor (Load SECOND) -->
    
    <!-- XP Manager (Load THIRD) -->
    <script src="js/xp-manager.js" defer></script>
    <!-- Icon Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <link rel="stylesheet" href="css/icons.css">
    <link rel="stylesheet" href="css/hero-icons.css">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>THE GYM | TAP-IN Personal Development</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-navy: #1a365d;
            --navy-light: #2d4a7c;
            --navy-dark: #0f2744;
            --accent-red: #b91c1c;
            --accent-gold: #f6e05e;
            --success-green: #38a169;
            --warning-orange: #dd6b20;
            --bg-dark: #0a0a0a;
            --bg-card: #141414;
            --bg-card-hover: #1a1a1a;
            --border-subtle: #2d2d2d;
            --text-white: #ffffff;
            --text-muted: #a0aec0;
            --text-dim: #718096;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Top Navigation */
        .top-nav {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-subtle);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-white);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo span {
            color: var(--accent-gold);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .streak-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .xp-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--border-subtle);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-navy) 0%, var(--navy-light) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Welcome Section */
        .welcome-section {
            margin-bottom: 2rem;
        }

        .welcome-greeting {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .welcome-date {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        /* Grid Layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 2rem;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* Card Base */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .card:hover {
            border-color: #3d3d3d;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-white);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-action {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .card-action:hover {
            color: var(--text-white);
        }

        /* Belt Progress Card */
        .belt-progress-card {
            background: linear-gradient(135deg, var(--primary-navy) 0%, var(--navy-dark) 100%);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .belt-progress-card::before {
            content: 'Academic Cap';
            position: absolute;
            right: -20px;
            bottom: -20px;
            font-size: 120px;
            opacity: 0.1;
        }

        .belt-current {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .belt-icon-large {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .belt-info h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .belt-info p {
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
        }

        .belt-progress-bar {
            background: rgba(255,255,255,0.1);
            height: 12px;
            border-radius: 6px;
            margin-bottom: 0.75rem;
            overflow: hidden;
        }

        .belt-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-gold) 0%, #ecc94b 100%);
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .belt-progress-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: rgba(255,255,255,0.7);
        }

        .belt-path {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .belt-step {
            text-align: center;
            flex: 1;
        }

        .belt-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .belt-dot.active {
            background: var(--accent-gold);
            color: var(--bg-dark);
        }

        .belt-dot.completed {
            background: var(--success-green);
        }

        .belt-step-label {
            font-size: 0.7rem;
            color: rgba(255,255,255,0.5);
        }

        .belt-step-label.active {
            color: var(--accent-gold);
            font-weight: 600;
        }

        /* Daily Practice Card */
        .daily-practice-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid #2d3748;
        }

        .practice-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .practice-item:hover {
            background: rgba(255,255,255,0.06);
        }

        .practice-item:last-child {
            margin-bottom: 0;
        }

        .practice-icon {
            width: 48px;
            height: 48px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .practice-icon.completed {
            background: var(--success-green);
        }

        .practice-info {
            flex: 1;
        }

        .practice-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
        }

        .practice-meta {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .practice-action {
            padding: 0.5rem 1rem;
            background: var(--primary-navy);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .practice-action:hover {
            background: var(--navy-light);
        }

        .practice-action.done {
            background: var(--success-green);
        }

        /* Training Module */
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .module-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .module-card:hover {
            border-color: var(--primary-navy);
            transform: translateY(-2px);
        }

        .module-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .module-card.locked:hover {
            transform: none;
            border-color: var(--border-subtle);
        }

        .module-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .module-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
        }

        .module-progress {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        .module-bar {
            height: 4px;
            background: var(--border-subtle);
            border-radius: 2px;
            overflow: hidden;
        }

        .module-bar-fill {
            height: 100%;
            background: var(--success-green);
            border-radius: 2px;
        }

        .module-lock {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1rem;
        }

        /* Offene Matte Section */
        .open-mat-section {
            margin-top: 1rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-subtitle {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .open-mat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .open-mat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .open-mat-card:hover {
            border-color: var(--primary-navy);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .open-mat-card.featured {
            border-color: var(--accent-gold);
        }

        .open-mat-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .open-mat-badge.new {
            background: var(--accent-red);
        }

        .open-mat-badge.popular {
            background: var(--accent-gold);
            color: var(--bg-dark);
        }

        .open-mat-badge.quick {
            background: var(--success-green);
        }

        .open-mat-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .open-mat-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .open-mat-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .open-mat-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .open-mat-meta span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Team Assessments Section */
        .team-assessments-card {
            background: linear-gradient(135deg, var(--primary-navy) 0%, #2d4a7c 100%);
            border: 2px solid var(--navy-light);
            margin-top: 1.5rem;
        }

        .team-assessments-card .card-header {
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }

        .team-assessments-card .card-title {
            font-size: 1.25rem;
            color: white;
        }

        .team-assessments-card .card-subtitle {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .team-assessment-card {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .team-assessment-card:hover {
            background: rgba(255,255,255,0.15);
            border-color: var(--accent-gold);
            transform: translateY(-2px);
        }

        .team-assessment-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .team-assessment-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: white;
        }

        .team-assessment-desc {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.8);
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .team-assessment-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .team-btn {
            flex: 1;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            text-align: center;
        }

        .team-btn-primary {
            background: var(--accent-red);
            color: white;
        }

        .team-btn-primary:hover {
            background: #991b1b;
        }

        .team-btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .team-btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .team-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.6);
            margin-top: 0.5rem;
        }

        /* Toolbox Section */
        .toolbox-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-top: 2rem;
        }

        .tool-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tool-card:hover {
            border-color: var(--primary-navy);
            background: var(--bg-card-hover);
        }

        .tool-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .tool-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .tool-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Sidebar Cards */
        .quote-card {
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
            border-left: 4px solid var(--accent-red);
        }

        .quote-text {
            font-style: italic;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .quote-author {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .refresh-quote {
            display: block;
            margin-top: 1rem;
            padding: 0.5rem;
            background: rgba(255,255,255,0.05);
            border: none;
            border-radius: 6px;
            color: var(--text-muted);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .refresh-quote:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-white);
        }

        /* Recent Activity */
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
        }

        .activity-icon {
            width: 36px;
            height: 36px;
            background: var(--border-subtle);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .activity-info {
            flex: 1;
        }

        .activity-title {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .activity-time {
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .activity-xp {
            font-size: 0.8rem;
            color: var(--accent-gold);
            font-weight: 600;
        }

        /* Assessments Card */
        .assessment-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .assessment-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem;
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .assessment-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .assessment-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .assessment-icon {
            font-size: 1.25rem;
        }

        .assessment-name {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .assessment-status {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .assessment-status.completed {
            background: rgba(56, 161, 105, 0.2);
            color: var(--success-green);
        }

        .assessment-status.available {
            background: rgba(26, 54, 93, 0.3);
            color: var(--text-muted);
        }

        /* Weekly Challenge */
        .challenge-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1f1f 100%);
            border: 1px solid #4a3030;
        }

        .challenge-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .challenge-badge {
            background: var(--accent-red);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .challenge-timer {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .challenge-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .challenge-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .challenge-progress {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .challenge-bar {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .challenge-bar-fill {
            height: 100%;
            background: var(--accent-red);
            border-radius: 4px;
        }

        .challenge-count {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Library Section */
        .library-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .library-tab {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            color: var(--text-muted);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .library-tab:hover {
            border-color: var(--primary-navy);
        }

        .library-tab.active {
            background: var(--primary-navy);
            border-color: var(--primary-navy);
            color: white;
        }

        .library-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .library-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .library-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .library-thumb {
            width: 60px;
            height: 60px;
            background: var(--border-subtle);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .library-info h4 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .library-info p {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .library-info .duration {
            font-size: 0.7rem;
            color: var(--text-dim);
            margin-top: 0.25rem;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .open-mat-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .team-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .toolbox-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }

            .top-nav {
                padding: 1rem;
            }

            .nav-right {
                gap: 0.75rem;
            }

            .streak-badge, .xp-badge {
                padding: 0.4rem 0.75rem;
                font-size: 0.8rem;
            }

            .modules-grid,
            .open-mat-grid,
            .library-grid,
            .team-grid {
                grid-template-columns: 1fr;
            }

            .toolbox-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .sidebar {
                grid-template-columns: 1fr;
            }

            .belt-path {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .belt-step {
                flex: 0 0 18%;
            }
        }
    </style>
    
    <!-- Gamification System -->
    <!-- Performance Optimizer - Load First -->
<script src="js/performance-optimizer.min.js"></script>

    <!-- Avatar System - Disabled until design is improved -->
    <!-- <link rel="stylesheet" href="avatar-styles.css"> -->
    <!-- <script src="js/avatar-system.min.js" defer></script> -->

    <script src="js/gamification.js" defer></script>
    <script src="js/gym-dashboard-init.js" defer></script>

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#4a7c9c">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Tap-In">
<link rel="apple-touch-icon" href="/icons/icon-192.png">

</head>
<body>
<!-- LOADING SCREEN COMPONENT -->
<!-- Add this at the START of <body> tag -->

<style>
    /* Loading Screen - Critical CSS */
    #loadingScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #1a1d2e;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 99999;
        transition: opacity 0.3s ease;
    }
    
    #loadingScreen.hidden {
        opacity: 0;
        pointer-events: none;
    }
    
    .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid #3d4466;
        border-top-color: #6366f1;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
        zum { transform: rotate(360deg); }
    }
    
    .loading-text {
        margin-top: 20px;
        color: #94a3b8;
        font-size: 16px;
        font-weight: 500;
    }
    
    .loading-logo {
        font-size: 32px;
        font-weight: 800;
        color: #ffffff;
        margin-bottom: 30px;
        letter-spacing: -0.5px;
    }
</style>

<div id="loadingScreen">
    <div class="loading-logo">TAP-IN</div>
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading...</div>
</div>

<script>
// Hide loading screen when page is ready
(function() {
    function hideLoading() {
        const loader = document.getElementById('loadingScreen');
        if (loader) {
            loader.classList.add('hidden');
            setTimeout(() => {
                loader.style.display = 'none';
            }, 300);
        }
    }
    
    // Hide on window load
    document.addEventListener('DOMContentLoaded', hideLoading);
    
    // Fallback timeout (5 seconds max)
    setTimeout(hideLoading, 3000);
    
    // Emergency fallback (DOMContentLoaded)
    if (document.readyState === 'complete' || document.readyState === 'interactive') {
        setTimeout(hideLoading, 100);
    } else {
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(hideLoading, 500);
        });
    }
})();
</script>



    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="logo">
            <i class="fas fa-fist-raised icon-md icon-primary"></i> TAP-IN <span>GYM</span>
        </div>
        <div class="nav-center" style="display: flex; gap: 1rem; align-items: center;">
            <a href="gym-dashboard-de.html" style="color: white; background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; font-weight: 600;"><i class="fas fa-fist-raised icon-md icon-primary"></i> Das Gym</a>
            <a href="learning-hub-de.html" style="color: rgba(255,255,255,0.7); padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)';this.style.color='white';" onmouseout="this.style.background='transparent';this.style.color='rgba(255,255,255,0.7)';"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-briefcase"></use></svg> Der Hub</a>
        </div>
        <div class="nav-right">
            <a href="shop-de.html" style="color: rgba(255,255,255,0.7); text-decoration: none; padding: 0.5rem 1rem; border-radius: 6px; transition: all 0.2s; font-weight: 600;" onmouseover="this.style.background='rgba(255,255,255,0.1)';this.style.color='white';" onmouseout="this.style.background='transparent';this.style.color='rgba(255,255,255,0.7)';">üõí Shop</a>
            <a href="achievements.de.html" style="color: rgba(255,255,255,0.7); text-decoration: none; padding: 0.5rem 1rem; border-radius: 6px; transition: all 0.2s; font-weight: 600;" onmouseover="this.style.background='rgba(255,255,255,0.1)';this.style.color='white';" onmouseout="this.style.background='transparent';this.style.color='rgba(255,255,255,0.7)';">üèÖ Erfolge anzeigen</a>
            <div class="streak-badge">
                <i class="fas fa-fire icon-md icon-danger"></i> 12-Tage-Serie
            </div>
            <div class="xp-badge">
                <i class="fas fa-star icon-md icon-warning"></i> 847 XP
            </div>
            <!-- Avatar removed - will be re-added when design is improved -->
            <!-- <div class="user-avatar avatar-container small" style="cursor: pointer; width: 40px; height: 40px;" title="Klicke zum Anpassen">
                Generated by AvatarSystem
            </div> -->
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Avatar removed - will be re-added when design is improved -->
        <!-- <div id="dashboardAvatar" class="avatar-container medium" style="margin-bottom: 2rem; cursor: pointer; max-width: 200px; margin-left: auto; margin-right: auto;" title="Klicke, um dein Avatar anzupassen">
            Generated by AvatarSystem
        </div> -->
        
        <!-- Avatar Customizer Container -->
        <div id="avatarCustomizerContainer"></div>
        
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h1 class="welcome-greeting">Willkommen zur√ºck, Marco üëã</h1>
            <p class="welcome-date">Monday, November 25, 2024 ‚Ä¢ Wei√ügurt Training</p>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Belt Progress Card -->
                <div class="card belt-progress-card">
                    <div class="belt-current">
                        <div class="belt-icon-large">ü§ç</div>
                        <div class="belt-info">
                            <h2>Wei√ügurt</h2>
                            <p>Grundlage des Selbstbewusstseins</p>
                        </div>
                    </div>
                    <div class="belt-progress-bar">
                        <div class="belt-progress-fill" style="width: 45%"></div>
                    </div>
                    <div class="belt-progress-stats">
                        <span>45% Abgeschlossen</span>
                        <span>520 / 1000 XP zum Blaugurt</span>
                    </div>
                    <div class="belt-path">
                        <div class="belt-step">
                            <div class="belt-dot completed">‚úì</div>
                            <div class="belt-step-label">Assessment</div>
                        </div>
                        <div class="belt-step">
                            <div class="belt-dot completed">‚úì</div>
                            <div class="belt-step-label">Selbstbewusstsein</div>
                        </div>
                        <div class="belt-step">
                            <div class="belt-dot active">3</div>
                            <div class="belt-step-label active">Vertrauen</div>
                        </div>
                        <div class="belt-step">
                            <div class="belt-dot">4</div>
                            <div class="belt-step-label">Tagebuch</div>
                        </div>
                        <div class="belt-step">
                            <div class="belt-dot">5</div>
                            <div class="belt-step-label">Finale</div>
                        </div>
                    </div>
                </div>

                <!-- Daily Practice -->
                <div class="card daily-practice-card">
                    <div class="card-header">
                        <div class="card-title"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-star"></use></svg> Heutige Praxis</div>
                        <span style="color: var(--text-muted); font-size: 0.85rem;">2 von 3 abgeschlossen</span>
                    </div>
                    <div class="practice-item">
                        <div class="practice-icon completed">‚úì</div>
                        <div class="practice-info">
                            <div class="practice-title">Morgenintention</div>
                            <div class="practice-meta">Setze deinen Fokus f√ºr den Tag ‚Ä¢ 2 min</div>
                        </div>
                        <button class="practice-action done">Fertig</button>
                    </div>
                    <div class="practice-item">
                        <div class="practice-icon completed">‚úì</div>
                        <div class="practice-info">
                            <div class="practice-title">Vertrauens-Modul: Lektion 3</div>
                            <div class="practice-meta">Selbstvertrauen aufbauen ‚Ä¢ 8 min</div>
                        </div>
                        <button class="practice-action done">Fertig</button>
                    </div>
                    <div class="practice-item" onclick="window.location.href='evening-reflection-de.html'" style="cursor: pointer;">
                        <div class="practice-icon">üåô</div>
                        <div class="practice-info">
                            <div class="practice-title">Abendreflexion</div>
                            <div class="practice-meta">Verarbeite deinen Tag ‚Ä¢ 3 min</div>
                        </div>
                        <button class="practice-action">Starten</button>
                    </div>
                </div>

                <!-- Training Module -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-book-open"></use></svg> Wei√ügurt Module</div>
                        <a href="white-belt-de.html" class="card-action">Alle ansehen ‚Üí</a>
                    </div>
                    <div class="modules-grid">
                        <div class="module-card" data-target="white-belt-stripe1-gamified-de.html">
                            <div class="module-icon"><i class="fas fa-brain icon-md icon-info"></i></div>
                            <div class="module-title">Selbstbewusstsein</div>
                            <div class="module-progress">5/5 Lektionen abgeschlossen</div>
                            <div class="module-bar">
                                <div class="module-bar-fill" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="module-card" data-target="challenge-vulnerability-de.html">
                            <div class="module-icon"><i class="fas fa-dumbbell icon-md icon-primary"></i></div>
                            <div class="module-title">Verletzlichkeit als St√§rke</div>
                            <div class="module-progress">4/5 Lektionen abgeschlossen</div>
                            <div class="module-bar">
                                <div class="module-bar-fill" style="width: 80%"></div>
                            </div>
                        </div>
                        <div class="module-card" data-target="white-belt-stripe3-gamified-de.html">
                            <div class="module-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-lock-open"></use></svg></div>
                            <div class="module-title">Selbstvertrauen aufbauen</div>
                            <div class="module-progress">3/7 Lektionen abgeschlossen</div>
                            <div class="module-bar">
                                <div class="module-bar-fill" style="width: 43%"></div>
                            </div>
                        </div>
                        <div class="module-card" data-target="white-belt-stripe4-gamified-de.html">
                            <div class="module-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-document-text"></use></svg></div>
                            <div class="module-title">Tagebuch-Praxis</div>
                            <div class="module-progress">0/5 Lektionen abgeschlossen</div>
                            <div class="module-bar">
                                <div class="module-bar-fill" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="module-card locked">
                            <div class="module-icon"><i class="fas fa-bullseye icon-md icon-primary"></i></div>
                            <div class="module-title">Innerer Kritiker vs Coach</div>
                            <div class="module-progress">Gesperrt</div>
                            <div class="module-bar"></div>
                            <span class="module-lock"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-lock-closed"></use></svg></span>
                        </div>
                        <div class="module-card locked">
                            <div class="module-icon"><i class="fas fa-trophy icon-md icon-warning"></i></div>
                            <div class="module-title">Wei√ügurt Finale</div>
                            <div class="module-progress">Gesperrt</div>
                            <div class="module-bar"></div>
                            <span class="module-lock"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-lock-closed"></use></svg></span>
                        </div>
                    </div>
                </div>

                <!-- Offene Matte Section -->
                <div class="open-mat-section">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title"><i class="fas fa-fist-raised icon-md icon-primary"></i> Offene Matte</h2>
                            <p class="section-subtitle">Zus√§tzliches Training, Tiefgang und Entdeckung</p>
                        </div>
                        <a href="white-belt-de.html" class="card-action">Alle durchsuchen ‚Üí</a>
                    </div>
                    <div class="open-mat-grid">
                        <div class="open-mat-card featured">
                            <span class="open-mat-badge new">New</span>
                            <div class="open-mat-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-bolt"></use></svg></div>
                            <div class="open-mat-title">Das innere Spiel der F√ºhrung</div>
                            <div class="open-mat-desc">Warum dein Selbstgespr√§ch deine Grenze bestimmt. Basierend auf Timothy Gallweys Forschung.</div>
                            <div class="open-mat-meta">
                                <span>üìñ Article</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 8 min</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> +25 XP</span>
                            </div>
                        </div>
                        <div class="open-mat-card">
                            <span class="open-mat-badge popular">Popular</span>
                            <div class="open-mat-icon">üßò</div>
                            <div class="open-mat-title">Box-Atmung bei Druck</div>
                            <div class="open-mat-desc">Die Navy-SEAL-Technik, um ruhig zu bleiben, wenn alles brennt.</div>
                            <div class="open-mat-meta">
                                <span>üé• Exercise</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 5 min</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> +15 XP</span>
                            </div>
                        </div>
                        <div class="open-mat-card">
                            <span class="open-mat-badge quick">Quick Win</span>
                            <div class="open-mat-icon">üí≠</div>
                            <div class="open-mat-title">Reframe in 60 Seconds</div>
                            <div class="open-mat-desc">A micro-practice for shifting perspective when you're stuck.</div>
                            <div class="open-mat-meta">
                                <span><i class="fas fa-bolt icon-md icon-warning"></i> Micro</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 1 min</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> +10 XP</span>
                            </div>
                        </div>
                        <div class="open-mat-card">
                            <div class="open-mat-icon"><i class="fas fa-chart-line icon-md icon-success"></i></div>
                            <div class="open-mat-title">Energy Mapping Exercise</div>
                            <div class="open-mat-desc">Track your energy for a week and discover your hidden patterns.</div>
                            <div class="open-mat-meta">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-document-text"></use></svg> Worksheet</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 15 min</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> +40 XP</span>
                            </div>
                        </div>
                        <div class="open-mat-card">
                            <div class="open-mat-icon">üé¨</div>
                            <div class="open-mat-title">Jiu-Jitsu Philosophy</div>
                            <div class="open-mat-desc">How the gentle art teaches us zum lead without force.</div>
                            <div class="open-mat-meta">
                                <span>üé• Video</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 12 min</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> +30 XP</span>
                            </div>
                        </div>
                        <div class="open-mat-card">
                            <div class="open-mat-icon">üß™</div>
                            <div class="open-mat-title">Weekly Experiment Lab</div>
                            <div class="open-mat-desc">This week: Say "I don't know" at least once per day.</div>
                            <div class="open-mat-meta">
                                <span>üî¨ Experiment</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 7 days</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> +100 XP</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Belt Progression Section -->
                <div class="open-mat-section">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title"><i class="fas fa-fist-raised icon-md icon-primary"></i> G√ºrtel-Fortschritt</h2>
                            <p class="section-subtitle">Setze deine F√ºhrungsentwicklungsreise fort</p>
                        </div>
                    </div>
                    <div class="open-mat-grid">
                        <div class="open-mat-card featured" id="purple-belt-card">
                            <span class="open-mat-badge new">New</span>
                            <div class="open-mat-icon"><i class="fas fa-circle icon-md" style="color: #7c3aed;"></i></div>
                            <div class="open-mat-title">Lila Gurt: Team Alignment</div>
                            <div class="open-mat-desc">Von pers√∂nlicher Meisterschaft zu kollektiver Exzellenz. Transformiere Kommunikationsf√§higkeiten in Team-Ergebnisse.</div>
                            <div class="open-mat-meta">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-book-open"></use></svg> 4 Stripes</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 6-8 weeks</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> Advanced</span>
                            </div>
                            <div class="belt-progress-bar" style="width: 100%; background: #e2e8f0; border-radius: 8px; height: 8px; margin: 1rem 0; overflow: hidden;">
                                <div id="purple-progress-fill" style="height: 100%; background: linear-gradient(135deg, #581c87 0%, #7c3aed 100%); width: 0%; transition: width 0.5s;"></div>
                            </div>
                            <div id="purple-progress-text" style="font-size: 0.9rem; color: #64748b; margin-bottom: 0.5rem;">0% Abgeschlossen</div>
                            <button class="practice-action" onclick="window.location.href='purple-belt-de.html'" style="margin-top: 0.5rem; width: 100%;">Start Lila Gurt ‚Üí</button>
                        </div>
                        <div class="open-mat-card featured" id="brown-belt-card">
                            <span class="open-mat-badge new">New</span>
                            <div class="open-mat-icon"><i class="fas fa-circle icon-md" style="color: #92400e;"></i></div>
                            <div class="open-mat-title">Braungurt: Systems & Strategy</div>
                            <div class="open-mat-desc">Meistere Organisationssysteme, Kulturdesign und strategisches F√ºhrungsdenken.</div>
                            <div class="open-mat-meta">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-book-open"></use></svg> 4 Stripes</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 8-10 weeks</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> Expert</span>
                            </div>
                            <div class="belt-progress-bar" style="width: 100%; background: #e2e8f0; border-radius: 8px; height: 8px; margin: 1rem 0; overflow: hidden;">
                                <div id="brown-progress-fill" style="height: 100%; background: linear-gradient(135deg, #78350f 0%, #92400e 100%); width: 0%; transition: width 0.5s;"></div>
                            </div>
                            <div id="brown-progress-text" style="font-size: 0.9rem; color: #64748b; margin-bottom: 0.5rem;">0% Abgeschlossen</div>
                            <button class="practice-action" onclick="window.location.href='brown-belt-de.html'" style="margin-top: 0.5rem; width: 100%;">Start Braungurt ‚Üí</button>
                        </div>
                        <div class="open-mat-card featured" id="black-belt-card">
                            <span class="open-mat-badge new">New</span>
                            <div class="open-mat-icon">‚¨õ</div>
                            <div class="open-mat-title">Schwarzgurt: Mastery & Integration</div>
                            <div class="open-mat-desc">Die letzte Reise: Integration, Lehre, Philosophie und Verm√§chtnis. Hier beginnt das echte Lernen.</div>
                            <div class="open-mat-meta">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-book-open"></use></svg> 4 Stripes</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 10+ weeks</span>
                                <span><i class="fas fa-star icon-md icon-warning"></i> Mastery</span>
                            </div>
                            <div class="belt-progress-bar" style="width: 100%; background: #e2e8f0; border-radius: 8px; height: 8px; margin: 1rem 0; overflow: hidden;">
                                <div id="black-progress-fill" style="height: 100%; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%); width: 0%; transition: width 0.5s;"></div>
                            </div>
                            <div id="black-progress-text" style="font-size: 0.9rem; color: #64748b; margin-bottom: 0.5rem;">0% Abgeschlossen</div>
                            <button class="practice-action" onclick="window.location.href='black-belt-de.html'" style="margin-top: 0.5rem; width: 100%;">Start Schwarzgurt ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- Team Assessments Card -->
                <div class="card team-assessments-card">
                    <div class="card-header">
                        <div>
                            <div class="card-title"><i class="fas fa-users icon-md icon-primary"></i> Team-Assessments</div>
                            <div class="card-subtitle">Sende Assessments an Kandidaten, Teammitglieder oder f√ºhre teamweite Diagnosen durch</div>
                        </div>
                    </div>
                    <div class="team-grid">
                        <div class="team-assessment-card">
                            <div class="team-assessment-icon">üß≠</div>
                            <div class="team-assessment-title">Arbeitstyp-Assessment</div>
                            <div class="team-assessment-desc">Verstehe, wie jemand am besten arbeitet: Maker, Manager oder Mechanic</div>
                            <div class="team-stat">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 8-10 min</span>
                                <span><i class="fas fa-chart-line icon-md icon-success"></i> Individual</span>
                            </div>
                            <div class="team-assessment-actions">
                                <button class="team-btn team-btn-primary" onclick="window.location.href='worker-type-assessment-de.html'">Assessment starten</button>
                                <button class="team-btn team-btn-secondary" onclick="navigator.clipboard.writeText(window.location.origin + '/worker-type-assessment.de.html').then(() => { this.textContent = '‚úì Copied!'; setTimeout(() => this.textContent = 'üì§ Share', 2000); })">üì§ Share</button>
                            </div>
                        </div>
                        
                        <div class="team-assessment-card">
                            <div class="team-assessment-icon"><i class="fas fa-bullseye icon-md icon-primary"></i></div>
                            <div class="team-assessment-title">Team-Dynamik-Scan</div>
                            <div class="team-assessment-desc">Erweiterte Team-Bewertung basierend auf Lencionis 5 Dysfunktionen-Framework</div>
                            <div class="team-stat">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 12-15 min</span>
                                <span><i class="fas fa-users icon-md icon-primary"></i> Team-wide</span>
                            </div>
                            <div class="team-assessment-actions">
                                <button class="team-btn team-btn-primary" onclick="window.location.href='team-assessment-enhanced-v2-de.html'">Team-Scan starten</button>
                                <button class="team-btn team-btn-secondary" onclick="navigator.clipboard.writeText(window.location.origin + '/team-assessment-enhanced-v2.de.html').then(() => { this.textContent = '‚úì Copied!'; setTimeout(() => this.textContent = 'üì§ Share', 2000); })">üì§ Share</button>
                            </div>
                        </div>
                        
                        <div class="team-assessment-card">
                            <div class="team-assessment-icon"><i class="fas fa-bullseye icon-md icon-primary"></i></div>
                            <div class="team-assessment-title">Vollst√§ndiges Team-Profil</div>
                            <div class="team-assessment-desc">4D-Assessment: Arbeitstyp + Team-Dynamik + Impact-Typ + Kommunikationsstil</div>
                            <div class="team-stat">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 10-12 min</span>
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-star"></use></svg> Multi-Dimensional</span>
                            </div>
                            <div class="team-assessment-actions">
                                <button class="team-btn team-btn-primary" onclick="window.location.href='team-profile-complete-de.html'">Mein Profil entdecken</button>
                                <button class="team-btn team-btn-secondary" onclick="navigator.clipboard.writeText(window.location.origin + '/team-profile-complete.html').then(() => { this.textContent = '‚úì Copied!'; setTimeout(() => this.textContent = 'üì§ Share', 2000); })">üì§ Share</button>
                            </div>
                        </div>
                        
                        <div class="team-assessment-card">
                            <div class="team-assessment-icon">üî¨</div>
                            <div class="team-assessment-title">F√ºhrungsprofil</div>
                            <div class="team-assessment-desc">Kombiniertes Assessment f√ºr Einstellung oder Entwicklung - sieh das Gesamtbild</div>
                            <div class="team-stat">
                                <span><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> 20-25 min</span>
                                <span><i class="fas fa-bullseye icon-md icon-primary"></i> Comprehensive</span>
                            </div>
                            <div class="team-assessment-actions">
                                <button class="team-btn team-btn-primary" onclick="window.location.href='combined-profile-carousel-de.html'">Vollst√§ndiges Profil</button>
                                <button class="team-btn team-btn-secondary" onclick="navigator.clipboard.writeText(window.location.origin + '/combined-profile-carousel.de.html').then(() => { this.textContent = '‚úì Copied!'; setTimeout(() => this.textContent = 'üì§ Share', 2000); })">üì§ Share</button>
                            </div>
                        </div>
                        
                        <div class="team-assessment-card" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%); border: 2px solid rgba(168, 85, 247, 0.3);">
                            <div class="team-assessment-icon">üîç</div>
                            <div class="team-assessment-title">Team-Zusammensetzungs-Analysator</div>
                            <div class="team-assessment-desc">Manager-Tool: Visualisiere das Profil-Mix deines Teams und identifiziere L√ºcken oder St√§rken</div>
                            <div class="team-stat">
                                <span>üëî Manager Tool</span>
                                <span><i class="fas fa-chart-line icon-md icon-success"></i> Team Analysis</span>
                            </div>
                            <div class="team-assessment-actions">
                                <button class="team-btn team-btn-primary" onclick="window.location.href='team-composition-analyzer-de.html'">Team analysieren</button>
                                <button class="team-btn team-btn-secondary" onclick="navigator.clipboard.writeText(window.location.origin + '/team-composition-analyzer.html').then(() => { this.textContent = '‚úì Copied!'; setTimeout(() => this.textContent = 'üì§ Share', 2000); })">üì§ Share</button>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.9); font-weight: 600; margin-bottom: 0.25rem;"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-briefcase"></use></svg> F√ºr Organisationen</div>
                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">Massenversand, Verfolgung des Abschlusses, Export von Ergebnissen und Team-Insights-Dashboard</div>
                            </div>
                            <button class="team-btn team-btn-secondary" style="flex: 0 0 auto; padding: 0.75rem 1.5rem;" onclick="window.location.href='business-portal-de.html'">Learn More ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- Toolbox -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üß∞ Dein Werkzeugkasten</div>
                        <a href="learning-hub-de.html" class="card-action">Alle Tools anzeigen ‚Üí</a>
                    </div>
                    <div class="toolbox-grid">
                        <a href="tool-journal-de.html" class="tool-card" style="text-decoration: none; color: inherit;">
                            <div class="tool-icon">üìì</div>
                            <div class="tool-name">Tagebuch</div>
                            <div class="tool-desc">Jederzeit frei schreiben</div>
                        </a>
                        <a href="tool-goal-tracker-de.html" class="tool-card" style="text-decoration: none; color: inherit;">
                            <div class="tool-icon"><i class="fas fa-bullseye icon-md icon-primary"></i></div>
                            <div class="tool-name">Ziel-Tracker</div>
                            <div class="tool-desc">3 aktive Ziele</div>
                        </a>
                        <a href="tool-mood-tracker-de.html" class="tool-card" style="text-decoration: none; color: inherit;">
                            <div class="tool-icon"><i class="fas fa-chart-line icon-md icon-success"></i></div>
                            <div class="tool-name">Stimmungs-Tracker</div>
                            <div class="tool-desc">28 Tage Verlauf</div>
                        </a>
                        <a href="open-mat-box-breathing-de.html" class="tool-card" style="text-decoration: none; color: inherit;">
                            <div class="tool-icon">üßò</div>
                            <div class="tool-name">Atmung</div>
                            <div class="tool-desc">Gef√ºhrte √úbungen</div>
                        </a>
                        <a href="open-mat-inner-game-leadership-de.html" class="tool-card" style="text-decoration: none; color: inherit;">
                            <div class="tool-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg></div>
                            <div class="tool-name">Fokus-Timer</div>
                            <div class="tool-desc">Deep-Work-Tools</div>
                        </a>
                        <a href="open-mat-reframe-60-de.html" class="tool-card" style="text-decoration: none; color: inherit;">
                            <div class="tool-icon">üé≤</div>
                            <div class="tool-name">Zuf√§lliger Impuls</div>
                            <div class="tool-desc">Schnelle Reflexion</div>
                        </a>
                        <div class="tool-card">
                            <div class="tool-icon"><i class="fas fa-chart-line icon-md icon-success"></i></div>
                            <div class="tool-name">Fortschrittsbericht</div>
                            <div class="tool-desc">W√∂chentliche Einblicke</div>
                        </div>
                        <div class="tool-card">
                            <div class="tool-icon">ü§ñ</div>
                            <div class="tool-name">KI-Coach</div>
                            <div class="tool-desc">Frage alles</div>
                        </div>
                    </div>
                </div>

                <!-- Resource Library -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-book-open"></use></svg> Resource Library</div>
                        <a href="white-belt-de.html" class="card-action">Alle durchsuchen ‚Üí</a>
                    </div>
                    <div class="library-tabs">
                        <button class="library-tab active">All</button>
                        <button class="library-tab">Videos</button>
                        <button class="library-tab">Articles</button>
                        <button class="library-tab">Worksheets</button>
                        <button class="library-tab">Audio</button>
                    </div>
                    <div class="library-grid">
                        <div class="library-item">
                            <div class="library-thumb">üé•</div>
                            <div class="library-info">
                                <h4>5 Dysfunctions Deep Dive</h4>
                                <p>Patrick Lencioni's framework explained</p>
                                <span class="duration">Video ‚Ä¢ 18 min</span>
                            </div>
                        </div>
                        <div class="library-item">
                            <div class="library-thumb">üìñ</div>
                            <div class="library-info">
                                <h4>Google's Project Aristotle</h4>
                                <p>What makes teams successful</p>
                                <span class="duration">Article ‚Ä¢ 10 min read</span>
                            </div>
                        </div>
                        <div class="library-item">
                            <div class="library-thumb"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-document-text"></use></svg></div>
                            <div class="library-info">
                                <h4>Values Discovery Worksheet</h4>
                                <p>Clarify what truly matters</p>
                                <span class="duration">Worksheet ‚Ä¢ 20 min</span>
                            </div>
                        </div>
                        <div class="library-item">
                            <div class="library-thumb">üéß</div>
                            <div class="library-info">
                                <h4>Stoic Morning Meditation</h4>
                                <p>Start your day grounded</p>
                                <span class="duration">Audio ‚Ä¢ 7 min</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Quote Card -->
                <div class="card quote-card">
                    <div class="quote-text">"The obstacle is the way. What stands in the path becomes the path."</div>
                    <div class="quote-author">‚Äî Marcus Aurelius</div>
                    <button class="refresh-quote" onclick="refreshQuote()">‚Üª New Quote</button>
                </div>

                <!-- Weekly Challenge -->
                <div class="card challenge-card">
                    <div class="challenge-header">
                        <span class="challenge-badge">Weekly Challenge</span>
                        <span class="challenge-timer">4 days left</span>
                    </div>
                    <div class="challenge-title"><i class="fas fa-fire icon-md icon-danger"></i> 7 Days of Vulnerability</div>
                    <div class="challenge-desc">Share one honest thing about yourself with someone each day this week.</div>
                    <div class="challenge-progress">
                        <div class="challenge-bar">
                            <div class="challenge-bar-fill" style="width: 43%"></div>
                        </div>
                        <span class="challenge-count">3/7</span>
                    </div>
                </div>

                <!-- Assessments -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üìã Assessments</div>
                    </div>
                    <div class="assessment-list">
                        <div class="assessment-item" onclick="window.location.href='belt-assessment-v2-de.html'" style="cursor: pointer;">
                            <div class="assessment-left">
                                <span class="assessment-icon"><i class="fas fa-fist-raised icon-md icon-primary"></i></span>
                                <span class="assessment-name">Belt Assessment</span>
                            </div>
                            <span class="assessment-status completed">‚úì Fertig</span>
                        </div>
                        <div class="assessment-item">
                            <div class="assessment-left">
                                <span class="assessment-icon"><i class="fas fa-bolt icon-md icon-warning"></i></span>
                                <span class="assessment-name">Arbeitstyp</span>
                            </div>
                            <span class="assessment-status completed">‚úì Fertig</span>
                        </div>
                        <div class="assessment-item">
                            <div class="assessment-left">
                                <span class="assessment-icon">‚ù§Ô∏è</span>
                                <span class="assessment-name">Psychische Gesundheit</span>
                            </div>
                            <span class="assessment-status available">Jetzt starten</span>
                        </div>
                        <div class="assessment-item">
                            <div class="assessment-left">
                                <span class="assessment-icon">‚öñÔ∏è</span>
                                <span class="assessment-name">Work-Life-Balance</span>
                            </div>
                            <span class="assessment-status available">Jetzt starten</span>
                        </div>
                        <div class="assessment-item">
                            <div class="assessment-left">
                                <span class="assessment-icon"><i class="fas fa-users icon-md icon-primary"></i></span>
                                <span class="assessment-name">Team-Dynamik</span>
                            </div>
                            <span class="assessment-status available">Jetzt starten</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><i class="fas fa-bolt icon-md icon-warning"></i> Letzte Aktivit√§ten</div>
                    </div>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon"><i class="fas fa-check-circle icon-md icon-success"></i></div>
                            <div class="activity-info">
                                <div class="activity-title">Abgeschlossend Morgenintention</div>
                                <div class="activity-time">Heute, 7:32 Uhr</div>
                            </div>
                            <span class="activity-xp">+10 XP</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üìñ</div>
                            <div class="activity-info">
                                <div class="activity-title">Trust Lesson 3 Abgeschlossen</div>
                                <div class="activity-time">Heute, 8:15 Uhr</div>
                            </div>
                            <span class="activity-xp">+25 XP</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon"><i class="fas fa-fire icon-md icon-danger"></i></div>
                            <div class="activity-info">
                                <div class="activity-title">12-Tage-Serie!</div>
                                <div class="activity-time">Gestern</div>
                            </div>
                            <span class="activity-xp">+50 XP</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üåô</div>
                            <div class="activity-info">
                                <div class="activity-title">Abendreflexion</div>
                                <div class="activity-time">Gestern, 21:45 Uhr</div>
                            </div>
                            <span class="activity-xp">+10 XP</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon"><i class="fas fa-bullseye icon-md icon-primary"></i></div>
                            <div class="activity-info">
                                <div class="activity-title">W√∂chentliche Herausforderung: Tag 3</div>
                                <div class="activity-time">Gestern</div>
                            </div>
                            <span class="activity-xp">+15 XP</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats - Dynamic -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><i class="fas fa-chart-line icon-md icon-success"></i> Deine Statistiken</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--accent-gold);" id="streakCount">0</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Tage-Serie <i class="fas fa-fire icon-md icon-danger"></i></div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--success-green);" id="totalXP">0</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Gesamt XP <i class="fas fa-bolt icon-md icon-warning"></i></div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--primary-navy);" id="modulesAbgeschlossen">0</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Module abgeschlossen</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div style="font-size: 1.75rem; font-weight: 700;" id="badgesEarned">0</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Badges verdient <i class="fas fa-trophy icon-md icon-warning"></i></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quotes array
        const quotes = [
            { text: "The obstacle is the way. What stands in the path becomes the path.", author: "Marcus Aurelius" },
            { text: "We suffer more in imagination than in reality.", author: "Seneca" },
            { text: "No man is free who is not master of himself.", author: "Epictetus" },
            { text: "The best time zum plant a tree was 20 years ago. The second best time is now.", author: "Chinese Proverb" },
            { text: "You have power over your mind, not outside events. Realize this, and you will find strength.", author: "Marcus Aurelius" },
            { text: "A black belt is a white belt who never quit.", author: "Brazilian Proverb" },
            { text: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
            { text: "The only way out is through.", author: "Robert Frost" },
            { text: "What lies behind us and what lies before us are tiny matters compared zum what lies within us.", author: "Ralph Waldo Emerson" },
            { text: "Be the change you wish zum see in the world.", author: "Mahatma Gandhi" },
            { text: "Fall seven times, stand up eight.", author: "Japanese Proverb" },
            { text: "The man who moves a mountain begins by carrying away small stones.", author: "Confucius" }
        ];

        function refreshQuote() {
            const quoteCard = document.querySelector('.quote-card');
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            quoteCard.querySelector('.quote-text').textContent = `"${randomQuote.text}"`;
            quoteCard.querySelector('.quote-author').textContent = `‚Äî ${randomQuote.author}`;
        }

        // Library tabs
        document.querySelectorAll('.library-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.library-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Tool cards click - link to real tools
        document.querySelectorAll('.tool-card').forEach(card => {
            card.style.cursor = 'pointer';
            card.addEventListener('click', function() {
                const toolName = this.querySelector('.tool-name').textContent;
                // Map tool names to actual pages
                if (toolName.includes('Journal')) {
                    window.location.href = 'tool-journal-de.html';
                } else if (toolName.includes('Goal')) {
                    window.location.href = 'tool-goal-tracker-de.html';
                } else if (toolName.includes('Mood')) {
                    window.location.href = 'tool-mood-tracker-de.html';
                } else if (toolName.includes('Breathing')) {
                    window.location.href = 'open-mat-box-breathing-de.html';
                } else if (toolName.includes('Focus')) {
                    window.location.href = 'open-mat-inner-game-leadership-de.html';
                } else {
                    window.location.href = "learning-hub-de.html";
                }
            });
        });

        // Offene Matte cards click - only handle cards without onclick
        document.querySelectorAll('.open-mat-card:not([onclick])').forEach(card => {
            card.style.cursor = 'pointer';
            card.addEventListener('click', function() {
                window.location.href = 'open-mat-inner-game-leadership-de.html';
            });
        });

        // Module cards click - use data-target (like English version) with fallback to title matching
        // This matches the English gym-dashboard.html structure
        // Window-level guard: Prevent duplicate initialization
        if (!window._moduleListenersInitialized) {
            window._moduleListenersInitialized = true;
            document.querySelectorAll('.module-card:not(.locked)').forEach(card => {
                // Element-level guard: Prevent duplicate listeners on same element
                if (card.hasAttribute('data-module-listener')) {
                    return;
                }
                card.setAttribute('data-module-listener', 'true');
                card.style.cursor = 'pointer';
            card.addEventListener('click', function(e) {
                e.stopPropagation();
                const target = this.dataset.target;
                
                // Priority 1: Use data-target if present (preferred method, matches English version)
                if (target) {
                    window.location.href = target;
                    return;
                }
                
                // Priority 2: Fallback to title matching for modules without data-target
                // This supports all belts: white, blue, purple, brown, black
                const title = this.querySelector('.module-title')?.textContent?.trim() || '';
                
                // WHITE BELT modules
                if (title.includes('Selbstbewusstsein') || title.includes('Who Are You') || title.includes('Self-Awareness')) {
                    window.location.href = "white-belt-stripe1-gamified-de.html";
                } else if (title.includes('Verletzlichkeit') || title.includes('Vulnerability') || title.includes('How You Operate')) {
                    window.location.href = 'challenge-vulnerability-de.html';
                } else if (title.includes('Selbstvertrauen') || title.includes('What You Value') || title.includes('Confidence')) {
                    window.location.href = 'white-belt-stripe3-gamified-de.html';
                } else if (title.includes('Tagebuch') || title.includes('Journaling') || title.includes('Journal') || title.includes('How You Show Up')) {
                    window.location.href = 'white-belt-stripe4-gamified-de.html';
                }
                // BLUE BELT modules
                else if (title.includes('Difficult Conversations') || title.includes('Schwierige Gespr√§che')) {
                    window.location.href = 'blue-belt-stripe1-gamified-de.html';
                } else if (title.includes('Active Listening') || title.includes('Aktives Zuh√∂ren')) {
                    window.location.href = 'blue-belt-stripe2-gamified-de.html';
                } else if (title.includes('Feedback Systems') || title.includes('Feedback-Systeme')) {
                    window.location.href = 'blue-belt-stripe3-gamified-de.html';
                } else if (title.includes('Boundaries') || title.includes('Grenzen')) {
                    window.location.href = 'blue-belt-stripe4-gamified-de.html';
                }
                // PURPLE BELT modules
                else if (title.includes('Team Alignment') || title.includes('Team-Ausrichtung') || title.includes('Shared Goals')) {
                    window.location.href = 'purple-belt-stripe1-gamified-de.html';
                } else if (title.includes('Healthy Conflict') || title.includes('Gesunder Konflikt')) {
                    window.location.href = 'purple-belt-stripe2-gamified-de.html';
                } else if (title.includes('Collective Accountability') || title.includes('Kollektive Verantwortung')) {
                    window.location.href = 'purple-belt-stripe3-gamified-de.html';
                } else if (title.includes('Results Focus') || title.includes('Ergebnis-Fokus')) {
                    window.location.href = 'purple-belt-stripe4-gamified-de.html';
                }
                // BROWN BELT modules
                else if (title.includes('Accountability Foundation') || title.includes('Verantwortungsgrundlage')) {
                    window.location.href = 'brown-belt-stripe1-gamified-de.html';
                } else if (title.includes('Accountability Depth') || title.includes('Verantwortungstiefe')) {
                    window.location.href = 'brown-belt-stripe2-gamified-de.html';
                } else if (title.includes('Accountability Systems') || title.includes('Verantwortungssysteme')) {
                    window.location.href = 'brown-belt-stripe3-gamified-de.html';
                } else if (title.includes('Accountability Mastery') || title.includes('Verantwortungsmeisterschaft')) {
                    window.location.href = 'brown-belt-stripe4-gamified-de.html';
                }
                // BLACK BELT modules
                else if (title.includes('Integration') || title.includes('Integration')) {
                    window.location.href = 'black-belt-stripe1-gamified-de.html';
                } else if (title.includes('Teaching Others') || title.includes('Andere lehren')) {
                    window.location.href = 'black-belt-stripe2-gamified-de.html';
                } else if (title.includes('Leadership Philosophy') || title.includes('F√ºhrungsphilosophie')) {
                    window.location.href = 'black-belt-stripe3-gamified-de.html';
                } else if (title.includes('Legacy') || title.includes('Verm√§chtnis')) {
                    window.location.href = 'black-belt-stripe4-gamified-de.html';
                }
                // Fallback: Go to white belt overview
                else {
                    window.location.href = "white-belt-de.html";
                }
            });
        });
        } // End window._moduleListenersInitialized guard

        // Assessment items click - use data attributes for links
        document.querySelectorAll('.assessment-item').forEach(item => {
            item.style.cursor = 'pointer';
            item.addEventListener('click', function() {
                const assessmentLink = this.dataset.assessmentLink;
                if (assessmentLink) {
                    window.location.href = assessmentLink;
                } else {
                    const link = this.querySelector('a');
                    if (link && link.href !== '#') {
                        window.location.href = link.href;
                    }
                }
            });
        });

        // Library items click - link to relevant content
        document.querySelectorAll('.library-item').forEach(item => {
            item.style.cursor = 'pointer';
            item.addEventListener('click', function() {
                const title = this.querySelector('h4').textContent;
                // Map library items to existing content
                if (title.includes('5 Dysfunctions')) {
                    window.location.href = 'team-dynamics-assessment.html';
                } else if (title.includes('Project Aristotle')) {
                    window.location.href = "learning-hub-de.html";
                } else if (title.includes('Values Discovery')) {
                    window.location.href = 'values-discovery-assessment-de.html';
                } else if (title.includes('Stoic')) {
                    window.location.href = 'open-mat-inner-game-leadership-de.html';
                } else {
                    window.location.href = "learning-hub-de.html";
                }
            });
        });

        // Simulate real-time date
        function updateDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateStr = now.toLocaleDateString('en-US', options);
            document.querySelector('.welcome-date').textContent = `${dateStr} ‚Ä¢ Wei√ügurt Training`;
        }
        updateDate();

        // Dynamic Belt Progress Tracking
        function updateBeltProgress() {
            const belts = [
                { name: 'purple', color: 'Purple', stripes: 4 },
                { name: 'brown', color: 'Brown', stripes: 4 },
                { name: 'black', color: 'Black', stripes: 4 }
            ];

            belts.forEach(belt => {
                let completedStripes = 0;
                
                // Count completed stripes
                for (let i = 1; i <= belt.stripes; i++) {
                    const key = `${belt.name}BeltStripe${i}Abgeschlossen`;
                    if (localStorage.getItem(key) === 'true') {
                        completedStripes++;
                    }
                }

                // Calculate percentage
                const percentage = (completedStripes / belt.stripes) * 100;
                
                // Update progress bar
                const fillElement = document.getElementById(`${belt.name}-progress-fill`);
                const textElement = document.getElementById(`${belt.name}-progress-text`);
                const cardElement = document.getElementById(`${belt.name}-belt-card`);
                const badgeElement = cardElement?.querySelector('.open-mat-badge');
                
                if (fillElement) {
                    fillElement.style.width = `${percentage}%`;
                }
                
                if (textElement) {
                    if (percentage === 100) {
                        textElement.textContent = `Check Circle ${belt.color} Belt Abgeschlossen!`;
                        textElement.style.color = '#38a169';
                        textElement.style.fontWeight = '600';
                        if (badgeElement) {
                            badgeElement.textContent = 'Abgeschlossen';
                            badgeElement.style.background = 'linear-gradient(135deg, #38a169 0%, #2f855a 100%)';
                        }
                    } else if (percentage > 0) {
                        textElement.textContent = `${Math.round(percentage)}% Abgeschlossen (${completedStripes}/${belt.stripes} stripes)`;
                        if (badgeElement) {
                            badgeElement.textContent = 'In Progress';
                            badgeElement.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
                        }
                    } else {
                        textElement.textContent = '0% Abgeschlossen';
                    }
                }
            });

            // Check for entire program completion
            if (localStorage.getItem('entireProgramAbgeschlossen') === 'true') {
                console.log('üéâ Entire TAP-IN program completed!');
            }
        }

        // Run on page load
        updateBeltProgress();

        // ============================================
        // GAMIFICATION SYSTEM - XP, Streaks, Badges
        // ============================================

        // XP Configuration
        const XP_VALUES = {
            stripeAbgeschlossen: 50,      // Abgeschlossen a stripe module
            assessmentAbgeschlossen: 100, // Abgeschlossen an assessment
            openMatAbgeschlossen: 25,     // Abgeschlossen an open mat exercise
            dailyLogin: 10,          // Login bonus
            weekStreak: 50,          // 7-day streak bonus
            beltAbgeschlossen: 250        // Abgeschlossen entire belt
        };

        // Initialize or get gamification data
        function getGamificationData() {
            const defaultData = {
                totalXP: 0,
                level: 1,
                badges: [],
                lastVisit: null,
                streakCount: 0,
                modulesAbgeschlossen: 0,
                assessmentsAbgeschlossen: 0,
                history: []
            };
            
            const stored = localStorage.getItem('tapinGamification');
            if (stored) {
                try {
                    return { ...defaultData, ...JSON.parse(stored) };
                } catch (e) {
                    return defaultData;
                }
            }
            return defaultData;
        }

        function saveGamificationData(data) {
            localStorage.setItem('tapinGamification', JSON.stringify(data));
        }

        // Award XP function
        function awardXP(amount, reason) {
            const data = getGamificationData();
            XPManager.addXP(amount);
            data.history.push({
                amount,
                reason,
                timestamp: new Date().toISOString()
            });
            saveGamificationData(data);
            updateGamificationDisplay();
            
            // Check for level up
            const newLevel = Math.floor(data.totalXP / 500) + 1;
            if (newLevel > data.level) {
                data.level = newLevel;
                saveGamificationData(data);
                showLevelUpNotification(newLevel);
            }
        }

        // Check and update streak
        function updateStreak() {
            const data = getGamificationData();
            const today = new Date().toDateString();
            const lastVisit = data.lastVisit ? new Date(data.lastVisit).toDateString() : null;
            
            if (lastVisit === today) {
                // Already visited today
                return data.streakCount;
            }
            
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toDateString();
            
            if (lastVisit === yesterdayStr) {
                // Continuing streak
                data.streakCount += 1;
                awardXP(XP_VALUES.dailyLogin, 'Daily login bonus Fire');
                
                // Week streak bonus
                if (data.streakCount % 7 === 0) {
                    awardXP(XP_VALUES.weekStreak, `${data.streakCount}-day streak bonus! Trophy`);
                    awardBadge(`streak_${data.streakCount}`, `${data.streakCount} Day Warrior`, `Maintained ${data.streakCount} consecutive days`);
                }
            } else if (lastVisit !== null) {
                // Streak broken
                data.streakCount = 1;
                awardXP(XP_VALUES.dailyLogin, 'Daily login bonus');
            } else {
                // First visit
                data.streakCount = 1;
                awardXP(XP_VALUES.dailyLogin, 'First visit! üéâ');
            }
            
            data.lastVisit = new Date().toISOString();
            saveGamificationData(data);
            return data.streakCount;
        }

        // Badge system
        function awardBadge(badgeId, badgeName, badgeDesc) {
            const data = getGamificationData();
            
            // Check if already has badge
            if (data.badges.find(b => b.id === badgeId)) {
                return false;
            }
            
            data.badges.push({
                id: badgeId,
                name: badgeName,
                description: badgeDesc,
                earnedDate: new Date().toISOString()
            });
            
            saveGamificationData(data);
            showBadgeNotification(badgeName, badgeDesc);
            return true;
        }

        // Count completed modules
        function countAbgeschlossendModule() {
            let count = 0;
            const belts = ['white', 'blue', 'purple', 'brown', 'black'];
            
            belts.forEach(belt => {
                for (let i = 1; i <= 4; i++) {
                    const key = `${belt}BeltStripe${i}Abgeschlossen`;
                    if (localStorage.getItem(key) === 'true') {
                        count++;
                    }
                }
            });
            
            return count;
        }

        // Update all gamification displays
        function updateGamificationDisplay() {
            const data = getGamificationData();
            
            // Update streak
            const streak = updateStreak();
            document.getElementById('streakCount').textContent = streak;
            
            // Update XP
            document.getElementById('totalXP').textContent = data.totalXP.toLocaleString();
            
            // Update modules complete
            const modulesAbgeschlossen = countAbgeschlossendModule();
            data.modulesAbgeschlossen = modulesAbgeschlossen;
            saveGamificationData(data);
            document.getElementById('modulesAbgeschlossen').textContent = modulesAbgeschlossen;
            
            // Update badges
            document.getElementById('badgesEarned').textContent = data.badges.length;
            
            // Update XP badge in nav (if it exists)
            const xpBadge = document.querySelector('.xp-badge');
            if (xpBadge) {
                xpBadge.innerHTML = `Bolt ${data.totalXP.toLocaleString()} XP`;
            }
        }

        // Show level up notification
        function showLevelUpNotification(level) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, var(--accent-gold) 0%, #ecc94b 100%);
                color: var(--bg-dark);
                padding: 3rem;
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(246, 224, 94, 0.5);
                z-index: 10000;
                text-align: center;
                animation: scaleIn 0.5s ease;
            `;
            notification.innerHTML = `
                <div style="font-size: 4rem; margin-bottom: 1rem;">üéâ</div>
                <h2 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem;">LEVEL UP!</h2>
                <p style="font-size: 1.5rem; font-weight: 600;">You reached Level ${level}</p>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'scaleOut 0.5s ease';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // Show badge notification
        function showBadgeNotification(badgeName, badgeDesc) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, var(--primary-navy) 0%, var(--navy-light) 100%);
                color: white;
                padding: 1.5rem;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 10000;
                max-width: 350px;
                animation: slideInRight 0.5s ease;
            `;
            notification.innerHTML = `
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <div style="font-size: 2.5rem;"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-trophy"></use></svg></div>
                    <div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.25rem;">Badge Unlocked!</div>
                        <div style="font-weight: 600; color: var(--accent-gold);">${badgeName}</div>
                        <div style="font-size: 0.85rem; opacity: 0.9; margin-top: 0.25rem;">${badgeDesc}</div>
                    </div>
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease';
                setTimeout(() => notification.remove(), 500);
            }, 4000);
        }

        // Add animations zum head
        const style = document.createElement('style');
        style.textContent = `
            @keyframes scaleIn {
                from { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                zum { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            }
            @keyframes scaleOut {
                from { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                zum { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            }
            @keyframes slideInRight {
                from { transform: translateX(400px); opacity: 0; }
                zum { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                zum { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize gamification on page load
        updateGamificationDisplay();

        // Expose functions globally for other pages zum award XP
        window.tapinGamification = {
            awardXP,
            awardBadge,
            getGamificationData,
            XP_VALUES
        };
    </script>

<!-- Language Switcher Component -->
<!-- Include this at the top of every page -->

<style>
    .language-switcher {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
    }
    
    .lang-toggle {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        padding: 8px 16px;
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.3s;
        color: #ffffff;
        font-weight: 600;
        font-size: 14px;
    }
    
    .lang-toggle:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: rgba(255, 255, 255, 0.3);
    }
    
    .lang-flag {
        font-size: 18px;
    }
    
    .lang-code {
        font-weight: 700;
        letter-spacing: 0.5px;
    }
    
    .lang-arrow {
        font-size: 14px;
        opacity: 0.7;
    }
    
    .lang-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        margin-top: 8px;
        background: rgba(30, 30, 50, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        overflow: hidden;
        display: none;
        min-width: 150px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }
    
    .lang-dropdown.show {
        display: block;
        animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        zum {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .lang-option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 16px;
        color: #ffffff;
        text-decoration: none;
        transition: all 0.2s;
        font-weight: 500;
        font-size: 14px;
    }
    
    .lang-option:hover {
        background: rgba(255, 255, 255, 0.1);
    }
    
    .lang-option.active {
        background: rgba(99, 102, 241, 0.2);
        color: #a5b4fc;
    }
    
    .lang-option .lang-flag {
        font-size: 20px;
    }
    
    @media (max-width: 768px) {
        .language-switcher {
            top: 10px;
            right: 10px;
        }
        
        .lang-toggle {
            padding: 6px 12px;
            font-size: 14px;
        }
    }
</style>

<div class="language-switcher">
    <button class="lang-toggle" id="langToggle">
        <span class="lang-flag" id="currentFlag">üá¨üáß</span>
        <span class="lang-code" id="currentLang">EN</span>
        <span class="lang-arrow">‚ñº</span>
    </button>
    <div class="lang-dropdown" id="langDropdown">
        <a href="#" class="lang-option" data-lang="en" data-file="">
            <span class="lang-flag">üá¨üáß</span> English
        </a>
        <a href="#" class="lang-option" data-lang="de" data-file="-de">
            <span class="lang-flag">üá©üá™</span> Deutsch
        </a>
    </div>
</div>

<script>
(function() {
    'use strict';
    
    // Window-level guard: Prevent duplicate initialization
    if (window._langSwitcherInitialized) {
        return;
    }
    window._langSwitcherInitialized = true;
    
    // Language Switcher Logic
    let toggle = document.getElementById('langToggle');
    let dropdown = document.getElementById('langDropdown');
    let currentFlag = document.getElementById('currentFlag');
    let currentLang = document.getElementById('currentLang');
    
    // Detect current language from URL
    const isGerman = window.location.pathname.includes('-de.html');
    const currentLanguage = isGerman ? 'de' : 'en';
    
    // Update UI zum show current language
    if (isGerman) {
        currentFlag.textContent = 'üá©üá™';
        currentLang.textContent = 'DE';
    }
    
    // Check if elements exist
    if (!toggle || !dropdown || !currentFlag || !currentLang) {
        console.error('Language switcher elements not found');
        return;
    }
    
    // Mark active language option
    document.querySelectorAll('.lang-option').forEach(option => {
        if (option.dataset.lang === currentLanguage) {
            option.classList.add('active');
        } else {
            option.classList.remove('active');
        }
    });
    
    // Toggle dropdown - with element-level guard
    if (!toggle.hasAttribute('data-lang-listener')) {
        toggle.setAttribute('data-lang-listener', 'true');
        toggle.addEventListener('click', (e) => {
            e.stopPropagation();
            e.preventDefault();
            dropdown.classList.toggle('show');
        });
    }
    
    // Close dropdown when clicking outside - with document-level guard
    if (!document.hasAttribute('data-lang-outside-listener')) {
        document.setAttribute('data-lang-outside-listener', 'true');
        document.addEventListener('click', (e) => {
            if (!toggle.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.classList.remove('show');
            }
        });
    }
    
    // Language switch handler - with element-level guards
    document.querySelectorAll('.lang-option').forEach(option => {
        // Check if listener already added
        if (option.hasAttribute('data-lang-listener')) {
            return;
        }
        option.setAttribute('data-lang-listener', 'true');
        
        option.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            const targetLang = option.dataset.lang;
            
            // Don't switch if already on that language
            if (targetLang === currentLanguage) {
                dropdown.classList.remove('show');
                return;
            }
            
            // Store preference
            localStorage.setItem('preferredLanguage', targetLang);
            
            // Navigate to corresponding page in other language
            // We're on gym-dashboard-de.html, so switch to gym-dashboard.html
            if (targetLang === 'en') {
                window.location.href = 'gym-dashboard.html';
            } else {
                window.location.href = 'gym-dashboard-de.html';
            }
        });
    });
    
    // Auto-redirect based on stored preference (optional)
    // Uncomment if you want automatic redirects
    /*
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang && storedLang !== currentLanguage) {
        const fileSuffix = storedLang === 'de' ? '-de' : '';
        let basePath = window.location.pathname.replace('-de.html', '.html');
        let newPath = basePath.replace('.html', fileSuffix + '.html');
        window.location.href = newPath;
    }
    */
})();
</script>



    <script>
    // Global error handler - prevents silent failures
    window.addEventListener('error', function(e) {
        console.error('Resource failed to load:', e.target.src || e.target.href || e.message);
        // Don't break the page, just log
        e.preventDefault();
    });
    
    // Handle promise rejections
    window.addEventListener('unhandledrejection', function(e) {
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') { console.error('Unhandled promise rejection:', e.reason); }
        e.preventDefault();
    }
    
    // Initialize when DOM is ready
    if (document.readyState === \'loading\') {
        document.addEventListener(\'DOMContentLoaded\', initLanguageSwitcher);
    } else {
        initLanguageSwitcher();
    }
    });
    </script>


<!-- Wisdom Tracker & Hub Unlock Systems -->
<script src="js/wisdom-tracker.min.js" defer></script>
<script src="js/hub-unlock-system.min.js" defer></script>
<script src="js/progress-sync-init.js" defer></script>

<!-- Initialize Systems -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Initialize Wisdom Tracker
    if (typeof WisdomTracker !== 'undefined') {
      WisdomTracker.init();
      console.log('Check Circle Wisdom Tracker initialized');
    }
    
    // Initialize Hub Unlock System  
    if (typeof HubUnlockSystem !== 'undefined') {
      HubUnlockSystem.init();
      console.log('Check Circle Hub Unlock System initialized');
    }
    }
    
    // Initialize when DOM is ready
    if (document.readyState === \'loading\') {
        document.addEventListener(\'DOMContentLoaded\', initLanguageSwitcher);
    } else {
        initLanguageSwitcher();
    }
  });
</script>


<!-- Global Error Handling -->
<script>
// Global error handling - Silent mode (no user notifications)
window.addEventListener('error', (event) => {
  // Suppress expected errors (service worker, favicon, etc.)
  const errorSrc = event.target ? (event.target.src || event.target.href || '') : '';
  if (errorSrc.includes('sw.js') || errorSrc.includes('favicon') || errorSrc.includes('service-worker')) {
    return; // Silent suppression
  }
  // Only log to console, never show toasts
  console.error('Exclamation Triangle Resource failed to load:', errorSrc || event.message);
});

window.addEventListener('unhandledrejection', (event) => {
  // Suppress Service Worker errors during uninstall
  const reason = event.reason?.toString() || '';
  if (reason.includes('Service Worker') || reason.includes('serviceWorker') || reason.includes('sw.js') || reason.includes('Failed to register')) {
    console.log('‚úì SW error suppressed (expected)');
    event.preventDefault();
    return;
  }
  // Only log to console, never show toasts
  console.error('Exclamation Triangle Unhandled promise rejection:', event.reason);
  event.preventDefault();
});

// REMOVED: showErrorToast function - errors are now silent
</script>

<!-- Service Worker Registration -->
<script>
  if ('serviceWorker' in navigator) {
    document.addEventListener('DOMContentLoaded', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(() => {
            if (console && console.debug) {
                console.debug('[SW] Registered successfully');
            }
        })
        .catch(err => {
            // Expected failures: private mode, older browsers, etc.
            if (console && console.debug) {
                console.debug('[SW] Registration note:', err.message || err);
            }
            return Promise.resolve(); // Swallow error
        });
    });
  }
</script>


<script src="js/loading-states.js" defer></script>
<script src="js/error-handler.js" defer></script>

<!-- TAP-IN Utilities -->
<script src="js/shared-utilities.js" defer></script>
<script src="js/global-error-handler.min.js" defer></script>
<script src="js/storage-health.min.js" defer></script>
    <!-- TAP-IN Core Modules -->
    <!-- REMOVED: Conflicting external language-switcher script -->
    <script src="js/meta-tags-manager.js" defer></script>
    <script src="js/achievement-badges.js" defer></script>
    <script src="js/structured-data.js" defer></script>


<!-- Unified Error Handling System -->
<script src="js/unified-error-system.js" defer></script>

<!-- Avatar System Loader - Disabled until design is improved -->
<!-- Avatar System Script -->
<!-- <script src="js/avatar-system.js" defer></script> -->
<!-- <script>
// Initialize new avatar system when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Load avatar customizer component
    const customizerContainer = document.getElementById('avatarCustomizerContainer');
    if (customizerContainer) {
        fetch('components/avatar-customizer.html')
            .then(r => r.text())
            .then(html => {
                customizerContainer.innerHTML = html;
            })
            .catch(err => {
                console.warn('Avatar customizer not loaded:', err);
            });
    }
    
    // Render avatars after system is ready
    setTimeout(function() {
        if (window.AvatarSystem) {
            window.AvatarSystem.render('dashboardAvatar');
            // Also render in nav avatar
            document.querySelectorAll('.user-avatar.avatar-container').forEach(container => {
                container.innerHTML = window.AvatarSystem.generateHTML();
            });
        }
    }, 200);
    }
    
    // Initialize when DOM is ready
    if (document.readyState === \'loading\') {
        document.addEventListener(\'DOMContentLoaded\', initLanguageSwitcher);
    } else {
        initLanguageSwitcher();
    }
});
</script> -->

    <!-- Screen Reader Enhancements for Accessibility -->
    <script src="js/screen-reader-enhancements.js" defer></script>
</body>
</html>

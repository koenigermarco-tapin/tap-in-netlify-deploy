<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:url" content="https://tap-in-platform.netlify.app/white-belt-graduation-assessment.html">
<meta property="og:title" content="Leadership Assessment | TAP-IN">
<meta property="og:description" content="Take our leadership assessment to discover your strengths and development areas.">
<meta property="og:image" content="https://tap-in-platform.netlify.app/og-image.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://tap-in-platform.netlify.app/white-belt-graduation-assessment.html">
<meta property="twitter:title" content="Leadership Assessment | TAP-IN">
<meta property="twitter:description" content="Take our leadership assessment to discover your strengths and development areas.">
<meta property="twitter:image" content="https://tap-in-platform.netlify.app/og-image.png">
    <title>ü§ç White Belt Graduation Assessment | TAP-IN</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: linear-gradient(135deg, #1a365d 0%, #7c3aed 100%); min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        .header { text-align: center; margin-bottom: 30px; padding-bottom: 25px; border-bottom: 3px solid #f0f0f0; }
        .header h1 { color: #1a365d; font-size: 2.3em; margin-bottom: 15px; }
        .header .subtitle { color: #666; font-size: 1.1em; margin-bottom: 10px; }
        .header .duration { color: #999; font-size: 0.9em; font-style: italic; }
        
        .progress-bar { position: sticky; top: 10px; background: white; padding: 15px; border-radius: 10px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 100; }
        .progress-text { text-align: center; color: #666; font-size: 0.9em; margin-bottom: 8px; }
        .progress-fill { height: 8px; background: linear-gradient(90deg, #1a365d 0%, #7c3aed 100%); border-radius: 10px; overflow: hidden; }
        .progress-fill-bar { background: linear-gradient(90deg, #1a365d 0%, #7c3aed 100%); height: 100%; width: 0%; transition: width 0.3s ease; }
        
        .section-header { background: linear-gradient(135deg, #1a365d 0%, #0f1f3d 100%); color: white; padding: 15px 20px; border-radius: 10px; margin-bottom: 20px; }
        .section-header h3 { font-size: 1.2em; margin-bottom: 5px; }
        
        .question-card { background: #f8f9fa; padding: 30px; border-radius: 12px; margin-bottom: 20px; }
        .question-number { color: #1a365d; font-weight: bold; font-size: 0.9em; margin-bottom: 10px; }
        .question-text { font-size: 1.2em; color: #333; margin-bottom: 25px; font-weight: 500; line-height: 1.5; }
        
        .choice-container { display: flex; flex-direction: column; gap: 12px; }
        .choice-option { padding: 15px 20px; background: white; border: 3px solid #cbd5e1; border-radius: 10px; cursor: pointer; transition: all 0.2s; text-align: left; font-size: 1em; color: #1e293b; font-weight: 600; }
        .choice-option:hover { border-color: #1a365d; background: #f0f4ff; }
        .choice-option.selected { border-color: #1a365d; background: linear-gradient(135deg, #1a365d 0%, #0f1f3d 100%); color: white; }
        
        .nav-buttons { display: flex; gap: 15px; justify-content: space-between; margin-top: 25px; }
        .btn { padding: 12px 30px; border: none; border-radius: 8px; font-size: 1em; cursor: pointer; transition: all 0.2s; font-weight: 600; }
        .btn-secondary { background: #e0e0e0; color: #333; }
        .btn-secondary:hover { background: #d0d0d0; }
        .btn-primary { background: linear-gradient(135deg, #1a365d 0%, #0f1f3d 100%); color: white; }
        .btn-primary:hover { transform: scale(1.05); box-shadow: 0 4px 15px rgba(26, 54, 93, 0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        .results-container { display: none; }
        .results-container.active { display: block; }
        
        .graduation-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 10000; }
        .graduation-modal.active { display: flex; }
        .modal-content { background: white; border-radius: 20px; padding: 40px; max-width: 600px; text-align: center; position: relative; animation: modalPop 0.5s ease; }
        @keyframes modalPop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .confetti-animation { font-size: 3rem; margin-bottom: 20px; }
        .belt-transition { display: flex; justify-content: center; align-items: center; gap: 30px; margin: 30px 0; font-size: 4rem; }
        .belt-transition .arrow { font-size: 2rem; color: #1a365d; }
        .graduation-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0; }
        .stat { text-align: center; }
        .stat .value { font-size: 2.5rem; font-weight: 800; color: #1a365d; }
        .stat .label { font-size: 0.9rem; color: #666; margin-top: 5px; }
        .graduation-message { text-align: left; margin: 30px 0; line-height: 1.8; color: #333; }
        .graduation-message ul { margin: 15px 0 15px 20px; }
        .graduation-actions { display: flex; gap: 15px; justify-content: center; margin-top: 30px; flex-wrap: wrap; }
        .btn-large { padding: 18px 40px; font-size: 1.2em; }
        .bjj-wisdom { margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; font-style: italic; color: #666; }
        
        .retry-message { background: #fff5f0; border: 2px solid #f59e0b; border-radius: 15px; padding: 30px; margin: 30px 0; text-align: center; }
        .retry-message h3 { color: #92400e; margin-bottom: 15px; }
        .retry-message p { color: #78350f; line-height: 1.7; }
        
        @media (max-width: 768px) {
            .container { padding: 25px; }
            .header h1 { font-size: 2em; }
            .graduation-stats { grid-template-columns: 1fr; }
            .belt-transition { font-size: 3rem; gap: 20px; }
        }
    
        /* ============= NUMBERED OPTION BOX READABILITY FIX ============= */
        .scale-option,
        .rating-option,
        .numbered-option,
        .option-number,
        [data-value="1"],
        [data-value="2"],
        [data-value="3"],
        [data-value="4"],
        [data-value="5"] {
            color: #FFFFFF !important;
            font-weight: 700 !important;
            font-size: 1.1rem !important;
            background: #1e293b !important;
            border: 2px solid #475569 !important;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5) !important;
        }
        .scale-option:hover,
        .rating-option:hover,
        .numbered-option:hover,
        .option-number:hover,
        [data-value]:hover {
            background: #334155 !important;
            border-color: #667eea !important;
            color: #FFFFFF !important;
            transform: scale(1.05) !important;
        }
        .scale-option.selected,
        .rating-option.selected,
        .numbered-option.selected,
        .option-number.selected,
        [data-value].selected {
            background: #667eea !important;
            border-color: #818cf8 !important;
            color: #FFFFFF !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3) !important;
        }
        .scale-label,
        .rating-label,
        .option-label {
            color: #FFFFFF !important;
            font-weight: 600 !important;
            font-size: 0.9rem !important;
            text-align: center !important;
            margin-top: 0.5rem !important;
        }
        .scale-container,
        .rating-container,
        .options-row {
            display: flex !important;
            justify-content: space-between !important;
            gap: 0.75rem !important;
            margin: 1.5rem 0 !important;
        }
        .scale-container > *,
        .rating-container > *,
        .options-row > * {
            flex: 1 !important;
            min-width: 60px !important;
            text-align: center !important;
            padding: 1rem 0.5rem !important;
            border-radius: 8px !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
        }
        @media (max-width: 768px) {
            .scale-option,
            .rating-option,
            .numbered-option,
            .option-number,
            [data-value] {
                font-size: 1rem !important;
                padding: 0.75rem 0.25rem !important;
                min-width: 50px !important;
            }
            .scale-label,
            .rating-label,
            .option-label {
                font-size: 0.75rem !important;
            }
        }
        input[type="range"] {
            -webkit-appearance: none !important;
            width: 100% !important;
            height: 8px !important;
            background: #334155 !important;
            border-radius: 5px !important;
            outline: none !important;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none !important;
            width: 24px !important;
            height: 24px !important;
            background: #667eea !important;
            cursor: pointer !important;
            border-radius: 50% !important;
            border: 3px solid #FFFFFF !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
        }
        input[type="range"]::-moz-range-thumb {
            width: 24px !important;
            height: 24px !important;
            background: #667eea !important;
            cursor: pointer !important;
            border-radius: 50% !important;
            border: 3px solid #FFFFFF !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
        }
        .slider-value,
        .range-value {
            display: block !important;
            text-align: center !important;
            font-size: 1.5rem !important;
            font-weight: 700 !important;
            color: #667eea !important;
            margin-top: 1rem !important;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2) !important;
        }
        .slider-labels {
            display: flex !important;
            justify-content: space-between !important;
            margin-top: 0.5rem !important;
        }
        .slider-labels span {
            font-size: 0.85rem !important;
            color: #cbd5e1 !important;
            font-weight: 600 !important;
        }

    </style>
    <link rel="canonical" href="https://tap-in-platform.netlify.app/white-belt-graduation-assessment.html">

<body>
    <div class="container">
        <div id="assessmentForm">
            <div class="header">
                <h1>ü§ç White Belt Graduation Assessment</h1>
                <p class="subtitle">Test Your Mastery Before Advancing to Blue Belt</p>
                <p class="duration">‚è±Ô∏è 15-20 Minutes ‚Ä¢ 20 Questions ‚Ä¢ 80% Required to Pass</p>
            </div>

            <div id="introSection" style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 30px; border-left: 4px solid #1a365d;">
                <h3 style="color: #333; margin-bottom: 15px;">üéì Ready to Graduate?</h3>
                <p style="color: #666; line-height: 1.7; margin-bottom: 15px;">
                    <strong>You've completed all 4 White Belt stripes!</strong> This assessment tests your mastery of self-knowledge, energy management, values, and mission. You need to score <strong>80% or higher (16/20 correct)</strong> to advance to Blue Belt.
                </p>
                <ul style="color: #666; line-height: 1.8; margin-left: 20px; margin-bottom: 15px;">
                    <li><strong>20 questions</strong> - 5 questions per stripe</li>
                    <li><strong>80% pass rate</strong> - 16 correct answers required</li>
                    <li><strong>Unlimited retakes</strong> - Learn and try again</li>
                    <li><strong>Graduation ceremony</strong> - Celebrate your achievement!</li>
                </ul>
                <p style="color: #666; line-height: 1.7; margin-top: 15px; padding: 15px; background: #f0f4ff; border-radius: 8px; font-size: 0.95em;">
                    <strong>ü•ã In BJJ:</strong> "A blue belt is someone who shows up consistently and knows the fundamentals. You've shown up, and you've learned yourself. Now comes the real training."
                </p>
                <button onclick="startAssessment()" style="background: linear-gradient(135deg, #1a365d 0%, #0f1f3d 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 15px rgba(26, 54, 93, 0.3); display: block; margin: 20px auto 0; width: auto;">
                    Begin Assessment ‚Üí
                </button>
            </div>

            <div class="progress-bar" style="display: none;" id="progressBarContainer">
                <div class="progress-text">Question <span id="currentQ">1</span> of 20</div>
                <div class="progress-fill">
                    <div class="progress-fill-bar" id="progressBar"></div>
                </div>
            </div>

            <div id="questionContainer" style="display: none;"></div>

            <div class="nav-buttons" style="display: none;" id="navButtons">
                <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()" disabled>‚Üê Previous</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Next ‚Üí</button>
            </div>
        </div>

        <div id="resultsContainer" class="results-container"></div>
    </div>

    <!-- Graduation Modal -->
    <div class="graduation-modal" id="graduationModal">
        <div class="modal-content">
            <div class="confetti-animation">üéâüéä‚ú®</div>
            <h1>ü•ã Congratulations!</h1>
            <div class="belt-transition">
                <div class="old-belt">‚ö™</div>
                <div class="arrow">‚Üí</div>
                <div class="new-belt">üîµ</div>
            </div>
            <h2 style="color: #1a365d; margin: 20px 0;">You've Earned Your Blue Belt!</h2>
            <div class="graduation-stats" id="graduationStats"></div>
            <div class="graduation-message" id="graduationMessage"></div>
            <div class="graduation-actions">
                <button class="btn btn-primary btn-large" onclick="advanceToBlueBelt()">üîµ Begin Blue Belt Journey ‚Üí</button>
                <button class="btn btn-secondary" onclick="shareGraduation()">üì± Share Achievement</button>
            </div>
            <div class="bjj-wisdom" id="bjjWisdom"></div>
        </div>
    </div>

    <script>
        const questions = [
            // STRIPE 1: Worker Type (5 questions)
            {
                stripe: 1,
                stripeName: 'Worker Type',
                question: 'You have a big project due in 3 weeks. Your approach is:',
                options: [
                    { text: 'Wait until week 3, then work intensely to finish', value: 'sprinter', correct: false },
                    { text: 'Break it into daily tasks and work steadily', value: 'jogger', correct: true },
                    { text: 'Plan phases over 3 weeks with milestones', value: 'ultrarunner', correct: false },
                    { text: 'Start immediately and work at maximum intensity', value: 'sprinter', correct: false }
                ]
            },
            {
                stripe: 1,
                stripeName: 'Worker Type',
                question: 'Energy management is most effective when you:',
                options: [
                    { text: 'Match your schedule to your natural energy cycles', value: 'correct', correct: true },
                    { text: 'Force yourself to work during low-energy times', value: 'incorrect', correct: false },
                    { text: 'Ignore your energy patterns and push through', value: 'incorrect', correct: false },
                    { text: 'Work the same schedule every day regardless', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 1,
                stripeName: 'Worker Type',
                question: 'Recovery is most important for:',
                options: [
                    { text: 'Only sprinters who work in bursts', value: 'incorrect', correct: false },
                    { text: 'All worker types, but in different ways', value: 'correct', correct: true },
                    { text: 'Only ultrarunners doing long projects', value: 'incorrect', correct: false },
                    { text: 'People who are already burned out', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 1,
                stripeName: 'Worker Type',
                question: 'Self-awareness of your worker type helps you:',
                options: [
                    { text: 'Design your schedule to match your natural patterns', value: 'correct', correct: true },
                    { text: 'Change your natural patterns to be more productive', value: 'incorrect', correct: false },
                    { text: 'Compare yourself to others and compete', value: 'incorrect', correct: false },
                    { text: 'Avoid challenging projects outside your type', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 1,
                stripeName: 'Worker Type',
                question: 'When should you adjust your approach?',
                options: [
                    { text: 'Never - stick to your natural type', value: 'incorrect', correct: false },
                    { text: 'When the situation requires a different approach', value: 'correct', correct: true },
                    { text: 'Only when your current approach fails', value: 'incorrect', correct: false },
                    { text: 'Constantly to avoid getting stuck', value: 'incorrect', correct: false }
                ]
            },
            // STRIPE 2: Mental Health (5 questions)
            {
                stripe: 2,
                stripeName: 'Mental Health',
                question: 'The first step in managing stress is:',
                options: [
                    { text: 'Ignoring it and pushing through', value: 'incorrect', correct: false },
                    { text: 'Recognizing your stress patterns early', value: 'correct', correct: true },
                    { text: 'Waiting until you feel overwhelmed', value: 'incorrect', correct: false },
                    { text: 'Asking others to reduce your workload', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 2,
                stripeName: 'Mental Health',
                question: 'An energy audit helps you:',
                options: [
                    { text: 'Track where your energy actually goes', value: 'correct', correct: true },
                    { text: 'Increase your total energy capacity', value: 'incorrect', correct: false },
                    { text: 'Compare your energy to others', value: 'incorrect', correct: false },
                    { text: 'Eliminate all energy drains', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 2,
                stripeName: 'Mental Health',
                question: 'Effective recovery strategies:',
                options: [
                    { text: 'Are the same for everyone', value: 'incorrect', correct: false },
                    { text: 'Match your personal needs and preferences', value: 'correct', correct: true },
                    { text: 'Require expensive activities or tools', value: 'incorrect', correct: false },
                    { text: 'Only work if done for long periods', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 2,
                stripeName: 'Mental Health',
                question: 'Emotional patterns are:',
                options: [
                    { text: 'Fixed and unchangeable', value: 'incorrect', correct: false },
                    { text: 'Recognizable and manageable with awareness', value: 'correct', correct: true },
                    { text: 'Only relevant during stress', value: 'incorrect', correct: false },
                    { text: 'Something to suppress and ignore', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 2,
                stripeName: 'Mental Health',
                question: 'Resilience is:',
                options: [
                    { text: 'Something you\'re born with', value: 'incorrect', correct: false },
                    { text: 'Trainable through intentional practice', value: 'correct', correct: true },
                    { text: 'Only needed during major crises', value: 'incorrect', correct: false },
                    { text: 'About never feeling stress', value: 'incorrect', correct: false }
                ]
            },
            // STRIPE 3: Values (5 questions)
            {
                stripe: 3,
                stripeName: 'Values',
                question: 'Core values are:',
                options: [
                    { text: 'What you say matters most', value: 'incorrect', correct: false },
                    { text: 'What you actually do and prioritize', value: 'correct', correct: true },
                    { text: 'What others expect of you', value: 'incorrect', correct: false },
                    { text: 'Ideals you aspire to but don\'t live', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 3,
                stripeName: 'Values',
                question: 'Values misalignment shows up in:',
                options: [
                    { text: 'How you spend your time and money', value: 'correct', correct: true },
                    { text: 'What you post on social media', value: 'incorrect', correct: false },
                    { text: 'Your job title or role', value: 'incorrect', correct: false },
                    { text: 'How others perceive you', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 3,
                stripeName: 'Values',
                question: 'Priority setting based on values means:',
                options: [
                    { text: 'Saying yes to everything important', value: 'incorrect', correct: false },
                    { text: 'Saying no to good things for great things', value: 'correct', correct: true },
                    { text: 'Avoiding all trade-offs', value: 'incorrect', correct: false },
                    { text: 'Following others\' priorities', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 3,
                stripeName: 'Values',
                question: 'Values trade-offs are:',
                options: [
                    { text: 'Failures to avoid', value: 'incorrect', correct: false },
                    { text: 'Necessary choices when values conflict', value: 'correct', correct: true },
                    { text: 'Signs of weak values', value: 'incorrect', correct: false },
                    { text: 'Only relevant in major decisions', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 3,
                stripeName: 'Values',
                question: 'Living aligned with values means:',
                options: [
                    { text: 'Never compromising on anything', value: 'incorrect', correct: false },
                    { text: 'Making decisions that feel authentic', value: 'correct', correct: true },
                    { text: 'Achieving perfect alignment always', value: 'incorrect', correct: false },
                    { text: 'Following values only when convenient', value: 'incorrect', correct: false }
                ]
            },
            // STRIPE 4: Mission (5 questions)
            {
                stripe: 4,
                stripeName: 'Mission',
                question: 'Defining your personal mission helps you:',
                options: [
                    { text: 'Make decisions aligned with your purpose', value: 'correct', correct: true },
                    { text: 'Avoid all difficult choices', value: 'incorrect', correct: false },
                    { text: 'Impress others with your clarity', value: 'incorrect', correct: false },
                    { text: 'Stay the same throughout your life', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 4,
                stripeName: 'Mission',
                question: 'Understanding your contribution type means:',
                options: [
                    { text: 'Knowing how you uniquely help others', value: 'correct', correct: true },
                    { text: 'Comparing your impact to others', value: 'incorrect', correct: false },
                    { text: 'Focusing only on big, visible contributions', value: 'incorrect', correct: false },
                    { text: 'Avoiding helping others to focus on yourself', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 4,
                stripeName: 'Mission',
                question: 'Character traits are demonstrated:',
                options: [
                    { text: 'Only when others are watching', value: 'incorrect', correct: false },
                    { text: 'Through consistent daily actions', value: 'correct', correct: true },
                    { text: 'Through major achievements only', value: 'incorrect', correct: false },
                    { text: 'When you feel like it', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 4,
                stripeName: 'Mission',
                question: 'Long-term thinking:',
                options: [
                    { text: 'Is only for people with clear goals', value: 'incorrect', correct: false },
                    { text: 'Changes your short-term decisions', value: 'correct', correct: true },
                    { text: 'Prevents you from taking action now', value: 'incorrect', correct: false },
                    { text: 'Requires knowing exactly what will happen', value: 'incorrect', correct: false }
                ]
            },
            {
                stripe: 4,
                stripeName: 'Mission',
                question: 'How you want to be known:',
                options: [
                    { text: 'Is determined by others\' opinions', value: 'incorrect', correct: false },
                    { text: 'Guides your daily behavior and choices', value: 'correct', correct: true },
                    { text: 'Is only relevant for public figures', value: 'incorrect', correct: false },
                    { text: 'Changes based on the situation', value: 'incorrect', correct: false }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let answers = {};
        const totalQuestions = 20;
        const passScore = 16; // 80%

        function startAssessment() {
            // Check if all 4 stripes are complete
            const stripe1 = localStorage.getItem('whiteBeltStripe1Complete');
            const stripe2 = localStorage.getItem('whiteBeltStripe2Complete');
            const stripe3 = localStorage.getItem('whiteBeltStripe3Complete');
            const stripe4 = localStorage.getItem('whiteBeltStripe4Complete');

            if (!stripe1 || !stripe2 || !stripe3 || !stripe4) {
                alert('Please complete all 4 White Belt stripes before taking the graduation assessment.');
                window.location.href = 'white-belt.html';
                return;
            }

            document.getElementById('introSection').style.display = 'none';
            document.getElementById('progressBarContainer').style.display = 'block';
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('navButtons').style.display = 'flex';
            renderQuestion(0);
        }

        function renderQuestion(index) {
            const q = questions[index];
            const container = document.getElementById('questionContainer');
            
            let html = '';
            
            if (index === 0 || questions[index - 1].stripe !== q.stripe) {
                html += `
                    <div class="section-header">
                        <h3>Stripe ${q.stripe}: ${q.stripeName}</h3>
                    </div>
                `;
            }
            
            html += `
                <div class="question-card">
                    <div class="question-number">Question ${index + 1} of ${totalQuestions}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="choice-container">
                        ${q.options.map((opt, i) => `
                            <div class="choice-option ${answers[index] === i ? 'selected' : ''}" onclick="selectAnswer(${i})">
                                ${opt.text}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
            document.getElementById('currentQ').textContent = index + 1;
            updateProgress();
        }

        function selectAnswer(optionIndex) {
            answers[currentQuestionIndex] = optionIndex;
            renderQuestion(currentQuestionIndex);
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion(currentQuestionIndex);
                document.getElementById('prevBtn').disabled = false;
                document.getElementById('nextBtn').disabled = !(answers[currentQuestionIndex] !== undefined);
                if (currentQuestionIndex === questions.length - 1) {
                    document.getElementById('nextBtn').textContent = 'See Results üéØ';
                }
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                showResults();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion(currentQuestionIndex);
                document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
                document.getElementById('nextBtn').disabled = false;
                document.getElementById('nextBtn').textContent = 'Next ‚Üí';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function showResults() {
            let correct = 0;
            const results = [];

            questions.forEach((q, index) => {
                const selectedIndex = answers[index];
                if (selectedIndex !== undefined) {
                    const selected = q.options[selectedIndex];
                    const isCorrect = selected.correct;
                    if (isCorrect) correct++;
                    results.push({
                        question: q.question,
                        selected: selected.text,
                        correct: isCorrect,
                        correctAnswer: q.options.find(o => o.correct).text
                    });
                }
            });

            const score = correct;
            const percentage = (score / totalQuestions) * 100;
            const passed = score >= passScore;

            document.getElementById('assessmentForm').style.display = 'none';
            const resultsContainer = document.getElementById('resultsContainer');
            resultsContainer.classList.add('active');

            if (passed) {
                // Show graduation ceremony
                showGraduationCeremony(score, percentage);
            } else {
                // Show retry message
                resultsContainer.innerHTML = `
                    <div class="retry-message">
                        <h3>üìö Keep Learning</h3>
                        <p><strong>Score: ${score}/${totalQuestions} (${percentage.toFixed(0)}%)</strong></p>
                        <p>You scored ${score} out of ${totalQuestions}. You need ${passScore} correct answers (80%) to pass.</p>
                        <p style="margin-top: 20px;">Review the White Belt content and try again. Mastery takes practice!</p>
                        <div style="margin-top: 30px;">
                            <button class="btn btn-primary" onclick="location.reload()">Retake Assessment</button>
                            <button class="btn btn-secondary" onclick="window.location.href='white-belt.html'" style="margin-left: 10px;">Review White Belt</button>
                        </div>
                    </div>
                `;
            }
        }

        function showGraduationCeremony(score, percentage) {
            // Calculate stats
            const stripesCompleted = 4;
            const xpEarned = 400; // 4 stripes √ó 100 XP
            const assessmentScore = percentage;

            // Update modal content
            document.getElementById('graduationStats').innerHTML = `
                <div class="stat">
                    <div class="value">${stripesCompleted}</div>
                    <div class="label">Stripes Completed</div>
                </div>
                <div class="stat">
                    <div class="value">${xpEarned}</div>
                    <div class="label">XP Earned</div>
                </div>
                <div class="stat">
                    <div class="value">${assessmentScore.toFixed(0)}%</div>
                    <div class="label">Assessment Score</div>
                </div>
            `;

            document.getElementById('graduationMessage').innerHTML = `
                <p><strong>White Belt Journey Complete!</strong></p>
                <p>You've mastered self-knowledge‚Äîthe foundation of all leadership.</p>
                <br>
                <p><strong>You now know:</strong></p>
                <ul>
                    <li>‚úÖ Your worker type and energy patterns</li>
                    <li>‚úÖ Your mental health and stress management</li>
                    <li>‚úÖ Your core values and priorities</li>
                    <li>‚úÖ Your mission and how you show up</li>
                </ul>
                <br>
                <p><strong>Blue Belt Focus:</strong> Trust & Conflict</p>
                <p>Now you'll learn to build trust and engage in productive conflict‚Äîessential for all relationships.</p>
            `;

            document.getElementById('bjjWisdom').innerHTML = `
                <em>"A blue belt is someone who shows up consistently and knows the fundamentals. You've shown up, and you've learned yourself. Now comes the real training."</em>
            `;

            // Show modal
            document.getElementById('graduationModal').classList.add('active');

            // Confetti!
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 }
                });
            }, 250);
            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 }
                });
            }, 400);
        }

        function advanceToBlueBelt() {
            // Mark White Belt complete
            localStorage.setItem('whiteBeltComplete', 'true');
            localStorage.setItem('whiteBeltCompletedDate', new Date().toISOString());
            localStorage.setItem('currentBelt', 'Blue');
            
            // Award bonus XP for graduation
            const currentXP = parseInt(localStorage.getItem('totalXP') || '0');
            localStorage.setItem('totalXP', (currentXP + 500).toString()); // +500 bonus!
            
            // Unlock Blue Belt
            localStorage.setItem('blueBeltUnlocked', 'true');
            
            // Redirect
            window.location.href = 'blue-belt.html';
        }

        function shareGraduation() {
            const text = encodeURIComponent('ü•ã I just earned my Blue Belt on TAP-IN! White Belt complete - ready for Trust & Conflict training. #TAPIN #LeadershipDevelopment');
            window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
        }
    </script>
<!-- TAP-IN Utilities -->
<script src="js/shared-utilities.js"></script>
<script src="js/global-error-handler.js"></script>
<script src="js/storage-health.js"></script>
    <!-- TAP-IN Core Modules -->
    <script src="js/language-switcher.js"></script>
    <script src="js/meta-tags-manager.js"></script>
    <script src="js/achievement-badges.js"></script>
    <script src="js/structured-data.js"></script>

</body>
</html>



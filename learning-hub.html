<!DOCTYPE html>
<html lang="en">
<head>
<!-- OPTIMIZED FONT LOADING -->
<!-- Replace existing Google Fonts link in <head> with this -->

<!-- Preconnect to Google Fonts (improves performance) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="css/core-styles.css">
    <link rel="stylesheet" href="css/dark-mode.css">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- Load fonts with font-display: swap (prevents blocking) -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="css/core-styles.css">

<!-- Fallback for no JavaScript -->
<noscript>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/core-styles.css">
</noscript>

<!-- System font fallback CSS -->
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO Meta Tags -->
    <meta name="description" content="TAP-IN Leadership - Master leadership skills through martial arts methodology.">
    <meta name="keywords" content="leadership training, team building, professional development">
    <meta property="og:title" content="TAP-IN Leadership Development">
    <meta property="og:description" content="Progress from White to Black Belt in leadership skills.">
    <meta property="og:type" content="website">
    
    <!-- Supabase & Auth -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/auth-system.js"></script>
    <!-- CACHE BUSTER - Load FIRST, before anything else -->
    <script src="cache-buster.js"></script>

    <title>The Hub | TAP-IN</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', sans-serif;
            background: #252940;
            min-height: 100vh;
            padding: 20px;
            color: #e2e8f0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ============= SIMPLE PROFESSIONAL HEADER ============= */
        .hub-header {
            background: #252940;
            padding: 2rem 0;
            border-bottom: 1px solid #3d4466;
            margin-bottom: 3rem;
        }

        .hub-title {
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .hub-icon {
            font-size: 2rem;
            opacity: 0.9;
        }

        .hub-subtitle {
            font-size: 1rem;
            color: #94a3b8;
            font-weight: 400;
        }

        /* ============= NAVIGATION ============= */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #3d4466;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            color: #94a3b8;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-link:hover {
            color: #ffffff;
        }

        .nav-link.active {
            color: #ffffff;
            font-weight: 600;
        }

        /* ============= XP CONNECTION BANNER ============= */
        .xp-banner {
            background: rgba(61, 68, 102, 0.3);
            border: 1px solid #3d4466;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 3rem;
            text-align: center;
        }

        .xp-banner-text {
            font-size: 0.95rem;
            color: #e2e8f0;
        }

        .xp-banner-text .highlight {
            color: #ffffff;
            font-weight: 600;
        }

        /* ============= SECTIONS ============= */
        .section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title-icon {
            font-size: 1.5rem;
        }

        /* ============= FEATURED CARD (Large) ============= */
        .featured-card {
            background: linear-gradient(135deg, #2d3548 0%, #3d4466 100%);
            border: 1px solid #4a5568;
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            transition: all 0.3s ease;
        }

        .featured-card:hover {
            border-color: #5a6478;
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
        }

        .featured-card.combined {
            background: linear-gradient(135deg, #1a365d 0%, #0f172a 100%);
            border-color: #4a5568;
        }

        .featured-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.75rem;
        }

        .featured-description {
            color: #e2e8f0;
            font-size: 1.05rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .featured-meta {
            display: flex;
            gap: 2rem;
            margin-bottom: 1.5rem;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .featured-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .featured-cta {
            display: inline-block;
            background: #4a5568;
            color: #ffffff;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
        }

        .featured-cta:hover {
            background: #5a6478;
            transform: translateY(-2px);
        }

        /* ============= COURSE GRID ============= */
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        /* ============= COURSE CARDS (Medium) ============= */
        .course-card {
            background: #2d3548;
            border: 1px solid #3d4466;
            border-radius: 10px;
            padding: 1.75rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .course-card:hover {
            border-color: #4a5568;
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        /* Subtle left accent - MUTED colors */
        .course-card.energy {
            border-left: 3px solid rgba(45, 90, 77, 0.6);
        }

        .course-card.boundaries {
            border-left: 3px solid rgba(90, 77, 109, 0.6);
        }

        .course-card.deepwork {
            border-left: 3px solid rgba(61, 68, 102, 0.6);
        }

        .course-card.feedback {
            border-left: 3px solid rgba(77, 109, 90, 0.6);
        }

        .course-card.expectations {
            border-left: 3px solid rgba(74, 85, 104, 0.6);
        }

        .course-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            opacity: 0.8;
        }

        .course-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .course-description {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .course-meta {
            display: flex;
            gap: 1.5rem;
            color: #94a3b8;
            font-size: 0.85rem;
        }

        /* ============= SHOW MORE BUTTON ============= */
        .show-more-btn {
            display: block;
            width: 100%;
            background: transparent;
            border: 1px solid #3d4466;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 3rem;
        }

        .show-more-btn:hover {
            border-color: #4a5568;
            background: rgba(61, 68, 102, 0.2);
        }

        /* ============= ADDITIONAL COURSES (Hidden Initially) ============= */
        .additional-courses {
            margin-bottom: 2rem;
        }

        .additional-courses.hidden {
            display: none;
        }

        /* ============= TEAM TOOLS SECTION ============= */
        .team-tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .tool-card {
            background: #2d3548;
            border: 1px solid #3d4466;
            border-radius: 10px;
            padding: 2rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .tool-card:hover {
            border-color: #4a5568;
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .tool-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .tool-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.75rem;
        }

        .tool-description {
            color: #94a3b8;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* ============= QUICK TOOLS GRID ============= */
        .quick-tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .quick-tool {
            background: #2d3548;
            border: 1px solid #3d4466;
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.2s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .quick-tool:hover {
            border-color: #4a5568;
            transform: translateY(-2px);
        }

        .quick-tool-icon {
            font-size: 1.75rem;
            opacity: 0.8;
        }

        .quick-tool-title {
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
        }

        .quick-tool-description {
            font-size: 0.85rem;
            color: #94a3b8;
            line-height: 1.4;
        }

        .quick-tool-time {
            font-size: 0.8rem;
            color: #6b7280;
        }

        /* ============= NUDGE BOX ============= */
        .nudge-box {
            background: rgba(61, 68, 102, 0.2);
            border: 1px solid #3d4466;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            margin-top: 3rem;
        }

        .nudge-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .nudge-text {
            color: #94a3b8;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .nudge-link {
            display: inline-block;
            color: #e2e8f0;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border: 1px solid #3d4466;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .nudge-link:hover {
            border-color: #4a5568;
            background: rgba(61, 68, 102, 0.2);
        }

        /* ============= MOBILE RESPONSIVE ============= */
        @media (max-width: 768px) {
            .hub-title {
                font-size: 1.5rem;
            }

            .courses-grid {
                grid-template-columns: 1fr;
            }

            .team-tools-grid {
                grid-template-columns: 1fr;
            }

            .quick-tools-grid {
                grid-template-columns: 1fr;
            }

            .featured-meta {
                flex-direction: column;
                gap: 0.5rem;
            }

            .nav-links {
                flex-direction: column;
                gap: 0.75rem;
            }
        }
    
/* Enhanced Focus Styles for Accessibility */
button:focus,
a:focus,
input:focus,
textarea:focus,
select:focus,
.stripe-item:focus,
.module-card:focus,
.entry-card:focus {
    outline: 3px solid #6366f1;
    outline-offset: 2px;
    box-shadow: 0 0 0 6px rgba(99, 102, 241, 0.2);
}

/* Screen reader only class */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}
</style>

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#4a7c9c">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Tap-In">
<link rel="apple-touch-icon" href="/icons/icon-192.png">

    <link rel="canonical" href="https://tap-in-platform.netlify.app/learning-hub.html">

<body>
    <a href="#main-content" class="skip-link" style="position: absolute; top: -40px; left: 0; background: #6366f1; color: white; padding: 8px 16px; text-decoration: none; z-index: 9999; border-radius: 0 0 4px 0; font-weight: 600;"
    onfocus="this.style.top='0';" onblur="this.style.top='-40px';">Skip to main content</a>
<!-- LOADING SCREEN COMPONENT -->
<!-- Add this at the START of <body> tag -->

<style>
    /* Loading Screen - Critical CSS */
    #loadingScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #1a1d2e;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 99999;
        transition: opacity 0.3s ease;
    }
    
    #loadingScreen.hidden {
        opacity: 0;
        pointer-events: none;
    }
    
    .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid #3d4466;
        border-top-color: #6366f1;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    
    .loading-text {
        margin-top: 20px;
        color: #94a3b8;
        font-size: 16px;
        font-weight: 500;
    }
    
    .loading-logo {
        font-size: 32px;
        font-weight: 800;
        color: #ffffff;
        margin-bottom: 30px;
        letter-spacing: -0.5px;
    }
</style>

<div id="loadingScreen">
    <div class="loading-logo">TAP-IN</div>
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading...</div>
</div>

<script>
// Hide loading screen when page is ready
(function() {
    function hideLoading() {
        const loader = document.getElementById('loadingScreen');
        if (loader) {
            loader.classList.add('hidden');
            setTimeout(() => {
                loader.style.display = 'none';
            }, 300);
        }
    }
    
    // Hide on window load
    window.addEventListener('load', hideLoading);
    
    // Fallback timeout (5 seconds max)
    setTimeout(hideLoading, 5000);
    
    // Emergency fallback (DOMContentLoaded)
    if (document.readyState === 'complete' || document.readyState === 'interactive') {
        setTimeout(hideLoading, 100);
    } else {
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(hideLoading, 500);
        });
    }
})();
</script>



    <div class="container">
        <!-- Top Navigation -->
        <div class="top-nav">
            <div class="nav-links">
                <a href="index-DUAL-ENTRY.html" class="nav-link">‚Üê Home</a>
                <a href="gym-dashboard.html" class="nav-link">ü•ã The Gym</a>
                <a href="learning-hub.html" class="nav-link active">üè¢ The Hub</a>
            </div>
            <div class="nav-links">
                <a href="#" class="nav-link">Profile</a>
                <a href="#" class="nav-link">Settings</a>
            </div>
        </div>

        <!-- Simple Professional Header -->
        <div class="hub-header">
            <h1 class="hub-title">
                <span class="hub-icon">üè¢</span>
                THE HUB
            </h1>
            <p class="hub-subtitle">Professional Development & Team Tools</p>
        </div>

        <!-- XP Connection Banner -->
        <div class="xp-banner">
            <div class="xp-banner-text">
                üí° <span class="highlight">All XP earned in The Hub counts toward your belt progression in The Gym</span>
            </div>
        </div>

        <div class="section">
            <div class="featured-card combined">
                <h3 class="featured-title">üìã Combined Impact Profile</h3>
                <p class="featured-description">
                    Worker Type + Leadership Style + Team Dynamics rolled into one unified
                    assessment. Unlock actionable insights, +150 XP, and a direct path back to the Belt System.
                </p>
                <div class="featured-meta">
                    <div class="featured-meta-item">46 questions</div>
                    <div class="featured-meta-item">+150 XP bonus</div>
                    <div class="featured-meta-item">Instant team recommendations</div>
                </div>
                <div style="display:flex;gap:1rem;flex-wrap:wrap;">
                    <a class="featured-cta" href="combined-profile-carousel.html">Start English Assessment ‚Üí</a>
                    <a class="featured-cta" href="combined-profile-carousel.de.html" style="background:#5a6482;">Deutsch version ‚Üí</a>
                </div>
            </div>
        </div>

        <!-- FEATURED SECTION -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-title-icon">üìä</span>
                Featured
            </h2>

            <div class="featured-card">
                <h3 class="featured-title">Communication Mastery</h3>
                <p class="featured-description">
                    Master essential communication skills for team effectiveness. Learn active listening, 
                    empathy, coaching techniques, and feedback systems that drive results.
                </p>
                <div class="featured-meta">
                    <div class="featured-meta-item">üìö 8 lessons</div>
                    <div class="featured-meta-item">‚è±Ô∏è ~90 minutes</div>
                    <div class="featured-meta-item">‚≠ê +400 XP</div>
                </div>
                <a href="communication-mastery-module-v2.html" class="featured-cta">Start Learning ‚Üí</a>
            </div>
        </div>

        <!-- CORE SKILLS SECTION -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-title-icon">üéØ</span>
                Core Skills
            </h2>

            <div class="courses-grid">
                <div class="course-card energy" onclick="window.location.href='course-energy-management.html'">
                    <div class="course-icon">‚ö°</div>
                    <h3 class="course-title">Energy Management</h3>
                    <p class="course-description">
                        Build sustainable performance systems. Manage energy, not just time.
                    </p>
                    <div class="course-meta">
                        <span>4 lessons</span>
                        <span>+100 XP</span>
                    </div>
                </div>

                <div class="course-card boundaries" onclick="window.location.href='course-boundaries.html'">
                    <div class="course-icon">üõ°Ô∏è</div>
                    <h3 class="course-title">Boundaries</h3>
                    <p class="course-description">
                        Set healthy limits and protect your priorities. Say no with confidence.
                    </p>
                    <div class="course-meta">
                        <span>4 lessons</span>
                        <span>+100 XP</span>
                    </div>
                </div>

                <div class="course-card deepwork" onclick="window.location.href='course-deep-work.html'">
                    <div class="course-icon">üéØ</div>
                    <h3 class="course-title">Deep Work</h3>
                    <p class="course-description">
                        Master focus and achieve flow state. Eliminate distractions.
                    </p>
                    <div class="course-meta">
                        <span>4 lessons</span>
                        <span>+100 XP</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Courses (Hidden Initially) -->
        <div class="additional-courses hidden" id="moreCourses">
            <div class="courses-grid">
                <div class="course-card feedback" onclick="window.location.href='course-feedback-culture.html'">
                    <div class="course-icon">üí¨</div>
                    <h3 class="course-title">Feedback Culture</h3>
                    <p class="course-description">
                        Build productive feedback systems. Give and receive effectively.
                    </p>
                    <div class="course-meta">
                        <span>4 lessons</span>
                        <span>+100 XP</span>
                    </div>
                </div>

                <div class="course-card expectations" onclick="window.location.href='course-expectation-management.html'">
                    <div class="course-icon">üìã</div>
                    <h3 class="course-title">Expectation Management</h3>
                    <p class="course-description">
                        Set and manage clear expectations. Communicate with precision.
                    </p>
                    <div class="course-meta">
                        <span>3 lessons</span>
                        <span>+75 XP</span>
                    </div>
                </div>
            </div>
        </div>

        <button class="show-more-btn" id="showMoreBtn" onclick="toggleMoreCourses()" aria-label="Show More Courses ‚Üì">
            Show More Courses ‚Üì
        </button>

        <!-- TEAM TOOLS SECTION -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-title-icon">üõ†</span>
                Team Tools
            </h2>

            <div class="team-tools-grid">
                <div class="tool-card" onclick="window.location.href='hub-assessment-center.html'">
                    <div class="tool-icon">üìä</div>
                    <h3 class="tool-title">Assessment Center</h3>
                    <p class="tool-description">
                        Evaluate team dynamics and individual styles. 13 professional assessments.
                    </p>
                </div>

                <div class="tool-card" onclick="window.location.href='#'">
                    <div class="tool-icon">üìà</div>
                    <h3 class="tool-title">Team Analytics</h3>
                    <p class="tool-description">
                        Track team progress, compare metrics, and gain insights.
                    </p>
                </div>

                <div class="tool-card" onclick="window.location.href='leadership-games.html'">
                    <div class="tool-icon">üéÆ</div>
                    <h3 class="tool-title">Team Challenges</h3>
                    <p class="tool-description">
                        Interactive leadership games for team building and skill development.
                    </p>
                </div>
            </div>
        </div>

        <!-- QUICK TOOLS SECTION -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-title-icon">‚ö°</span>
                Quick Tools
            </h2>

            <div class="quick-tools-grid">
                <div class="quick-tool" onclick="window.location.href='open-mat-5-minute-morning-routine.html'">
                    <div class="quick-tool-icon">üåÖ</div>
                    <div class="quick-tool-title">5-Minute Morning Routine</div>
                    <p class="quick-tool-description">Start your day with intention and energy</p>
                    <div class="quick-tool-time">‚è±Ô∏è 5 min</div>
                </div>

                <div class="quick-tool" onclick="window.location.href='open-mat-box-breathing.html'">
                    <div class="quick-tool-icon">ü´Å</div>
                    <div class="quick-tool-title">Box Breathing</div>
                    <p class="quick-tool-description">Instant calm and focus with guided breathing</p>
                    <div class="quick-tool-time">‚è±Ô∏è 2 min</div>
                </div>

                <div class="quick-tool" onclick="window.location.href='open-mat-decision-framework.html'">
                    <div class="quick-tool-icon">ü§î</div>
                    <div class="quick-tool-title">Decision Framework</div>
                    <p class="quick-tool-description">Structured approach to important decisions</p>
                    <div class="quick-tool-time">‚è±Ô∏è 10 min</div>
                </div>

                <div class="quick-tool" onclick="window.location.href='open-mat-energy-audit.html'">
                    <div class="quick-tool-icon">üîã</div>
                    <div class="quick-tool-title">Energy Audit</div>
                    <p class="quick-tool-description">Identify and eliminate energy drains</p>
                    <div class="quick-tool-time">‚è±Ô∏è 15 min</div>
                </div>

                <div class="quick-tool" onclick="window.location.href='open-mat-weekly-review.html'">
                    <div class="quick-tool-icon">üìù</div>
                    <div class="quick-tool-title">Weekly Review</div>
                    <p class="quick-tool-description">Reflect, learn, and plan your week</p>
                    <div class="quick-tool-time">‚è±Ô∏è 20 min</div>
                </div>

                <div class="quick-tool" onclick="window.location.href='open-mat-inner-game-leadership.html'">
                    <div class="quick-tool-icon">üß†</div>
                    <div class="quick-tool-title">Inner Game</div>
                    <p class="quick-tool-description">Master your mindset and mental patterns</p>
                    <div class="quick-tool-time">‚è±Ô∏è 15 min</div>
                </div>

                <div class="quick-tool" onclick="window.location.href='21-day-mood-tracker.html'">
                    <div class="quick-tool-icon">üìä</div>
                    <div class="quick-tool-title">21-Day Mood Tracker</div>
                    <p class="quick-tool-description">Build emotional awareness through daily tracking</p>
                    <div class="quick-tool-time">‚è±Ô∏è Daily</div>
                </div>

                <div class="quick-tool" onclick="window.location.href='calendar-integration.html'">
                    <div class="quick-tool-icon">üìÖ</div>
                    <div class="quick-tool-title">Calendar Tools</div>
                    <p class="quick-tool-description">Time-blocking and calendar optimization</p>
                    <div class="quick-tool-time">‚è±Ô∏è Planning</div>
                </div>
            </div>
        </div>

        <!-- Visit The Gym Nudge -->
        <div class="nudge-box">
            <div class="nudge-title">ü•ã Build Your Foundation</div>
            <p class="nudge-text">
                Visit The Gym for structured belt progression through the 5 Dysfunctions Framework
            </p>
            <a href="gym-dashboard.html" class="nudge-link">Go to The Gym ‚Üí</a>
        </div>
    </div>

    <script>
        function toggleMoreCourses() {
            const moreCourses = document.getElementById('moreCourses');
            const btn = document.getElementById('showMoreBtn');
            
            moreCourses.classList.toggle('hidden');
            
            if (moreCourses.classList.contains('hidden')) {
                btn.textContent = 'Show More Courses ‚Üì';
            } else {
                btn.textContent = 'Show Less Courses ‚Üë';
            }
        }
    </script>

<!-- Language Switcher Component -->
<!-- Include this at the top of every page -->

<style>
    .language-switcher {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
    }
    
    .lang-toggle {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        padding: 8px 16px;
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.3s;
        color: #ffffff;
        font-weight: 600;
        font-size: 14px;
    }
    
    .lang-toggle:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: rgba(255, 255, 255, 0.3);
    }
    
    .lang-flag {
        font-size: 18px;
    }
    
    .lang-code {
        font-weight: 700;
        letter-spacing: 0.5px;
    }
    
    .lang-arrow {
        font-size: 12px;
        opacity: 0.7;
    }
    
    .lang-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        margin-top: 8px;
        background: rgba(30, 30, 50, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        overflow: hidden;
        display: none;
        min-width: 150px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }
    
    .lang-dropdown.show {
        display: block;
        animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .lang-option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 16px;
        color: #ffffff;
        text-decoration: none;
        transition: all 0.2s;
        font-weight: 500;
        font-size: 14px;
    }
    
    .lang-option:hover {
        background: rgba(255, 255, 255, 0.1);
    }
    
    .lang-option.active {
        background: rgba(99, 102, 241, 0.2);
        color: #a5b4fc;
    }
    
    .lang-option .lang-flag {
        font-size: 20px;
    }
    
    @media (max-width: 768px) {
        .language-switcher {
            top: 10px;
            right: 10px;
        }
        
        .lang-toggle {
            padding: 6px 12px;
            font-size: 14px;
        }
    }
</style>

<div class="language-switcher">
    <button class="lang-toggle" id="langToggle">
        <span class="lang-flag" id="currentFlag">üá¨üáß</span>
        <span class="lang-code" id="currentLang">EN</span>
        <span class="lang-arrow">‚ñº</span>
    </button>
    <div class="lang-dropdown" id="langDropdown">
        <a href="#" class="lang-option" data-lang="en" data-file="">
            <span class="lang-flag">üá¨üáß</span> English
        </a>
        <a href="#" class="lang-option" data-lang="de" data-file="-de">
            <span class="lang-flag">üá©üá™</span> Deutsch
        </a>
    </div>
</div>

<script>
(function() {
    // Language Switcher Logic
    const toggle = document.getElementById('langToggle');
    const dropdown = document.getElementById('langDropdown');
    const currentFlag = document.getElementById('currentFlag');
    const currentLang = document.getElementById('currentLang');
    
    // Detect current language from URL
    const isGerman = window.location.pathname.includes('-de.html');
    const currentLanguage = isGerman ? 'de' : 'en';
    
    // Update UI to show current language
    if (isGerman) {
        currentFlag.textContent = 'üá©üá™';
        currentLang.textContent = 'DE';
    }
    
    // Mark active language option
    document.querySelectorAll('.lang-option').forEach(option => {
        if (option.dataset.lang === currentLanguage) {
            option.classList.add('active');
        }
    });
    
    // Toggle dropdown
    toggle.addEventListener('click', (e) => {
        e.stopPropagation();
        dropdown.classList.toggle('show');
    });
    
    // Close dropdown when clicking outside
    document.addEventListener('click', () => {
        dropdown.classList.remove('show');
    });
    
    // Language switch handler
    document.querySelectorAll('.lang-option').forEach(option => {
        option.addEventListener('click', (e) => {
            e.preventDefault();
            const targetLang = option.dataset.lang;
            const fileSuffix = option.dataset.file;
            
            // Don't switch if already on that language
            if (targetLang === currentLanguage) {
                dropdown.classList.remove('show');
                return;
            }
            
            // Store preference
            localStorage.setItem('preferredLanguage', targetLang);
            
            // Get current page without language suffix
            let currentPath = window.location.pathname;
            let basePath = currentPath.replace('-de.html', '.html');
            
            // Build new path
            let newPath = basePath.replace('.html', fileSuffix + '.html');
            
            // Navigate to new language version
            window.location.href = newPath;
        });
    });
    
    // Auto-redirect based on stored preference (optional)
    // Uncomment if you want automatic redirects
    /*
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang && storedLang !== currentLanguage) {
        const fileSuffix = storedLang === 'de' ? '-de' : '';
        let basePath = window.location.pathname.replace('-de.html', '.html');
        let newPath = basePath.replace('.html', fileSuffix + '.html');
        window.location.href = newPath;
    }
    */
})();
</script>



    <script>
    // Global error handler - prevents silent failures
    window.addEventListener('error', function(e) {
        if(typeof showToast === 'function') { showToast('Something went wrong. Please try again.', 'error'); } console.error('Resource failed to load:', e.target.src || e.target.href || e.message);
        // Don't break the page, just log
        e.preventDefault();
    });
    
    // Handle promise rejections
    window.addEventListener('unhandledrejection', function(e) {
        if(typeof showToast === 'function') { showToast('Unhandled promise rejection:', 'error'); } console.error('Unhandled promise rejection:', e.reason);
        e.preventDefault();
    });
    </script>


<!-- Wisdom Tracker & Hub Unlock Systems -->
<!-- Performance Optimizer - Load First -->
<script src="js/performance-optimizer.js"></script>

<!-- Wisdom Tracker & Hub Unlock Systems - Deferred -->
<script src="js/wisdom-tracker.js" defer></script>
<script src="js/hub-unlock-system.js" defer></script>
<script src="js/progress-sync-init.js" defer></script>

<!-- Initialize Systems -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Initialize Wisdom Tracker
    if (typeof WisdomTracker !== 'undefined') {
      WisdomTracker.init();
      console.log('‚úÖ Wisdom Tracker initialized');
    }
    
    // Initialize Hub Unlock System  
    if (typeof HubUnlockSystem !== 'undefined') {
      HubUnlockSystem.init();
      console.log('‚úÖ Hub Unlock System initialized');
    }
  });
</script>

<script src="js/performance-monitor.js"></script>

<!-- Global Error Handling -->
<script>
// Global error handling
window.addEventListener('error', (event) => {
  if(typeof showToast === 'function') { showToast('Something went wrong. Please try again.', 'error'); } console.error('üí• Error:', event.error);
  showErrorToast('Something went wrong. Please refresh the page.');
});

window.addEventListener('unhandledrejection', (event) => {
  // FIXED: Suppress Service Worker errors during uninstall
  const reason = event.reason?.toString() || '';
  if (reason.includes('Service Worker') || reason.includes('serviceWorker') || reason.includes('sw.js')) {
    console.log('‚úì SW error suppressed (expected during uninstall)');
    event.preventDefault(); // Prevent the notification
    return;
  }
  
  if(typeof showToast === 'function') { showToast('üí• Unhandled promise rejection:', 'error'); } console.error('üí• Unhandled promise rejection:', event.reason);
  showErrorToast('A background process failed. Everything else should work fine.');
});

function showErrorToast(message) {
  const toast = document.createElement('div');
  toast.style.cssText = `
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(255,107,107,0.4);
    z-index: 100000;
    animation: slideUp 0.3s ease-out;
    max-width: 300px;
  `;
  toast.innerHTML = `
    <div style="display: flex; align-items: center; gap: 0.5rem;">
      <span style="font-size: 1.5rem;">‚ö†Ô∏è</span>
      <span>${message}</span>
    </div>
  `;
  
  const style = document.createElement('style');
  style.textContent = `
    @keyframes slideUp {
      from {
        transform: translateY(100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  `;
  document.head.appendChild(style);
  
  document.body.appendChild(toast);
  setTimeout(() => {
    toast.style.animation = 'slideUp 0.3s ease-out reverse';
    setTimeout(() => toast.remove(), 300);
  }, 5000);
}

window.showErrorToast = showErrorToast;
</script>

<!-- Service Worker Registration -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .catch(err => console.log('SW uninstalling'));
    });
  }
</script>


<!-- All scripts deferred for performance -->
<script src="js/loading-states.js" defer></script>
<script src="js/error-handler.js" defer></script>

<!-- TAP-IN Utilities -->
<script src="js/shared-utilities.js"></script>
<script src="js/global-error-handler.js"></script>
<script src="js/storage-health.js"></script>
<!-- Core Modules -->
<script src="js/core-gamification.js"></script>
<script src="js/keyboard-nav.js"></script>
    <!-- TAP-IN Core Modules -->
    <script src="js/language-switcher.js"></script>
    <script src="js/meta-tags-manager.js"></script>
    <script src="js/achievement-badges.js"></script>
    <script src="js/structured-data.js"></script>

<!-- Toast Notification System -->
<div id="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 10000; display: flex; flex-direction: column; gap: 10px;"></div>

<script>
(function() {
    'use strict';
    
    window.showToast = function(message, type = 'info', duration = 3000) {
        const container = document.getElementById('toast-container');
        if (!container) return;
        
        const toast = document.createElement('div');
        toast.style.cssText = `
            background: ${type === 'error' ? '#ef4444' : type === 'success' ? '#10b981' : '#3b82f6'};
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            min-width: 300px;
            max-width: 500px;
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
        `;
        
        const icon = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
        toast.innerHTML = `<span style="font-size: 1.25rem;">${icon}</span><span>${message}</span>`;
        
        container.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, duration);
    };
    
    // Add animations if not present
    if (!document.getElementById('toast-animations')) {
        const style = document.createElement('style');
        style.id = 'toast-animations';
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            @keyframes slideOutRight {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(400px);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    }
})();
</script>

</html>


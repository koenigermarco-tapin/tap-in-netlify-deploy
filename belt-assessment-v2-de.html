<!DOCTYPE html>
<html lang="de">
<head>
    <script src="js/error-suppressor.js"></script>
    <!-- Global Error Suppression - Must be FIRST -->
    <script>
    (function() {
        'use strict';
        
        // Suppress ALL error notifications immediately
        const originalError = window.console.error;
        const originalWarn = window.console.warn;
        
        window.console.error = function() {
            // Only log in development
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                originalError.apply(console, arguments);
            }
        };
        
        window.console.warn = function() {
            // Only log in development
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                originalWarn.apply(console, arguments);
            }
        };
        
        // Prevent all error popups
        window.addEventListener('error', function(e) {
            e.preventDefault();
            return false;
        }, true);
        
        window.addEventListener('unhandledrejection', function(e) {
            e.preventDefault();
            return false;
        });
    })();
    </script>
    
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <meta name="theme-color" content="#1a365d">
    <title>TAP-IN Belt Assessment v2 | Entdecke deinen Startpunkt</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #020617 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            background: #020617;
            border-radius: 22px;
            padding: 42px;
            box-shadow: 0 20px 60px rgba(2, 6, 23, 0.75);
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 28px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.25);
        }

        .header h1 {
            font-size: clamp(2rem, 4vw, 3rem);
            letter-spacing: -0.5px;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #94a3b8;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .tagline {
            color: #f97316;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .belt-icons {
            margin-top: 18px;
            display: flex;
            justify-content: center;
            gap: 12px;
            font-size: 1.6rem;
            color: #94a3b8;
        }

        .intro-box {
            background: rgba(15, 23, 42, 0.85);
            border-left: 4px solid #4c1d95;
            padding: 24px;
            border-radius: 14px;
            margin-bottom: 24px;
            line-height: 1.7;
        }

        .intro-box h3 {
            color: #f8fafc;
            margin-bottom: 14px;
            font-size: 1.25rem;
        }

        .intro-box ul {
            margin-left: 18px;
        }

        .intro-box ul li {
            color: #cbd5f5;
            margin-bottom: 6px;
        }

        .intro-box.learnings {
            background: radial-gradient(circle at top, rgba(59, 130, 246, 0.15), rgba(15, 23, 42, 0.95));
            border-left-color: #38bdf8;
            color: #e0f2fe;
        }

        .intro-box.learnings h3,
        .intro-box.learnings p,
        .intro-box.learnings ul li {
            color: #e0f2fe;
        }

        .progress-container {
            background: rgba(15, 23, 42, 0.85);
            border-radius: 16px;
            padding: 18px 22px;
            margin-bottom: 30px;
            border: 1px solid rgba(148, 163, 184, 0.2);
            position: sticky;
            top: 20px;
            z-index: 50;
            display: none; /* Hidden initially - shown when assessment starts */
        }

        .progress-text {
            font-size: 0.9rem;
            color: #cbd5f5;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 10px;
            border-radius: 10px;
            background: rgba(15, 23, 42, 0.8);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a7c9c 0%, #38bdf8 100%);
            width: 0;
            transition: width 0.4s ease;
        }

        .section-progress {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 12px;
        }

        .section-progress .section-item {
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            color: #94a3b8;
        }

        .section-progress .section-item.active {
            background: rgba(56, 189, 248, 0.2);
            color: #38bdf8;
        }

        .section-progress .section-item.completed {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }

        .question-card {
            background: rgba(15, 23, 42, 0.85);
            border-radius: 18px;
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid rgba(255, 255, 255, 0.07);
            box-shadow: 0 10px 30px rgba(2, 6, 23, 0.65);
        }

        .section-header {
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 18px;
            font-weight: 600;
            background: linear-gradient(135deg, #111827, #0f172a);
        }

        .question-number {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 12px;
        }

        .question-text {
            font-size: clamp(1.2rem, 2.6vw, 1.4rem);
            color: #f8fafc;
            margin-bottom: 24px;
            line-height: 1.7;
        }

        .scale-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 14px;
            margin: 20px 0;
        }

        .scale-option {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 18px 12px;
            min-height: 130px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .scale-option span {
            font-size: 1.9rem;
            font-weight: 600;
            color: #cbd5f5;
        }

        .scale-option small {
            margin-top: 6px;
            color: #94a3b8;
        }

        .scale-option:hover {
            border-color: #38bdf8;
            box-shadow: 0 8px 25px rgba(56, 189, 248, 0.3);
            transform: translateY(-2px);
        }

        .scale-option.selected {
            background: linear-gradient(135deg, #1e3a8a 0%, #312e81 100%);
            color: white;
            border-color: #60a5fa;
        }

        .nav-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            border: none;
            border-radius: 12px;
            padding: 14px 38px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4a7c9c 0%, #38bdf8 100%);
            color: white;
            box-shadow: 0 10px 20px rgba(56, 189, 248, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            box-shadow: none;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            color: #e2e8f0;
            border: 1px solid rgba(148, 163, 184, 0.4);
        }

        .btn-tap {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            border: none;
            border-radius: 10px;
            min-width: 160px;
        }

        .modal {
            position: fixed;
            inset: 0;
            background: rgba(2, 6, 23, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 120;
            padding: 20px;
        }

        .modal-content {
            width: 100%;
            max-width: 720px;
            background: rgba(15, 23, 42, 0.95);
            border-radius: 18px;
            border: 1px solid rgba(148, 163, 184, 0.3);
            padding: 32px;
            box-shadow: 0 20px 60px rgba(2, 6, 23, 0.6);
        }

        .tap-out-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .tap-out-option {
            background: rgba(15, 23, 42, 0.8);
            border: 1px dashed rgba(255, 255, 255, 0.25);
            border-radius: 12px;
            padding: 18px;
            text-align: center;
        }

        .belt-selector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 24px 0;
        }

        .belt-selector-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 18px 14px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .belt-selector-card:hover {
            border-color: #38bdf8;
            transform: translateY(-3px);
        }

        .belt-result {
            background: linear-gradient(135deg, #111827 0%, #1e293b 100%);
            border-radius: 20px;
            padding: 38px 32px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
            box-shadow: 0 12px 40px rgba(2, 6, 23, 0.6);
        }

        .belt-readiness-card {
            background: rgba(15, 23, 42, 0.85);
            border-radius: 14px;
            padding: 20px;
            border-left: 6px solid;
            box-shadow: 0 8px 30px rgba(2, 6, 23, 0.5);
            margin-bottom: 18px;
        }

        .belt-readiness-card.locked { border-color: #ef4444; }
        .belt-readiness-card.conditional { border-color: #f97316; }
        .belt-readiness-card.ready { border-color: #22c55e; }
        .belt-readiness-card.mastery { border-color: #7c3aed; }

        .dysfunction-card {
            perspective: 1200px;
            height: 310px;
        }

        .dysfunction-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .dysfunction-card.flipped .dysfunction-card-inner {
            transform: rotateY(180deg);
        }

        .dysfunction-card-front,
        .dysfunction-card-back {
            position: absolute;
            inset: 0;
            border-radius: 14px;
            padding: 22px;
            backface-visibility: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .dysfunction-card-front {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .dysfunction-card-back {
            background: linear-gradient(135deg, #111827, #1e293b);
            color: white;
            transform: rotateY(180deg);
            overflow-y: auto;
        }

        .results-container {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            padding: 28px;
        }

        .next-steps {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 16px;
            padding: 26px;
            border: 1px solid rgba(148, 163, 184, 0.2);
            margin-top: 28px;
        }

        .xp-earned {
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 14px;
            padding: 24px;
            text-align: center;
            color: white;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        @media (max-width: 768px) {
            .container { padding: 28px; }
            .progress-container { position: static; }
            .scale-options { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); }
            .nav-buttons { flex-direction: column; }
            .btn { width: 100%; }
        }
    </style>
    <link rel="stylesheet" href="css/accessibility.css">

<body>
    <!-- Language Switcher -->
    <div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
        <button onclick="location.href='belt-assessment-v2.html'" 
                style="background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); 
                       color: #e2e8f0; padding: 10px 20px; border-radius: 8px; 
                       font-weight: 600; cursor: pointer; transition: all 0.2s; 
                       font-family: inherit; box-shadow: 0 4px 12px rgba(0,0,0,0.3);" 
                onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.borderColor='#38bdf8'; this.style.color='white';" 
                onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.borderColor='rgba(255,255,255,0.3)'; this.style.color='#e2e8f0';">
            üá¨üáß English Version
        </button>
    </div>
    <!-- Skip Links for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#navigation" class="skip-link">Skip to navigation</a>

    <div class="container">
        <div class="header">
            <h1><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Impact G√ºrtel-Assessment</h1>
            <p class="subtitle">Finde deine L√ºcken, erhalte deine Roadmap, verdiene deine G√ºrtel</p>
            <div class="belt-icons"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Academic Cap Academic Cap Academic Cap Academic Cap</div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Frage 0 von 50</div>
            <div class="section-progress" id="sectionProgress">
                <div class="section-item"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Wei√ü</div>
                <div class="section-item"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Blau</div>
                <div class="section-item"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Lila</div>
                <div class="section-item"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Braun</div>
                <div class="section-item"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Schwarz</div>
            </div>
        </div>

        <!-- Screen Visibility CSS -->
        <style>
            .screen {
                display: none;
            }
            .screen.active {
                display: block;
            }
        </style>
        
        <!-- Intro Screen -->
        <div class="screen active" id="screen-intro">
            <div class="intro-box philosophy">
                <h3><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-flag"></use></svg> Die Meisten Bleiben Stecken</h3>
                <p><strong>Du wei√üt, dass du mehr Impact machen solltest. Du liest die B√ºcher. Du machst die Kurse. Aber etwas fehlt.</strong></p>
                <p>Die L√ºcke zwischen dem Wissen, wie gro√üer Impact aussieht and <em>und ihn tats√§chlich zu schaffen</em> ist, wo die meisten stecken bleiben.</p>
                <p>Dieses Assessment zeigt dir genau, wo diese L√ºcke ist‚Äîund wie du sie schlie√üt.</p>
            </div>

            <div class="intro-box">
                <h3><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-chart-bar"></use></svg> Was Dieses Assessment Macht</h3>
                <p>In 15 Minuten erh√§ltst du eine umfassende Analyse deines Impact-Potenzials √ºber 5 kritische Dimensionen:</p>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 1rem; display: flex; align-items: flex-start; gap: 0.75rem;">
                        <div class="icon-container icon-success icon-container-sm" style="flex-shrink: 0;">
                            <svg class="hero-icon hero-icon-sm" aria-hidden="true">
                                <use href="icons/sprite.svg#icon-heart"></use>
                            </svg>
                        </div>
                        <div>
                            <strong>Trust:</strong> Kannst du verletzlich sein und echte Verbindungen aufbauen?
                        </div>
                    </li>
                    
                    <li style="margin-bottom: 1rem; display: flex; align-items: flex-start; gap: 0.75rem;">
                        <div class="icon-container icon-warning icon-container-sm" style="flex-shrink: 0;">
                            <svg class="hero-icon hero-icon-sm" aria-hidden="true">
                                <use href="icons/sprite.svg#icon-chat-bubble-left-right"></use>
                            </svg>
                        </div>
                        <div>
                            <strong>Conflict:</strong> Vermeidest du gesunde Debatten oder gehst du sie ein?
                        </div>
                    </li>
                    
                    <li style="margin-bottom: 1rem; display: flex; align-items: flex-start; gap: 0.75rem;">
                        <div class="icon-container icon-goal icon-container-sm" style="flex-shrink: 0;">
                            <svg class="hero-icon hero-icon-sm" aria-hidden="true">
                                <use href="icons/sprite.svg#icon-flag"></use>
                            </svg>
                        </div>
                        <div>
                            <strong>Commitment:</strong> H√§ltst du durch und inspirierst Buy-in?
                        </div>
                    </li>
                    
                    <li style="margin-bottom: 1rem; display: flex; align-items: flex-start; gap: 0.75rem;">
                        <div class="icon-container icon-analytics icon-container-sm" style="flex-shrink: 0;">
                            <svg class="hero-icon hero-icon-sm" aria-hidden="true">
                                <use href="icons/sprite.svg#icon-shield-check"></use>
                            </svg>
                        </div>
                        <div>
                            <strong>Verantwortlichkeit:</strong> H√§ltst du dich (und andere) an Standards?
                        </div>
                    </li>
                    
                    <li style="margin-bottom: 1rem; display: flex; align-items: flex-start; gap: 0.75rem;">
                        <div class="icon-container icon-trophy icon-container-sm" style="flex-shrink: 0;">
                            <svg class="hero-icon hero-icon-sm" aria-hidden="true">
                                <use href="icons/sprite.svg#icon-trophy"></use>
                            </svg>
                        </div>
                        <div>
                            <strong>Results:</strong> Ist echter Impact wichtiger als gut auszusehen?
                        </div>
                    </li>
                </ul>
                <p style="margin-top: 15px;"><strong>You won't just get a label.</strong> You'll get a personalized roadmap showing exactly what you need to work on to increase your impact.</p>
            </div>

            <div class="intro-box philosophy">
                <h3><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Wir Verschenken Keine G√ºrtel</h3>
                <p><strong>"Ein Schwarzgurt ist nur ein Wei√ügurt, der nie aufgegeben hat."</strong></p>
                <p>Im brasilianischen Jiu-Jitsu verdienst du G√ºrtel durch demonstrierte Meisterschaft‚Äînicht durch Zeit. Ein Lila-Gurt ist nicht "besser" als ein Wei√ügurt. Sie haben nur verschiedene Techniken gemeistert.</p>
                <p><strong>This assessment is rigorous.</strong> Scoring 60% in Lila Belt doesn't unlock it‚Äîit shows you what you need to work on before you're ready. Wir sagen dir genau, welche √úbungen und Module du zuerst abschlie√üen musst.</p>
                <p style="margin-top: 10px; color: #b91c1c; font-weight: 600;">Meisterschaft √ºber Geschwindigkeit. Tiefe √ºber Breite. Echtes Wachstum √ºber falsche Credentials.</p>
            </div>

            <div class="intro-box">
                <h3><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-clock"></use></svg> Was Dich Erwartet</h3>
                <p><strong>50 Fragen √ºber 5 G√ºrtel-Level</strong> (10 Fragen pro G√ºrtel)</p>
                <p><strong>Zeit:</strong> 12-15 Minuten</p>
                <p><strong>Frage types:</strong> Echte Szenarien, Selbstbewertungen, schwere Entscheidungen</p>
                <p><strong>Ehrlichkeit erforderlich:</strong> W√§hle, was du <em>tats√§chlich tust</em>, nicht was du dir w√ºnschst zu tun. Das Assessment funktioniert nur, wenn du brutal ehrlich bist.</p>
            </div>

            <div class="intro-box learnings">
                <h3>‚ú® Was Du Lernen Wirst</h3>
                <p>By the end of this assessment, you'll know:</p>
                <ul>
                    <li>Your <strong>belt readiness score</strong> for each level</li>
                    <li>Specific <strong>gaps</strong> holding you back</li>
                    <li>Which <strong>exercises and modules</strong> to complete first</li>
                    <li>Your <strong>personalized 90-day roadmap</strong> to mastery</li>
                    <li>Whether you can skip ahead or need to build fundamentals</li>
                </ul>
            </div>

            <div class="nav-buttons" style="justify-content: center;">
                <button class="btn btn-primary" onclick="startAssessment()" style="font-size: 1.3em; padding: 20px 50px;">Assessment Starten ‚Üí</button>
            </div>
        </div>

        <!-- Frage Screen -->
        <div class="screen" id="screen-questions">
            <div class="section-header" id="sectionHeader">
                <span id="sectionIcon"></span>
                <span id="sectionTitle"></span>
            </div>
            
            <div class="question-card" id="questionContainer">
                <div class="question-number" id="questionNumber"></div>
                <div class="question-text" id="questionText"></div>
                <div class="scale-options" id="scaleOptions">
                    <!-- Scale will be generated by JavaScript -->
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="previousFrage()" id="prevBtn">‚Üê Zur√ºck</button>
                <button class="btn-primary" onclick="nextFrage()" id="nextBtn" disabled>Weiter ‚Üí</button>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn-tap" onclick="showAufgebenModal()"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Aufgeben</button>
                <p style="color: #64748b; font-size: 0.9em; margin-top: 10px;">Ready to start training? Or need a break?</p>
            </div>
        </div>
        
        <!-- Aufgeben Modal -->
        <div class="modal" id="tapModal" style="display: none;">
            <div class="modal-content">
                <h2 style="color: #1a365d; margin-bottom: 10px;"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Aufgeben?</h2>
                <p style="color: #64748b; margin-bottom: 30px;">W√§hle deinen n√§chsten Schritt:</p>
                
                <div class="tap-out-options">
                    <div class="tap-out-option" onclick="showBeltSelector()">
                        <div class="tap-out-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-flag"></use></svg></div>
                        <h3>Aufgeben ‚Üí Start Training</h3>
                        <p>Stop the assessment and jump to a belt level to start learning</p>
                    </div>
                    
                    <div class="tap-out-option" onclick="tapOutToGym()">
                        <div class="tap-out-icon">üíæ</div>
                        <h3>Aufgeben Out ‚Üí Back to Gym</h3>
                        <p>Save progress and return to the main hub</p>
                    </div>
                </div>
                
                <button class="btn-secondary" onclick="closeAufgebenModal()" style="margin-top: 20px;">‚Üê Zur√ºck zum Assessment</button>
            </div>
        </div>
        
        <!-- Belt Selector Modal -->
        <div class="modal" id="beltSelectorModal" style="display: none;">
            <div class="modal-content">
                <h2 style="color: #1a365d; margin-bottom: 10px;"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> W√§hle Deinen Startg√ºrtel</h2>
                <p style="color: #64748b; margin-bottom: 30px;">W√§hle den G√ºrtel, mit dem du trainieren willst:</p>
                
                <div class="belt-selector-grid">
                    <div class="belt-selector-card" onclick="tapToBelt('white-belt-de.html')">
                        <div class="belt-selector-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg></div>
                        <h3>Wei√ü Belt</h3>
                        <p>Vertrauen & Verletzlichkeit</p>
                    </div>
                    
                    <div class="belt-selector-card" onclick="tapToBelt('blue-belt-de.html')">
                        <div class="belt-selector-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg></div>
                        <h3>Blau Belt</h3>
                        <p>Gesunder Konflikt</p>
                    </div>
                    
                    <div class="belt-selector-card" onclick="tapToBelt('purple-belt-de.html')">
                        <div class="belt-selector-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg></div>
                        <h3>Lila Belt</h3>
                        <p>Commitment & Einbeziehung</p>
                    </div>
                    
                    <div class="belt-selector-card" onclick="tapToBelt('brown-belt-de.html')">
                        <div class="belt-selector-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg></div>
                        <h3>Braun Belt</h3>
                        <p>Verantwortlichkeit</p>
                    </div>
                    
                    <div class="belt-selector-card" onclick="tapToBelt('black-belt-de.html')">
                        <div class="belt-selector-icon"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg></div>
                        <h3>Schwarz Belt</h3>
                        <p>Fokus auf Ergebnisse</p>
                    </div>
                </div>
                
                <button class="btn-secondary" onclick="closeBeltSelector()" style="margin-top: 20px;">‚Üê Back</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="screen-results">
            <div class="results-content">
                <div class="belt-result">
                    <h2 style="color: #1a365d; font-size: 2.5em; margin-bottom: 10px;"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-bolt"></use></svg> Dein G√ºrtel-Readiness-Report</h2>
                    <div class="subtitle" style="color: #64748b; font-size: 1.3em; margin-bottom: 30px;">Rigorose Standards. Echte L√ºcken. Klarer Weg vorw√§rts.</div>
                </div>

                <div class="xp-earned">
                    <div><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-flag"></use></svg> Assessment Abgeschlossen!</div>
                    <div class="xp-amount">+500 XP</div>
                    <div>Alle G√ºrtel bewertet</div>
                </div>

                <h3 style="color: #1a365d; margin: 40px 0 20px; font-size: 1.8em;"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-academic-cap"></use></svg> Deine G√ºrtel-f√ºr-G√ºrtel Readiness</h3>
                <div id="beltReadinessCards"></div>

                <h3 style="color: #1a365d; margin: 40px 0 20px; font-size: 1.8em;"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-chart-bar"></use></svg> Dein 5-Dysfunktionen-Breakdown</h3>
                <div class="dysfunction-scores" id="dysfunctionScores"></div>

                <div class="next-steps">
                    <h3><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-flag"></use></svg> Dein 90-Tage-Trainings-Roadmap</h3>
                    <div id="trainingRoadmap"></div>
                </div>

                <div class="nav-buttons">
                    <a href="gym-dashboard-de.html" class="btn-primary" onclick="goToGymDashboard(); return false;">Starte Dein Training ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 40 Frages - 8 per dysfunction
        const questions = [
            // Academic Cap WHITE BELT - TRUST (10 questions)
            // Preview of Wei√ü Belt: Vulnerability-based trust
            { 
                id: 1, 
                section: 'white', 
                type: 'scenario',
                text: 'You\'re in a meeting. Someone asks, "Who\'s struggling with [current challenge]?" What do you do?', 
                scale: [
                    'Stay silent‚Äîadmitting struggle shows weakness',
                    'Wait to see if others speak first',
                    'Acknowledge vaguely: "It\'s challenging for everyone"',
                    'Raise your hand and briefly share',
                    'Immediately share specific struggles and ask for help'
                ]
            },
            {
                id: 2,
                section: 'white',
                type: 'scale',
                text: 'When you make a significant mistake at work, how quickly do you admit it?',
                scale: [
                    'Hide it and hope no one notices',
                    'Only if directly asked',
                    'Eventually, after trying to fix it myself',
                    'Quickly‚Äîwithin hours or a day',
                    'Immediately‚Äîtransparency is non-negotiable'
                ]
            },
            {
                id: 3,
                section: 'white',
                type: 'binary',
                text: 'True or False: Your colleagues know about at least one personal challenge you\'re currently facing outside of work.',
                scale: [
                    'Absolutely false‚ÄîI never share personal stuff',
                    'Mostly false‚Äîthey might know vague details',
                    'Partially true‚Äîclose colleagues know some things',
                    'Mostly true‚Äîmost people I work with know',
                    'Completely true‚ÄîI\'m open about my life'
                ]
            },
            {
                id: 4,
                section: 'white',
                type: 'scenario',
                text: 'A colleague asks for help on something you also find confusing. What\'s your honest first thought?',
                scale: [
                    '"If I admit I don\'t know either, I\'ll look incompetent"',
                    '"Let me figure it out myself first, then help"',
                    '"Maybe we can muddle through it together"',
                    '"Good‚Äîwe can learn this together"',
                    '"Perfect‚Äîvulnerability builds trust. Let\'s figure it out."'
                ]
            },
            {
                id: 5,
                section: 'white',
                type: 'scale',
                text: 'How often do you ask others for help when you\'re stuck?',
                scale: [
                    'Almost never‚ÄîI figure things out alone',
                    'Rarely‚Äîonly when desperate',
                    'Sometimes‚Äîbut I hesitate',
                    'Often‚Äîwhen I genuinely need it',
                    'Regularly‚Äîasking for help is a strength'
                ]
            },
            {
                type: 'enhancement',
                section: 'white',
                title: 'Hand Raised Strength in Asking',
                content: `
                    <p><strong>The ask-for-help advantage:</strong> Harvard research shows that people who actively ask for help are perceived as MORE competent, not less. Why? It signals confidence and self-awareness.</p>
                    <p><strong>üí° Did you know?</strong> Top performers ask for help 3x more often than average performers. They know that speed beats pride.</p>
                    <blockquote>"The smartest person in the room is the room." ‚Äî David Weinberger</blockquote>
                `
            },
            {
                id: 6,
                section: 'white',
                type: 'scenario',
                text: 'Someone publicly admits they\'re overwhelmed and behind on commitments. How do you respond?',
                scale: [
                    'Internally judge them for poor planning',
                    'Feel awkward, stay quiet',
                    'Acknowledge it briefly and move on',
                    'Thank them for transparency',
                    'Celebrate their courage and offer support immediately'
                ]
            },
            {
                id: 7,
                section: 'white',
                type: 'scale',
                text: 'How much do you know about what matters most to your colleagues outside of work?',
                scale: [
                    'Almost nothing‚Äîwe keep it professional',
                    'Basic facts (kids, hobbies)',
                    'Some personal details',
                    'Good understanding of their lives',
                    'Deep knowledge‚ÄîI know their dreams and struggles'
                ]
            },
            {
                id: 8,
                section: 'white',
                type: 'binary',
                text: 'When someone disagrees with you, do you default to assuming positive intent?',
                scale: [
                    'No‚ÄîI usually assume they\'re political or wrong',
                    'Rarely‚ÄîI\'m skeptical of their motives',
                    'Depends on the person',
                    'Usually‚ÄîI try to assume good intent',
                    'Always‚Äîpositive intent is my default'
                ]
            },
            {
                id: 9,
                section: 'white',
                type: 'scenario',
                text: 'In a meeting, someone asks a question you don\'t know the answer to. What do you say?',
                scale: [
                    'Deflect: "Let me get back to you on that"',
                    'Fake it: Give a vague, confident-sounding answer',
                    'Pivot: "That\'s a great question for [someone else]"',
                    'Admit it: "I don\'t know the answer to that"',
                    'Lean in: "I don\'t know‚Äîlet\'s figure it out together right now"'
                ]
            },
            {
                id: 10,
                section: 'white',
                type: 'scale',
                text: 'How vulnerable are you about your weaknesses in front of others?',
                scale: [
                    'Never admit weaknesses',
                    'Rarely acknowledge limits',
                    'Sometimes admit uncertainties',
                    'Often share what I\'m working on',
                    'Freely admit gaps and ask for coaching'
                ]
            },
            {
                type: 'enhancement',
                section: 'white',
                title: 'üî¨ The Science of Vulnerability',
                content: `
                    <p><strong>Why vulnerability unlocks trust:</strong> Research by Dr. Bren√© Braun shows that leaders who openly admit mistakes create psychologically safe teams that outperform by 27% (Google's Project Aristotle).</p>
                    <p><strong>üí° Did you know?</strong> Teams where leaders share uncertainties first see 3x higher rates of peer vulnerability‚Äîcreating a cascade of trust.</p>
                    <blockquote>"Vulnerability is not weakness; it's our greatest measure of courage." ‚Äî Bren√© Braun</blockquote>
                    <p><strong><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-bolt"></use></svg> Quick Win:</strong> This week, start one meeting by saying "Here's something I'm struggling with..." and ask for input. Watch what happens.</p>
                `
            },

            // BLUE BELT - CONFLICT/DEBATE (10 questions)
            {
                id: 11,
                section: 'blue',
                type: 'scenario',
                text: 'In a meeting, you strongly disagree with the direction being proposed. What do you do?',
                scale: [
                    'Stay silent‚Äînot worth the conflict',
                    'Hint vaguely: "Have we considered alternatives?"',
                    'Share concerns privately with one person after',
                    'Respectfully voice disagreement in the moment',
                    'Directly challenge the idea and advocate for debate'
                ]
            },
            {
                id: 12,
                section: 'blue',
                type: 'scale',
                text: 'When someone challenges your idea directly, what\'s your honest first reaction?',
                scale: [
                    'Feel personally attacked, get defensive',
                    'Uncomfortable but hide it',
                    'Neutral‚Äîdepends on how they do it',
                    'Curious‚Äîthey might have a point',
                    'Energized‚Äîthis is how we find the truth'
                ]
            },
            {
                id: 13,
                section: 'blue',
                type: 'scenario',
                text: 'You notice everyone in the meeting nodding in agreement, but something feels off. What do you do?',
                scale: [
                    'Go along with it‚Äîprobably fine',
                    'Privately wonder if people really agree',
                    'Vaguely probe: "Everyone good with this?"',
                    'Ask directly: "Are we really aligned or just being polite?"',
                    'Call it out: "This feels like artificial harmony. What\'s the real concern?"'
                ]
            },
            {
                id: 14,
                section: 'blue',
                type: 'scale',
                text: 'How do you feel during heated, passionate debates about ideas (not personal attacks)?',
                scale: [
                    'Extremely uncomfortable‚Äîwant to escape',
                    'Anxious and stressed throughout',
                    'Tolerate it but don\'t enjoy it',
                    'Engaged and often energized',
                    'Fully alive‚Äîthis is when great ideas emerge'
                ]
            },
            {
                id: 15,
                section: 'blue',
                type: 'binary',
                text: 'A colleague brings up a contentious topic everyone has been avoiding. What\'s your reaction?',
                scale: [
                    'Annoyed‚Äîwhy stir the pot?',
                    'Uncomfortable but stay quiet',
                    'Neutral‚Äîdepends on the topic',
                    'Relieved someone said it',
                    'Grateful‚Äîthis needed to surface'
                ]
            },
            {
                type: 'enhancement',
                section: 'blue',
                title: 'üß† The Debate Mindset',
                content: `
                    <p><strong>Strong opinions, weakly held:</strong> The best debaters update their views when presented with better evidence. Intel's Andy Grove called this "constructive confrontation"‚Äîthe engine of innovation.</p>
                    <p><strong>üí° Did you know?</strong> Ray Dalio's Bridgewater uses "idea meritocracy" where the best idea wins regardless of hierarchy. This radical transparency has generated 20%+ annual returns for decades.</p>
                    <blockquote>"In a good debate, everyone wins‚Äîbecause the truth emerges." ‚Äî Adam Grant</blockquote>
                `
            },
            {
                id: 16,
                section: 'blue',
                type: 'scenario',
                text: 'After a difficult conversation where you debated strongly, how do you typically feel?',
                scale: [
                    'Drained and regretful‚Äîwish I stayed quiet',
                    'Relieved it\'s over, hope no damage done',
                    'Neutral‚Äîdepends on the outcome',
                    'Satisfied we had the conversation',
                    'Energized‚Äîclarity came from tension'
                ]
            },
            {
                id: 17,
                section: 'blue',
                type: 'scale',
                text: 'How often do you bring up uncomfortable topics others are avoiding?',
                scale: [
                    'Never‚Äîtoo risky to my reputation',
                    'Rarely, only if absolutely critical',
                    'Sometimes, when I feel safe enough',
                    'Often‚Äîsomeone needs to say it',
                    'Regularly‚Äîsurfacing tension creates clarity'
                ]
            },
            {
                id: 18,
                section: 'blue',
                type: 'scenario',
                text: 'Someone publicly disagrees with you in a way that makes you look bad. What do you do?',
                scale: [
                    'Defend myself and discredit their point',
                    'Feel embarrassed, get defensive',
                    'Acknowledge it but move on quickly',
                    'Thank them and engage with their critique',
                    'Appreciate it openly: "This is exactly the debate we need"'
                ]
            },
            {
                id: 19,
                section: 'blue',
                type: 'binary',
                text: 'When you sense conflict brewing beneath the surface, what do you do?',
                scale: [
                    'Ignore it‚Äîhope it goes away',
                    'Notice it but don\'t address it',
                    'Sometimes bring it up gently',
                    'Often name it directly',
                    'Always call it out: "Let\'s talk about what we\'re not talking about"'
                ]
            },
            {
                id: 20,
                section: 'blue',
                type: 'scale',
                text: 'How comfortable are you with people passionately disagreeing with each other (not with you)?',
                scale: [
                    'Very uncomfortable‚Äîfeels toxic and unprofessional',
                    'Prefer polite, calm discussions',
                    'Can tolerate it when necessary',
                    'Comfortable‚Äîit\'s healthy debate',
                    'Love it‚Äîthis is how the best ideas win'
                ]
            },
            {
                type: 'enhancement',
                section: 'blue',
                title: '‚öîÔ∏è Why Conflict Fuels Performance',
                content: `
                    <p><strong>The conflict paradox:</strong> Teams that engage in passionate, ideological debate make better decisions 58% of the time compared to "polite" teams (Stanford Leadership Research).</p>
                    <p><strong>üí° Did you know?</strong> Pixar's "Braintrust" meetings‚Äîwhere brutal honesty is expected‚Äîare credited with saving every movie from mediocrity. Ed Catmull says conflict is "not a necessary evil, it's a necessary good."</p>
                    <blockquote>"If two people always agree, one of them is unnecessary." ‚Äî William Wrigley Jr.</blockquote>
                    <p><strong><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-bolt"></use></svg> Quick Win:</strong> Weiter time you disagree, try this: "I have a different view. Can I challenge that?" Then debate the idea, not the person.</p>
                `
            },

            // PURPLE BELT - COMMITMENT/BUY-IN (10 questions)
            {
                id: 21,
                section: 'purple',
                type: 'scenario',
                text: 'A decision is made that you disagree with. What do you do after the meeting?',
                scale: [
                    'Passively resist‚Äîdo the minimum or ignore it',
                    'Comply externally but complain privately',
                    'Follow it skeptically, hedging my bets',
                    'Commit despite reservations',
                    'Fully commit publicly: "We decided this, let\'s execute"'
                ]
            },
            {
                id: 22,
                section: 'purple',
                type: 'scale',
                text: 'How often do you leave meetings without clarity on what was actually decided?',
                scale: [
                    'Almost always‚Äînothing gets decided',
                    'Often vague or ambiguous',
                    'Sometimes clear, sometimes not',
                    'Usually clear on decisions',
                    'Always crystal clear‚Äîwe don\'t leave until we decide'
                ]
            },
            {
                id: 23,
                section: 'purple',
                type: 'binary',
                text: 'When you\'re not 100% certain a decision is right, do you still commit to it?',
                scale: [
                    'No‚ÄîI wait for certainty or better options',
                    'Hesitate and delay taking action',
                    'Move forward reluctantly',
                    'Commit despite uncertainty',
                    'Embrace it: "Disagree and commit" is my default'
                ]
            },
            {
                id: 24,
                section: 'purple',
                type: 'scenario',
                text: 'You\'re in a meeting where everyone is nodding but no one is committing to action. What do you do?',
                scale: [
                    'Go along with the vagueness',
                    'Notice it but stay quiet',
                    'Ask gently: "So what\'s the plan?"',
                    'Push for clarity: "Who\'s doing what by when?"',
                    'Force commitment: "Before we leave‚Äîlet\'s get specific on next steps"'
                ]
            },
            {
                id: 25,
                section: 'purple',
                type: 'scale',
                text: 'How clear are you on the top 3 priorities for your work right now?',
                scale: [
                    'No idea‚Äîeverything feels urgent',
                    'Vaguely aware of priorities',
                    'Somewhat clear but shifting',
                    'Very clear on what matters',
                    'Absolute clarity‚ÄîI can recite them'
                ]
            },
            {
                type: 'enhancement',
                section: 'purple',
                title: 'üöÄ Clarity = Speed',
                content: `
                    <p><strong>The power of precision:</strong> When Intel's Andy Grove asked "What are the 3 most important things?", everything else was noise. This ruthless prioritization enabled Intel to pivot from memory to processors‚Äîand dominate for decades.</p>
                    <p><strong>üí° Did you know?</strong> Warren Buffett's 5/25 rule: Write down 25 goals, circle the top 5, and avoid the other 20 at all costs. Why? They're dangerous distractions.</p>
                    <blockquote>"The main thing is to keep the main thing the main thing." ‚Äî Stephen Covey</blockquote>
                `
            },
            {
                id: 26,
                section: 'purple',
                type: 'binary',
                text: 'After a decision is made, how quickly do you act on it?',
                scale: [
                    'Days/weeks of delay‚Äîwaiting to see if it sticks',
                    'Slow to start, cautious',
                    'Moderate pace',
                    'Move quickly within a day',
                    'Immediate execution‚Äîwe decided, I go'
                ]
            },
            {
                id: 27,
                section: 'purple',
                type: 'scale',
                text: 'How often do you revisit or second-guess decisions after they\'re made?',
                scale: [
                    'Constantly rehash decisions',
                    'Often question and reconsider',
                    'Sometimes revisit them',
                    'Rarely unless new data emerges',
                    'Never‚Äîwe decided, we commit'
                ]
            },
            {
                id: 28,
                section: 'purple',
                type: 'scenario',
                text: 'When explaining a decision to someone who wasn\'t in the meeting, how do you frame it?',
                scale: [
                    '"They decided..." (distancing)',
                    'Ambiguous about who owns it',
                    'Neutral: "The decision was..."',
                    'Own it: "We decided..."',
                    'Fully advocate: "Here\'s why we\'re doing this..."'
                ]
            },
            {
                id: 29,
                section: 'purple',
                type: 'scale',
                text: 'How comfortable are you making decisions without perfect information?',
                scale: [
                    'Need 100% certainty to decide',
                    'Very uncomfortable with ambiguity',
                    'Prefer more data but can move',
                    'Comfortable at 70% certainty',
                    'Thrive in ambiguity‚Äîbias to action'
                ]
            },
            {
                id: 30,
                section: 'purple',
                type: 'binary',
                text: 'When priorities shift unexpectedly, what\'s your reaction?',
                scale: [
                    'Frustrated and resistant to change',
                    'Annoyed but eventually comply',
                    'Neutral‚Äîjust another shift',
                    'Adaptable‚ÄîI adjust quickly',
                    'Energized‚Äînew data, new direction, let\'s go'
                ]
            },
            {
                type: 'enhancement',
                section: 'purple',
                title: 'Flag The Commitment Edge',
                content: `
                    <p><strong>Why clarity creates velocity:</strong> Amazon's "Disagree and Commit" principle allows teams to move at high speed without consensus. Jeff Bezos says, "If you know the direction is roughly right, it's far better to be fast than perfect."</p>
                    <p><strong>üí° Did you know?</strong> Studies show that teams with clear commitments execute 2.3x faster than teams stuck in consensus-seeking. The key: debate fiercely, then commit fully.</p>
                    <blockquote>"If you have conviction on a particular direction, have the courage to disagree and commit." ‚Äî Jeff Bezos</blockquote>
                    <p><strong><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-bolt"></use></svg> Quick Win:</strong> After your next decision, practice saying: "I disagreed with this, but we decided‚Äîso I'm all in." Notice how it shifts your energy.</p>
                `
            },

            // BROWN BELT - ACCOUNTABILITY/STANDARDS (10 questions)
            {
                id: 31,
                section: 'brown',
                type: 'scenario',
                text: 'A colleague misses a commitment that affects your work. What do you do?',
                scale: [
                    'Say nothing‚Äînot my place to say anything',
                    'Complain to others but not to them',
                    'Hint at it indirectly: "Hey, any update on that?"',
                    'Address it directly 1-on-1 with empathy',
                    'Call it out immediately: "We had a commitment‚Äîwhat happened?"'
                ]
            },
            {
                id: 32,
                section: 'brown',
                type: 'scale',
                text: 'How do you hold yourself accountable for your own commitments?',
                scale: [
                    'Often miss deadlines, make excuses',
                    'Sometimes follow through',
                    'Usually deliver on commitments',
                    'Consistently hit what I commit to',
                    'Religiously track and deliver‚Äîmy word is sacred'
                ]
            },
            {
                id: 33,
                section: 'brown',
                type: 'scenario',
                text: 'You realize you\'re going to miss a deadline. What do you do?',
                scale: [
                    'Hope no one notices or asks',
                    'Make excuses when asked',
                    'Apologize vaguely when it comes up',
                    'Proactively acknowledge and propose new timeline',
                    'Flag it early with plan: "I\'m behind‚Äîhere\'s what I\'ll do"'
                ]
            },
            {
                id: 34,
                section: 'brown',
                type: 'binary',
                text: 'Someone who delivers great results consistently exhibits problematic behavior. How comfortable are you addressing it?',
                scale: [
                    'Never risk it‚Äîthey\'re too valuable',
                    'Very uncomfortable, likely avoid it',
                    'Hesitant but might if it escalates',
                    'Uncomfortable but will address it',
                    'Comfortable‚Äîhigh performance doesn\'t excuse bad behavior'
                ]
            },
            {
                id: 35,
                section: 'brown',
                type: 'scale',
                text: 'When giving tough feedback, how direct are you?',
                scale: [
                    'Use "compliment sandwich" to soften it',
                    'Very indirect and cautious',
                    'Somewhat direct with lots of hedging',
                    'Direct and empathetic',
                    'Radically candid: direct AND kind'
                ]
            },
            {
                type: 'enhancement',
                section: 'brown',
                title: 'Flag Radical Candor Works',
                content: `
                    <p><strong>The candor advantage:</strong> Kim Scott's research at Google found that "Radical Candor"‚Äîcaring personally while challenging directly‚Äîdrives both performance and retention. Avoiding tough conversations is the real cruelty.</p>
                    <p><strong>üí° Did you know?</strong> Netflix's culture of "radical honesty" allows them to move faster than competitors. Reed Hastings says, "Adequate performance gets a generous severance package."</p>
                    <blockquote>"Feedback is a gift. Ideas are fragile. Great teams protect ideas by stress-testing them early." ‚Äî Ed Catmull, Pixar</blockquote>
                `
            },
            {
                id: 36,
                section: 'brown',
                type: 'binary',
                text: 'How often do you let small issues slide to "keep the peace"?',
                scale: [
                    'Constantly‚Äîsmall stuff isn\'t worth conflict',
                    'Often let things go',
                    'Sometimes address, sometimes don\'t',
                    'Usually address what matters',
                    'Always address issues early when they\'re small'
                ]
            },
            {
                id: 37,
                section: 'brown',
                type: 'scenario',
                text: 'You\'re in a meeting where someone receives critical feedback. What\'s your reaction?',
                scale: [
                    'Uncomfortable‚Äîfeel bad for them',
                    'Sympathize, maybe soften the feedback',
                    'Stay neutral and quiet',
                    'Support the feedback if it\'s fair',
                    'Reinforce it: "I\'ve seen this too‚Äîhere\'s an example"'
                ]
            },
            {
                id: 38,
                section: 'brown',
                type: 'scale',
                text: 'When you notice a performance issue, how quickly do you address it?',
                scale: [
                    'Avoid until it becomes a crisis',
                    'Wait weeks or months hoping it improves',
                    'Eventually bring it up',
                    'Address within a few days',
                    'Address immediately‚Äîearly is easier'
                ]
            },
            {
                id: 39,
                section: 'brown',
                type: 'binary',
                text: 'Someone asks you to lower your standards "just this once." What do you do?',
                scale: [
                    'Give in‚Äînot worth the fight',
                    'Reluctantly compromise',
                    'Negotiate‚Äîdepends on context',
                    'Hold firm on core standards',
                    'Refuse: "Standards aren\'t negotiable‚Äîhere\'s why"'
                ]
            },
            {
                id: 40,
                section: 'brown',
                type: 'scale',
                text: 'How comfortable are you being the "bad guy" who holds the line on quality?',
                scale: [
                    'Very uncomfortable‚ÄîI avoid it',
                    'Don\'t like it, often cave',
                    'Tolerate it when necessary',
                    'Comfortable with it',
                    'Embrace it‚Äîsomeone has to care about standards'
                ]
            },
            {
                type: 'enhancement',
                section: 'brown',
                title: 'Bolt Verantwortlichkeit Creates Safety',
                content: `
                    <p><strong>The accountability paradox:</strong> Teams with high accountability report higher psychological safety, not lower. Why? Because people trust that standards are real and consistently applied.</p>
                    <p><strong>üí° Did you know?</strong> Kim Scott's research on "Radical Candor" shows that direct feedback‚Äîdelivered with care‚Äîis a gift. Teams with candor cultures have 50% lower turnover and 3x innovation rates.</p>
                    <blockquote>"Clear is kind. Unclear is unkind." ‚Äî Bren√© Braun</blockquote>
                    <p><strong><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-bolt"></use></svg> Quick Win:</strong> Weiter time you notice something off, say: "I care about you and our work, so I need to tell you..." Then be direct and kind.</p>
                `
            },

            // BLACK BELT - RESULTS/OUTCOMES (10 questions)
            {
                id: 41,
                section: 'black',
                type: 'scenario',
                text: 'Your personal goal conflicts with what would create the best outcome. What do you prioritize?',
                scale: [
                    'Always my goal‚ÄîI worked hard for this',
                    'Usually prioritize my goals',
                    'Depends on the stakes',
                    'Usually prioritize the better outcome',
                    'Always prioritize the outcome over my ego'
                ]
            },
            {
                id: 42,
                section: 'black',
                type: 'scale',
                text: 'How do you measure your own success?',
                scale: [
                    'My individual metrics and achievements',
                    'Mostly personal accomplishments',
                    'Mix of personal and collective impact',
                    'Mostly collective outcomes',
                    'Purely by collective results‚Äîdid we win?'
                ]
            },
            {
                id: 43,
                section: 'black',
                type: 'binary',
                text: 'The group succeeds, but you didn\'t contribute much. How do you feel?',
                scale: [
                    'Disappointed‚ÄîI wasn\'t central to the win',
                    'Slightly left out or diminished',
                    'Neutral‚Äîa win is a win',
                    'Happy for everyone',
                    'Genuinely celebrate‚Äîthe outcome is what matters'
                ]
            },
            {
                id: 44,
                section: 'black',
                type: 'scenario',
                text: 'You\'re asked to drop your project for something more impactful. What\'s your reaction?',
                scale: [
                    'Very resistant‚ÄîI\'ve invested too much',
                    'Reluctant but eventually comply',
                    'Willing if truly necessary',
                    'Readily shift priorities',
                    'Immediately reallocate‚Äîimpact > attachment'
                ]
            },
            {
                id: 45,
                section: 'black',
                type: 'scale',
                text: 'When discussing success, do you say "I" or "we"?',
                scale: [
                    'Almost always "I"‚ÄîI own my wins',
                    'Mostly "I" with some "we"',
                    'Mix of both',
                    'Mostly "we"‚Äîcredit the collective',
                    'Always "we"‚Äîeven when it was mostly me'
                ]
            },
            {
                type: 'enhancement',
                section: 'black',
                title: 'üèÖ The "We" Advantage',
                content: `
                    <p><strong>Credit magnifies impact:</strong> Research on team dynamics shows that leaders who say "we" instead of "I" inspire 67% higher engagement and loyalty. People run through walls for those who share credit.</p>
                    <p><strong>üí° Did you know?</strong> Coach John Wooden never said "I won"‚Äîalways "We won." His UCLA teams won 10 NCAA championships in 12 years. The culture of collective glory created unstoppable momentum.</p>
                    <blockquote>"There is no limit to what you can accomplish if you don't care who gets the credit." ‚Äî Harry S. Truman</blockquote>
                `
            },
            {
                id: 46,
                section: 'black',
                type: 'binary',
                text: 'A colleague gets recognition for work you feel you deserved credit for. What\'s your reaction?',
                scale: [
                    'Resentful‚ÄîI deserved that recognition',
                    'Disappointed and frustrated internally',
                    'Neutral‚Äîthese things happen',
                    'Happy for them',
                    'Genuinely celebrate their recognition'
                ]
            },
            {
                id: 47,
                section: 'black',
                type: 'scale',
                text: 'Can you name the most important metric or goal for your team/organization right now?',
                scale: [
                    'No idea what it is',
                    'Vaguely aware of it',
                    'Know it but not focused on it',
                    'Clear and actively track it',
                    'Obsessed with it‚Äîcheck it daily'
                ]
            },
            {
                id: 48,
                section: 'black',
                type: 'scenario',
                text: 'You have to choose: look good personally or achieve the best outcome. Which do you pick?',
                scale: [
                    'Looking good‚Äîreputation matters most',
                    'Usually protect my image',
                    'Depends on the situation',
                    'Usually choose the outcome',
                    'Always choose the outcome over ego'
                ]
            },
            {
                id: 49,
                section: 'black',
                type: 'binary',
                text: 'How often do you check: "Did my work today move us toward the goal?"',
                scale: [
                    'Never‚ÄîI just do my job',
                    'Rarely think about it',
                    'Sometimes reflect on it',
                    'Often ask myself this',
                    'Every single day‚Äîit\'s my filter'
                ]
            },
            {
                id: 50,
                section: 'black',
                type: 'scale',
                text: 'When the outcome is achieved, how much credit do you need?',
                scale: [
                    'Need clear attribution to my contribution',
                    'Want recognition for my part',
                    'Neutral‚Äîsome acknowledgment is nice',
                    'Don\'t need much credit',
                    'Need zero credit‚Äîthe outcome is the reward'
                ]
            },
            {
                type: 'enhancement',
                section: 'black',
                title: 'Trophy Results Over Ego',
                content: `
                    <p><strong>The results-first mindset:</strong> Research on high-performing teams reveals that obsession with collective outcomes (not individual glory) is the #1 predictor of sustained excellence.</p>
                    <p><strong>üí° Did you know?</strong> Bill Walsh transformed the 49ers by demanding "the score takes care of the ego." Teams that track collective goals daily outperform ego-driven teams by 44%.</p>
                    <blockquote>"When everyone is thinking alike, then no one is thinking." ‚Äî Benjamin Franklin (on ego vs. outcome)</blockquote>
                    <p><strong><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-bolt"></use></svg> Quick Win:</strong> Every morning this week, ask yourself: "What's the ONE thing I can do today that moves us toward our goal?" Then do it first.</p>
                `
            }
        ];

        let currentFrage = 0;
        let answers = {};
        let sectionScores = { white: 0, blue: 0, purple: 0, brown: 0, black: 0, trust: 0, conflict: 0, commitment: 0, accountability: 0, results: 0 };

        function startAssessment() {
            currentFrage = 0;
            answers = {};
            // Show progress container when starting
            document.getElementById('progressContainer').style.display = 'block';
            // Hide intro screen and show questions screen
            document.getElementById('screen-intro').classList.remove('active');
            document.getElementById('screen-questions').classList.add('active');
            showFrage();
        }

        function showFrage() {
            if (!questions || questions.length === 0) {
                console.error('Questions array not loaded');
                return;
            }
            if (currentFrage >= questions.length) {
                console.error('Current question index out of bounds');
                return;
            }
            
            const item = questions[currentFrage];
            
            // Check if this is an enhancement box
            if (item.type === 'enhancement') {
                // Show enhancement box
                document.getElementById('questionContainer').style.display = 'none';
                
                let enhancementBox = document.getElementById('enhancementBox');
                if (!enhancementBox) {
                    enhancementBox = document.createElement('div');
                    enhancementBox.id = 'enhancementBox';
                    enhancementBox.className = 'enhancement-box';
                    document.querySelector('.question-card').appendChild(enhancementBox);
                }
                
                enhancementBox.style.display = 'block';
                enhancementBox.innerHTML = `
                    <h3>${item.title}</h3>
                    ${item.content}
                `;
                
                // Auto-enable next button for enhancement boxes
                document.getElementById('nextBtn').disabled = false;
                document.getElementById('nextBtn').textContent = 'Continue ‚Üí';
                document.getElementById('prevBtn').disabled = currentFrage === 0;
                
                return;
            }
            
            // Hide enhancement box if it exists
            const enhancementBox = document.getElementById('enhancementBox');
            if (enhancementBox) {
                enhancementBox.style.display = 'none';
            }
            document.getElementById('questionContainer').style.display = 'block';
            
            const q = item;
            
            // Update section header
            const sectionIcons = { white: 'Academic Cap', blue: 'Academic Cap', purple: 'Academic Cap', brown: 'Academic Cap', black: 'Academic Cap', trust: 'Academic Cap', conflict: 'Academic Cap', commitment: 'Academic Cap', accountability: 'Academic Cap', results: 'Academic Cap' };
            const sectionNames = { white: 'Wei√ü Belt', blue: 'Blau Belt', purple: 'Lila Belt', brown: 'Braun Belt', black: 'Schwarz Belt', trust: 'Trust', conflict: 'Conflict', commitment: 'Commitment', accountability: 'Verantwortlichkeit', results: 'Results' };
            
            document.getElementById('sectionIcon').textContent = sectionIcons[q.section];
            document.getElementById('sectionTitle').textContent = sectionNames[q.section];
            
            // Update section progress indicators
            updateSectionProgress();
            
            // Update question
            document.getElementById('questionNumber').textContent = `Frage ${currentFrage + 1} of ${questions.length}`;
            document.getElementById('questionText').textContent = q.text;
            
            // Create scale
            const scaleContainer = document.getElementById('scaleOptions');
            scaleContainer.innerHTML = '';
            
            q.scale.forEach((label, index) => {
                const value = index + 1;
                const option = document.createElement('div');
                option.className = 'scale-option';
                if (answers[q.id] === value) {
                    option.classList.add('selected');
                }
                
                option.innerHTML = `
                    <input type="radio" name="q${q.id}" value="${value}" id="q${q.id}_${value}">
                    <div class="scale-value">${value}</div>
                    <div class="scale-label">${label}</div>
                `;
                
                option.onclick = (evt) => selectOption(q.id, value, evt);
                scaleContainer.appendChild(option);
            });
            
            // Update buttons
            document.getElementById('prevBtn').disabled = currentFrage === 0;
            document.getElementById('nextBtn').disabled = !answers[q.id];
            document.getElementById('nextBtn').textContent = currentFrage === questions.length - 1 ? 'Finish ‚Üí' : 'Weiter ‚Üí';
            
            updateProgress();
        }

        function selectOption(questionId, value, evt) {
            answers[questionId] = value;
            
            // Update UI
            document.querySelectorAll('.scale-option').forEach(opt => opt.classList.remove('selected'));
            const clicked = evt?.currentTarget || evt?.target?.closest?.('.scale-option');
            if (clicked) {
                clicked.classList.add('selected');
            }
            
            document.getElementById('nextBtn').disabled = false;
        }

        function updateProgress() {
            const totalFrages = questions.filter(q => q.type !== 'enhancement').length;
            const questionsCompleted = questions.slice(0, currentFrage + 1).filter(q => q.type !== 'enhancement').length;
            const progress = (questionsCompleted / totalFrages) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Frage ${questionsCompleted} of ${totalFrages}`;
        }

        function updateSectionProgress() {
            const sections = ['trust', 'conflict', 'commitment', 'accountability', 'results'];
            const currentSection = questions[currentFrage].section;
            const sectionItems = document.querySelectorAll('.section-item');
            
            sectionItems.forEach((item, index) => {
                item.classList.remove('active', 'completed');
                
                const section = sections[index];
                const sectionFrages = questions.filter(q => q.section === section);
                const sectionAnswered = sectionFrages.filter(q => answers[q.id]).length;
                
                if (section === currentSection) {
                    item.classList.add('active');
                } else if (sectionAnswered === sectionFrages.length) {
                    item.classList.add('completed');
                }
            });
        }

        function nextFrage() {
            if (currentFrage < questions.length - 1) {
                currentFrage++;
                showFrage();
            } else {
                calculateResults();
            }
        }

        function previousFrage() {
            if (currentFrage > 0) {
                currentFrage--;
                showFrage();
            }
        }
        
        // Aufgeben functionality
        function showAufgebenModal() {
            document.getElementById('tapModal').style.display = 'flex';
        }
        
        function closeAufgebenModal() {
            document.getElementById('tapModal').style.display = 'none';
        }
        
        function showBeltSelector() {
            closeAufgebenModal();
            document.getElementById('beltSelectorModal').style.display = 'flex';
        }
        
        function closeBeltSelector() {
            document.getElementById('beltSelectorModal').style.display = 'none';
            showAufgebenModal();
        }
        
        function tapToBelt(beltFile) {
            // Save that user completed assessment
            localStorage.setItem('assessmentCompleted', 'partial');
            localStorage.setItem('assessmentAnswers', JSON.stringify(answers));
            localStorage.setItem('assessmentProgress', currentFrage);
            
            // Unlock all belts since they've tapped to one
            localStorage.setItem('beltsUnlocked', 'true');
            
            // Navigate to the belt they chose
            window.location.href = beltFile;
        }
        
        function tapOutToGym() {
            // Save progress
            localStorage.setItem('assessmentAnswers', JSON.stringify(answers));
            localStorage.setItem('assessmentProgress', currentFrage);
            
            // Return to main page
            window.location.href = 'index.de.html';
        }
        
        function goToGymDashboard() {
            // Save assessment completion
            localStorage.setItem('assessmentCompleted', 'true');
            localStorage.setItem('assessmentCompletedDate', new Date().toISOString());
            
            // Navigate to German gym dashboard
            window.location.href = 'gym-dashboard-de.html';
        }

        function calculateResults() {
            // Calculate section scores for each belt (10 questions each)
            const beltSections = {
                white: questions.filter(q => q.section === 'white' && q.type !== 'enhancement'),
                blue: questions.filter(q => q.section === 'blue' && q.type !== 'enhancement'),
                purple: questions.filter(q => q.section === 'purple' && q.type !== 'enhancement'),
                brown: questions.filter(q => q.section === 'brown' && q.type !== 'enhancement'),
                black: questions.filter(q => q.section === 'black' && q.type !== 'enhancement')
            };

            const beltScores = {};
            Object.entries(beltSections).forEach(([belt, beltFrages]) => {
                const beltAnswers = beltFrages.map(q => answers[q.id]);
                const average = beltAnswers.reduce((a, b) => a + b, 0) / beltAnswers.length;
                const percentage = (average / 5) * 100;
                beltScores[belt] = { average, percentage };
            });

            // Also calculate the 5 dysfunctions (same as belts for now)
            sectionScores = {
                trust: beltScores.white.average,
                conflict: beltScores.blue.average,
                commitment: beltScores.purple.average,
                accountability: beltScores.brown.average,
                results: beltScores.black.average
            };

            displayResults(beltScores);
        }

        function displayResults(beltScores) {
            // Display belt readiness cards
            const beltReadinessContainer = document.getElementById('beltReadinessCards');
            beltReadinessContainer.innerHTML = '';

            const beltData = {
                white: {
                    icon: 'Academic Cap',
                    name: 'Wei√ü Belt',
                    theme: 'Vulnerability-Based Trust',
                    link: 'white-belt-de.html'
                },
                blue: {
                    icon: 'Academic Cap',
                    name: 'Blau Belt',
                    theme: 'Productive Conflict & Debate',
                    link: 'blue-belt-de.html'
                },
                purple: {
                    icon: 'Academic Cap',
                    name: 'Lila Belt',
                    theme: 'Commitment & Clarity',
                    link: 'purple-belt-de.html'
                },
                brown: {
                    icon: 'Academic Cap',
                    name: 'Braun Belt',
                    theme: 'Verantwortlichkeit & Standards',
                    link: 'brown-belt-de.html'
                },
                black: {
                    icon: 'Academic Cap',
                    name: 'Schwarz Belt',
                    theme: 'Results Over Ego',
                    link: 'black-belt-de.html'
                }
            };

            Object.entries(beltScores).forEach(([belt, score]) => {
                const data = beltData[belt];
                const percentage = score.percentage;
                const average = score.average;

                // Determine readiness level
                let readiness, badge, feedback, gaps;
                
                if (percentage < 60) {
                    readiness = 'locked';
                    badge = 'Lock Closed Locked';
                    feedback = `You scored ${percentage.toFixed(0)}%. This belt is locked until you complete foundational work. Your current understanding of ${data.theme.toLowerCase()} needs significant development before you can train effectively here.`;
                    gaps = [
                        'Complete Wei√ü Belt exercises if this is Wei√ü Belt',
                        'Review fundamental concepts before attempting this training',
                        'Build baseline skills through prerequisite work'
                    ];
                } else if (percentage >= 60 && percentage < 75) {
                    readiness = 'conditional';
                    badge = 'Exclamation Triangle Conditional Access';
                    feedback = `You scored ${percentage.toFixed(0)}%. You can START this belt, but significant gaps exist. Expect to struggle‚Äîthis training will expose blind spots in ${data.theme.toLowerCase()}.`;
                    gaps = [
                        'Pay extra attention to scenarios that challenge you',
                        'Complete ALL exercises (don\'t skip)',
                        'Revisit questions where you scored 1-2 out of 5'
                    ];
                } else if (percentage >= 75 && percentage < 85) {
                    readiness = 'ready';
                    badge = 'Check Circle Ready';
                    feedback = `You scored ${percentage.toFixed(0)}%. You're prepared for this belt. You have a solid foundation in ${data.theme.toLowerCase()}, and this training will deepen your mastery.`;
                    gaps = [
                        'Focus on nuance and advanced applications',
                        'Use this belt to refine your existing skills',
                        'Challenge yourself with the harder scenarios'
                    ];
                } else {
                    readiness = 'mastery';
                    badge = 'Trophy Mastery Level';
                    feedback = `You scored ${percentage.toFixed(0)}%. You could skip this belt, but DON'T. Even masters need reminders. This training will sharpen what you already know about ${data.theme.toLowerCase()}.`;
                    gaps = [
                        'Look for 1-2 insights you\'ve missed',
                        'Use this belt to reinforce good habits',
                        'Consider: could you teach this to others?'
                    ];
                }

                const cardHTML = `
                    <div class="belt-readiness-card ${readiness}">
                        <div class="belt-header">
                            <div class="belt-name">${data.icon} ${data.name}</div>
                            <div class="readiness-badge ${readiness}">${badge}</div>
                        </div>
                        <div class="score-display" style="color: ${readiness === 'locked' ? '#ef4444' : readiness === 'conditional' ? '#f59e0b' : readiness === 'ready' ? '#10b981' : '#6366f1'}">
                            ${average.toFixed(2)}/5.0 (${percentage.toFixed(0)}%)
                        </div>
                        <div class="feedback">${feedback}</div>
                        <div class="gaps">
                            <div class="gaps-title">${readiness === 'mastery' ? 'üí° How to Approach:' : readiness === 'ready' ? 'Flag Training Focus:' : 'Exclamation Triangle What You Need:'}</div>
                            <ul>
                                ${gaps.map(gap => `<li>${gap}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                
                beltReadinessContainer.innerHTML += cardHTML;
            });

            // Display dysfunction flip cards (existing logic)
            displayDysfunctionCards();

            // Display 90-day roadmap
            display90DayRoadmap(beltScores);

            // Save results
            const resultsData = {
                timestamp: new Date().toISOString(),
                beltScores: beltScores,
                sectionScores: sectionScores,
                answers: answers
            };
            localStorage.setItem('beltAssessment', JSON.stringify(resultsData));
            
            // Save to global gamification and UNLOCK ALL BELTS
            const gamification = JSON.parse(localStorage.getItem('gamification') || '{"xp": 0, "level": 1, "achievements": []}');
            gamification.xp = (gamification.xp || 0) + 500;
            gamification.completedBeltAssessment = true;
            
            // Unlock ALL belts when assessment is complete
            gamification.unlockedBelts = ['white', 'blue', 'purple', 'brown', 'black'];
            localStorage.setItem('gamification', JSON.stringify(gamification));
            
            // Mark belts as unlocked globally
            localStorage.setItem('beltsUnlocked', 'true');
            
            // Show results screen
            document.getElementById('screen-questions').classList.remove('active');
            document.getElementById('screen-results').classList.add('active');
        }

        function displayDysfunctionCards() {
            const scoresContainer = document.getElementById('dysfunctionScores');
            scoresContainer.innerHTML = '';
            
            const dysfunctionData = {
                trust: {
                    icon: 'Academic Cap',
                    name: 'Trust',
                    context: 'Vulnerability-based trust is the foundation. Without it, teams play politics instead of pursuing results.',
                    highInsight: 'You openly admit mistakes, ask for help, and assume positive intent. Keep modeling this.',
                    lowInsight: 'You tend to hide weaknesses and avoid vulnerability. Start small: admit one mistake per week.',
                    research: 'Google\'s Project Aristotle found psychological safety (trust) was the #1 predictor of team performance.'
                },
                conflict: {
                    icon: 'Academic Cap',
                    name: 'Conflict',
                    context: 'Productive conflict mines for the best ideas. Artificial harmony leads to bad decisions.',
                    highInsight: 'You engage in passionate debate about ideas without taking it personally. Rare and valuable.',
                    lowInsight: 'You avoid disagreement to keep the peace. Short-term discomfort leads to long-term clarity.',
                    research: 'Teams that engage in task conflict (not relationship conflict) make better decisions and innovate more.'
                },
                commitment: {
                    icon: 'Academic Cap',
                    name: 'Commitment',
                    context: 'Clarity and buy-in. Teams need to know what\'s decided and commit fully‚Äîeven when they disagreed.',
                    highInsight: 'You commit to decisions quickly and publicly support them. This speed is a competitive advantage.',
                    lowInsight: 'You leave meetings without clarity or second-guess decisions. End every meeting with "what did we decide?"',
                    research: 'Eisenhower: "Plans are useless, but planning is everything." The act of deciding together creates commitment.'
                },
                accountability: {
                    icon: 'Academic Cap',
                    name: 'Verantwortlichkeit',
                    context: 'Peer-to-peer accountability. The best teams call each other out on performance and behavior.',
                    highInsight: 'You address performance gaps directly and quickly. This creates a culture of high standards.',
                    lowInsight: 'You let small issues slide or wait for others to handle it. Call out small things within 48 hours.',
                    research: 'Kim Scott (Radical Candor): "Care personally, challenge directly." Both are required for accountability.'
                },
                results: {
                    icon: 'Academic Cap',
                    name: 'Results',
                    context: 'Collective results over individual ego. Great teams subjugate personal goals to team outcomes.',
                    highInsight: 'You prioritize collective wins over personal recognition. This selflessness is what makes black belts rare.',
                    lowInsight: 'You focus on individual metrics over collective outcomes. Ask: "Did my work make us better today?"',
                    research: 'Lencioni: "If you could get all the people in an organization rowing in the same direction, you could dominate any industry."'
                }
            };
            
            Object.entries(sectionScores).forEach(([section, score]) => {
                const percentage = (score / 5) * 100;
                const level = score >= 4.5 ? 'Mastery' : score >= 4.0 ? 'Strong' : score >= 3.5 ? 'Developing' : score >= 3.0 ? 'Growing' : 'Learning';
                const data = dysfunctionData[section];
                const isHigh = score >= 4.0;
                
                const cardHTML = `
                    <div class="dysfunction-card" onclick="this.classList.toggle('flipped')">
                        <div class="dysfunction-card-inner">
                            <div class="dysfunction-card-front">
                                <h4>${data.icon} ${data.name}</h4>
                                <div class="score-display">${score.toFixed(1)}/5.0</div>
                                <div class="score-bar">
                                    <div class="score-bar-fill" style="width: ${percentage}%"></div>
                                </div>
                                <div class="level">${level}</div>
                                <div class="flip-hint">üí° Click to see insights</div>
                            </div>
                            <div class="dysfunction-card-back">
                                <h4>${data.icon} ${data.name} - Deep Dive</h4>
                                <div class="insight-section">
                                    <div class="insight-title"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-book-open"></use></svg> Why This Matters:</div>
                                    <div class="insight-text">${data.context}</div>
                                </div>
                                <div class="insight-section">
                                    <div class="insight-title"><svg class="hero-icon hero-icon-md" aria-hidden="true"><use href="icons/sprite.svg#icon-flag"></use></svg> Your Pattern:</div>
                                    <div class="insight-text">${isHigh ? data.highInsight : data.lowInsight}</div>
                                </div>
                                <div class="insight-section">
                                    <div class="insight-title">üî¨ Research Says:</div>
                                    <div class="insight-text">${data.research}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                scoresContainer.innerHTML += cardHTML;
            });
        }

        function display90DayRoadmap(beltScores) {
            const roadmapContainer = document.getElementById('trainingRoadmap');
            
            // Find weakest belt
            let weakestBelt = 'white';
            let lowestScore = 5;
            Object.entries(beltScores).forEach(([belt, score]) => {
                if (score.average < lowestScore) {
                    lowestScore = score.average;
                    weakestBelt = belt;
                }
            });

            const beltNames = {
                white: 'Academic Cap Wei√ü Belt (Trust)',
                blue: 'Academic Cap Blau Belt (Conflict)',
                purple: 'Academic Cap Lila Belt (Commitment)',
                brown: 'Academic Cap Braun Belt (Verantwortlichkeit)',
                black: 'Academic Cap Schwarz Belt (Results)'
            };

            const beltOrder = ['white', 'blue', 'purple', 'brown', 'black'];
            const startIndex = beltOrder.indexOf(weakestBelt);

            roadmapContainer.innerHTML = `
                <p style="color: #475569; line-height: 1.8; margin-bottom: 25px; font-size: 1.1em;">
                    Based on your scores, here's your personalized 90-day training roadmap. <strong>Start with your weakest area (${beltNames[weakestBelt]})</strong>, then progress sequentially.
                </p>
                
                <div style="background: #f8fafc; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                    <h4 style="color: #1a365d; margin: 0 0 20px 0;">üìÖ Month 1 (Days 1-30)</h4>
                    <ul style="color: #64748b; line-height: 2; font-size: 1.05em; margin: 0; padding-left: 25px;">
                        <li><strong>${beltNames[beltOrder[startIndex]]}</strong> - Complete all 4 stripes</li>
                        <li>Focus on exercises and scenarios that challenge you</li>
                        <li>Track: What's your biggest "aha moment"?</li>
                        <li>Goal: Earn ${beltNames[beltOrder[startIndex]]} mastery</li>
                    </ul>
                </div>

                <div style="background: #f8fafc; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                    <h4 style="color: #1a365d; margin: 0 0 20px 0;">üìÖ Month 2 (Days 31-60)</h4>
                    <ul style="color: #64748b; line-height: 2; font-size: 1.05em; margin: 0; padding-left: 25px;">
                        <li><strong>${beltNames[beltOrder[(startIndex + 1) % 5]]}</strong> - Complete all 4 stripes</li>
                        <li>Apply learning from ${beltNames[beltOrder[startIndex]]} here</li>
                        <li>Notice: How do these dysfunctions connect?</li>
                        <li>Goal: Build on Month 1 momentum</li>
                    </ul>
                </div>

                <div style="background: #f8fafc; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                    <h4 style="color: #1a365d; margin: 0 0 20px 0;">üìÖ Month 3 (Days 61-90)</h4>
                    <ul style="color: #64748b; line-height: 2; font-size: 1.05em; margin: 0; padding-left: 25px;">
                        <li><strong>${beltNames[beltOrder[(startIndex + 2) % 5]]}</strong> - Begin training</li>
                        <li>Revisit ${beltNames[beltOrder[startIndex]]} - what changed?</li>
                        <li>Reflect: How have you grown in 90 days?</li>
                        <li>Goal: Sustained practice = lasting change</li>
                    </ul>
                </div>

                <div style="background: linear-gradient(135deg, #1a365d 0%, #0f1f3d 100%); color: white; border-radius: 12px; padding: 25px; margin-top: 30px;">
                    <h4 style="margin: 0 0 15px 0;">üí° Remember:</h4>
                    <p style="margin: 0; line-height: 1.8; opacity: 0.95;">
                        Mastery isn't about speed‚Äîit's about depth. Take your time. Do the exercises. Reflect on the scenarios. 
                        The goal isn't to finish all 5 belts in 90 days. The goal is to <strong>genuinely change</strong> how you operate in the world.
                    </p>
                </div>

                <div style="margin-top: 30px; text-align: center;">
                    <a href="gym-dashboard-de.html" class="btn-primary" style="font-size: 1.3em; padding: 20px 50px; text-decoration: none; display: inline-block; background: linear-gradient(135deg, #1a365d 0%, #2563eb 100%); color: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);" onclick="goToGymDashboard(); return false;">
                        Begin Training Now ‚Üí
                    </a>
                </div>
            `;
        }
    </script>

    <!-- Gamification System -->
    <!-- Performance Optimizer - Load First -->
<script src="js/performance-optimizer.min.js"></script>

    <script src="js/gamification.js" defer></script>
    <script src="js/assessment-completion-helper.js" defer></script>
<!-- TAP-IN Utilities -->
<script src="js/shared-utilities.js"></script>
<script src="js/global-error-handler.min.js"></script>
<script src="js/storage-health.min.js"></script>
    <!-- TAP-IN Core Modules -->
    <!-- REMOVED: Orphaned language-switcher script (no UI elements to attach to) -->
    <script src="js/meta-tags-manager.js"></script>
    <script src="js/achievement-badges.js"></script>
    <script src="js/structured-data.js"></script>

    <script src="js/performance-monitor.min.js"></script>

    <script src="js/keyboard-navigation.js" defer></script>


    <!-- Focus Management for Accessibility -->
    <script src="js/focus-management.js" defer></script>

    <!-- Screen Reader Enhancements for Accessibility -->
    <script src="js/screen-reader-enhancements.js" defer></script>

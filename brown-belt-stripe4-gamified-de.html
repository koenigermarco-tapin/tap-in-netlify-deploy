<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <title>Brown Belt Stripe 4: Accountability Mastery | TAP-IN</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght=400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary-brown: #3e2723; --brown-dark: #2c1810; --brown-mid: #5d4037; --accent-bronze: #a67c52; --accent-gold: #d4af37; --success-green: #38a169; --warning-orange: #dd6b20; --card-bg: #ffffff; --border-light: #e2e8f0; --text-dark: #1e293b; --text-muted: #64748b; --light-bg: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #2c1810 0%, #3e2723 50%, #4a2c1f 100%); min-height: 100vh; padding: 2rem 1rem; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 2rem; color: white; }
        .stripe-badge { display: inline-block; background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; margin-bottom: 1rem; }
        .header h1 { font-size: 2rem; font-weight: 800; margin-bottom: 0.5rem; }
        .header p { font-size: 1.1rem; opacity: 0.9; }
        .progress-container { background: rgba(255,255,255,0.2); border-radius: 10px; padding: 1rem 1.5rem; margin-bottom: 2rem; display: none; }
        .progress-container.active { display: block; }
        .progress-header { display: flex; justify-content: space-between; color: white; font-size: 0.9rem; margin-bottom: 0.5rem; }
        .progress-bar { background: rgba(255,255,255,0.3); height: 8px; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-bronze) 0%, var(--accent-gold) 100%); border-radius: 4px; transition: width 0.5s ease; }
        .main-card { background: white; border-radius: 20px; padding: 2.5rem; box-shadow: 0 20px 60px rgba(0,0,0,0.15); }
        .intro-section { margin-bottom: 2rem; }
        .intro-box { background: var(--light-bg); border: 1px solid var(--border-light); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; }
        .intro-box h3 { color: var(--primary-brown); font-size: 1.1rem; margin-bottom: 0.75rem; }
        .intro-box p { color: var(--text-dark); font-size: 0.95rem; margin-bottom: 0.75rem; line-height: 1.7; }
        .intro-box strong { color: var(--primary-brown); }
        .section-header { background: linear-gradient(135deg, #f5e6d3 0%, #e8d5c4 100%); border-left: 4px solid var(--primary-brown); padding: 1rem 1.5rem; border-radius: 8px; margin: 2rem 0 1.5rem; }
        .section-header h3 { color: var(--primary-brown); font-size: 1.1rem; margin-bottom: 0.25rem; }
        .section-header p { color: var(--brown-dark); font-size: 0.9rem; margin: 0; }
        .question-card { background: var(--light-bg); border: 2px solid var(--border-light); border-radius: 12px; padding: 2rem; margin-bottom: 1.5rem; }
        .question-number { color: var(--accent-bronze); font-size: 0.8rem; font-weight: 700; margin-bottom: 0.5rem; }
        .question-text { font-size: 1.2rem; font-weight: 700; color: var(--text-dark); margin-bottom: 1.5rem; }
        .context-box { background: #f5e6d3; border-left: 4px solid var(--brown-mid); padding: 1rem; margin-bottom: 1.5rem; border-radius: 8px; }
        .context-box p { color: var(--brown-dark); font-size: 0.9rem; margin: 0; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { background: white; border: 2px solid var(--border-light); border-radius: 8px; padding: 1rem; cursor: pointer; transition: all 0.2s; }
        .option:hover { border-color: var(--accent-bronze); }
        .option.selected { background: #f5e6d3; border-color: var(--primary-brown); }
        .option input[type="radio"] { margin-right: 0.75rem; }
        
        /* Exercise Styles */
        .exercise-card { background: linear-gradient(135deg, #fef9e7 0%, #fef3c7 100%); border: 2px solid var(--warning-orange); }
        .exercise-instruction { background: rgba(255,255,255,0.7); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
        .exercise-textarea { width: 100%; min-height: 120px; padding: 1rem; border: 2px solid var(--border-light); border-radius: 8px; font-family: inherit; font-size: 0.95rem; resize: vertical; }
        
        /* Scenario Styles */
        .scenario-card { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border: 2px solid #3b82f6; }
        .scenario-story { background: rgba(255,255,255,0.8); padding: 1.25rem; border-radius: 8px; margin-bottom: 1.5rem; }
        .scenario-story p { color: var(--text-dark); font-size: 0.95rem; line-height: 1.7; margin-bottom: 0.75rem; }
        
        /* Reflection Styles */
        .reflection-card { background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border: 2px solid #a855f7; }
        .reflection-prompt { background: rgba(255,255,255,0.8); padding: 1.25rem; border-radius: 8px; margin-bottom: 1.5rem; font-style: italic; color: #6b21a8; }
        
        /* Challenge Styles */
        .challenge-card { background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); border: 2px solid #ec4899; }
        .challenge-instruction { background: rgba(255,255,255,0.8); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
        .checklist { display: flex; flex-direction: column; gap: 0.75rem; }
        .checklist-item { background: white; border: 2px solid var(--border-light); border-radius: 8px; padding: 1rem; display: flex; align-items: center; gap: 0.75rem; cursor: pointer; transition: all 0.2s; }
        .checklist-item:hover { border-color: #ec4899; }
        .checklist-item.checked { background: #fce7f3; border-color: #ec4899; }
        .checklist-item input[type="checkbox"] { width: 20px; height: 20px; cursor: pointer; }
        
        .nav-buttons { display: flex; justify-content: space-between; gap: 1rem; margin-top: 2rem; }
        .btn { padding: 1rem 2rem; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; border: none; }
        .btn-secondary { background: #e2e8f0; color: var(--text-dark); }
        .btn-primary { background: linear-gradient(135deg, var(--primary-brown) 0%, var(--brown-dark) 100%); color: white; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        /* Results Styles */
        .results-container { display: none; }
        .results-container.active { display: block; }
        .score-display { text-align: center; padding: 2rem; background: linear-gradient(135deg, #f5e6d3 0%, #e8d5c4 100%); border-radius: 12px; margin-bottom: 2rem; }
        .score-number { font-size: 4rem; font-weight: 800; color: var(--primary-brown); }
        .score-label { font-size: 1.2rem; color: var(--brown-dark); font-weight: 600; margin-top: 0.5rem; }
        .category-scores { display: grid; gap: 1rem; margin: 2rem 0; }
        .category-item { background: var(--light-bg); border: 1px solid var(--border-light); border-radius: 8px; padding: 1rem; }
        .category-name { font-weight: 600; color: var(--text-dark); margin-bottom: 0.5rem; }
        .category-bar { background: #e2e8f0; height: 12px; border-radius: 6px; overflow: hidden; }
        .category-fill { height: 100%; background: linear-gradient(90deg, var(--accent-bronze) 0%, var(--accent-gold) 100%); border-radius: 6px; transition: width 0.5s ease; }
        .recommendation { background: white; border: 2px solid var(--primary-brown); border-radius: 12px; padding: 1.5rem; margin-top: 2rem; }
        .recommendation h3 { color: var(--primary-brown); margin-bottom: 1rem; }
        .action-plan { background: #f0fdf4; border: 2px solid var(--success-green); border-radius: 8px; padding: 1.5rem; margin-top: 1.5rem; }
        .action-plan h4 { color: #166534; margin-bottom: 1rem; }
        
        @media (max-width: 768px) { body { padding: 1rem; } .main-card { padding: 1.5rem; } .nav-buttons { flex-direction: column; } }
    
        /* ============= NUMBERED OPTION BOX READABILITY FIX ============= */
        .scale-option,
        .rating-option,
        .numbered-option,
        .option-number,
        [data-value="1"],
        [data-value="2"],
        [data-value="3"],
        [data-value="4"],
        [data-value="5"] {
            color: #FFFFFF !important;
            font-weight: 700 !important;
            font-size: 1.1rem !important;
            background: #1e293b !important;
            border: 2px solid #475569 !important;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5) !important;
        }
        .scale-option:hover,
        .rating-option:hover,
        .numbered-option:hover,
        .option-number:hover,
        [data-value]:hover {
            background: #334155 !important;
            border-color: #667eea !important;
            color: #FFFFFF !important;
            transform: scale(1.05) !important;
        }
        .scale-option.selected,
        .rating-option.selected,
        .numbered-option.selected,
        .option-number.selected,
        [data-value].selected {
            background: #667eea !important;
            border-color: #818cf8 !important;
            color: #FFFFFF !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3) !important;
        }
        .scale-label,
        .rating-label,
        .option-label {
            color: #FFFFFF !important;
            font-weight: 600 !important;
            font-size: 0.9rem !important;
            text-align: center !important;
            margin-top: 0.5rem !important;
        }
        .scale-container,
        .rating-container,
        .options-row {
            display: flex !important;
            justify-content: space-between !important;
            gap: 0.75rem !important;
            margin: 1.5rem 0 !important;
        }
        .scale-container > *,
        .rating-container > *,
        .options-row > * {
            flex: 1 !important;
            min-width: 60px !important;
            text-align: center !important;
            padding: 1rem 0.5rem !important;
            border-radius: 8px !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
        }
        @media (max-width: 768px) {
            .scale-option,
            .rating-option,
            .numbered-option,
            .option-number,
            [data-value] {
                font-size: 1rem !important;
                padding: 0.75rem 0.25rem !important;
                min-width: 50px !important;
            }
            .scale-label,
            .rating-label,
            .option-label {
                font-size: 0.75rem !important;
            }
        }
        input[type="range"] {
            -webkit-appearance: none !important;
            width: 100% !important;
            height: 8px !important;
            background: #334155 !important;
            border-radius: 5px !important;
            outline: none !important;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none !important;
            width: 24px !important;
            height: 24px !important;
            background: #667eea !important;
            cursor: pointer !important;
            border-radius: 50% !important;
            border: 3px solid #FFFFFF !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
        }
        input[type="range"]::-moz-range-thumb {
            width: 24px !important;
            height: 24px !important;
            background: #667eea !important;
            cursor: pointer !important;
            border-radius: 50% !important;
            border: 3px solid #FFFFFF !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
        }
        .slider-value,
        .range-value {
            display: block !important;
            text-align: center !important;
            font-size: 1.5rem !important;
            font-weight: 700 !important;
            color: #667eea !important;
            margin-top: 1rem !important;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2) !important;
        }
        .slider-labels {
            display: flex !important;
            justify-content: space-between !important;
            margin-top: 0.5rem !important;
        }
        .slider-labels span {
            font-size: 0.85rem !important;
            color: #cbd5e1 !important;
            font-weight: 600 !important;
        }

    
        /* Quiz Section Styling */
        .quiz-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .quiz-section .section-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-section .section-header h2 {
            color: #1a365d;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .quiz-section .section-header p {
            color: #64748b;
            font-size: 18px;
        }

        .quiz-question {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .quiz-question h3 {
            color: #667eea;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .question-text {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 20px;
            color: #2d3748;
            line-height: 1.6;
        }

        .quiz-options {
            display: grid;
            gap: 12px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px 20px;
            text-align: left;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            color: #2d3748;
            font-family: inherit;
        }

        .quiz-option:hover {
            border-color: #667eea;
            background: #f7fafc;
            transform: translateX(4px);
        }

        .quiz-option:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .quiz-option.selected-correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
            font-weight: 600;
        }

        .quiz-option.selected-incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
        }

        .quiz-feedback.correct {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .quiz-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        .quiz-feedback .feedback-text {
            margin: 0;
            line-height: 1.6;
        }

        .quiz-completion {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-radius: 12px;
            margin-top: 30px;
        }

        .quiz-completion h3 {
            color: #155724;
            font-size: 28px;
            margin-bottom: 20px;
        }

        .quiz-score {
            font-size: 24px;
            font-weight: 600;
            color: #155724;
            margin-bottom: 10px;
        }

        .quiz-xp {
            font-size: 20px;
            color: #155724;
            margin-bottom: 20px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .quiz-section {
                padding: 20px;
            }
            
            .quiz-question {
                padding: 20px;
            }
            
            .question-text {
                font-size: 16px;
            }

            .quiz-section .section-header h2 {
                font-size: 24px;
            }
        }

    </style>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#c62828">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TAP-IN">
    <link rel="stylesheet" href="css/pwa-install-banner.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="stripe-badge">üü§ Brown Belt ‚Ä¢ Stripe 4 ‚Ä¢ FINAL</div>
            <h1>Accountability Mastery</h1>
            <p>The final test: Real scenarios, practical application, integration</p>
        </div>
        
        <div class="progress-container" id="progressContainer">
            <div class="progress-header">
                <span>Element <span id="currentQ">1</span> von 22</span>
                <span><span id="progress-percent">0</span>% Abgeschlossen</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        
        <div class="main-card">
            <div class="intro-section" id="introSection">
                <div class="intro-box">
                    <h3>üéØ The Final Stripe</h3>
                    <p>Du've learned the principles, navigated the complexity, and built the systems. Now it's time to <strong>apply everything in real scenarios.</strong></p>
                    <p>This assessment is different - it combines multiple question types to test dein practical accountability skills through exercises, scenarios, reflections, and challenges.</p>
                </div>
                
                <div class="intro-box">
                    <h3>‚è±Ô∏è Bewertungsdetails</h3>
                    <p><strong>Elements:</strong> 22 varied interactions</p>
                    <p><strong>Zeit:</strong> 13-16 Minuten</p>
                    <p><strong>Types:</strong> Standard questions, exercises, scenarios, reflections, challenges</p>
                    <p><strong>Focus:</strong> Practical application and real-world integration</p>
                </div>
                
                <button class="btn btn-primary" onclick="startAssessment()">Begin Final Assessment ‚Üí</button>
            </div>
            
            <div id="questionSection" style="display: none;">
                <div id="questionCard" class="question-card">
                    <!-- Fragen dynamically inserted here -->
                </div>
                
                
        
        <!-- QUIZ SECTION -->
        <div class="quiz-section" id="quizSection" style="margin-top: 60px;">
            <div class="section-header">
                <h2>üéØ Teste dein Wissen</h2>
                <p>Abgeschlossen this quiz to validate dein understanding von this stripe's content.</p>
            </div>

            
            <!-- Frage 1: Multiple Choice -->
            <div class="quiz-question" data-question="1">
                <h3>Frage 1 von 10</h3>
                <p class="question-text">A team member comes to du with a problem they could solve themselves. The Brown Belt coaching response is:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Perfect coaching instinct! Du're using powerful questions to build capability. 'What have du tried?' surfaces their thinking. 'What would du do if I weren't here?' forces ownership. This isn't refusing to help - it's helping them discover they CAN solve this. Du're teaching them to fish, not giving them fish. Brown Belt leaders build problem-solvers, not problem-bringers. Over time, they stop coming to du with solvable problems." onclick="selectQuizAnswer(1, this)">
                        A) Solve it quickly - du're the expert and time is limited
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Perfect coaching instinct! Du're using powerful questions to build capability. 'What have du tried?' surfaces their thinking. 'What would du do if I weren't here?' forces ownership. This isn't refusing to help - it's helping them discover they CAN solve this. Du're teaching them to fish, not giving them fish. Brown Belt leaders build problem-solvers, not problem-bringers. Over time, they stop coming to du with solvable problems." onclick="selectQuizAnswer(1, this)">
                        B) Ask: 'What have du already tried?' and 'What would du do if I weren't available?'
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Perfect coaching instinct! Du're using powerful questions to build capability. 'What have du tried?' surfaces their thinking. 'What would du do if I weren't here?' forces ownership. This isn't refusing to help - it's helping them discover they CAN solve this. Du're teaching them to fish, not giving them fish. Brown Belt leaders build problem-solvers, not problem-bringers. Over time, they stop coming to du with solvable problems." onclick="selectQuizAnswer(1, this)">
                        C) Direct them to resources so they can figure it out
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Perfect coaching instinct! Du're using powerful questions to build capability. 'What have du tried?' surfaces their thinking. 'What would du do if I weren't here?' forces ownership. This isn't refusing to help - it's helping them discover they CAN solve this. Du're teaching them to fish, not giving them fish. Brown Belt leaders build problem-solvers, not problem-bringers. Over time, they stop coming to du with solvable problems." onclick="selectQuizAnswer(1, this)">
                        D) Schedule a coaching session to work through it together
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 2: Multiple Choice -->
            <div class="quiz-question" data-question="2">
                <h3>Frage 2 von 10</h3>
                <p class="question-text">The GROW coaching model stands for:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="GROW is a coaching framework: (1) Goal - What do du want to achieve? (2) Reality - What's the current situation? (3) Options - What are possible approaches? (4) Will - What will du commit to? Brown Belt coaches use GROW to structure conversations, not scripts. The power is in the questions, not the answers. This framework creates space for discovery while providing structure for clarity." onclick="selectQuizAnswer(2, this)">
                        A) Goal, Resources, Options, Will
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="GROW is a coaching framework: (1) Goal - What do du want to achieve? (2) Reality - What's the current situation? (3) Options - What are possible approaches? (4) Will - What will du commit to? Brown Belt coaches use GROW to structure conversations, not scripts. The power is in the questions, not the answers. This framework creates space for discovery while providing structure for clarity." onclick="selectQuizAnswer(2, this)">
                        B) Goal, Reality, Options, Way forward
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="GROW is a coaching framework: (1) Goal - What do du want to achieve? (2) Reality - What's the current situation? (3) Options - What are possible approaches? (4) Will - What will du commit to? Brown Belt coaches use GROW to structure conversations, not scripts. The power is in the questions, not the answers. This framework creates space for discovery while providing structure for clarity." onclick="selectQuizAnswer(2, this)">
                        C) Goal, Reality, Options, Will
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="GROW is a coaching framework: (1) Goal - What do du want to achieve? (2) Reality - What's the current situation? (3) Options - What are possible approaches? (4) Will - What will du commit to? Brown Belt coaches use GROW to structure conversations, not scripts. The power is in the questions, not the answers. This framework creates space for discovery while providing structure for clarity." onclick="selectQuizAnswer(2, this)">
                        D) Goal, Resources, Outcomes, Will
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 3: Multiple Choice -->
            <div class="quiz-question" data-question="3">
                <h3>Frage 3 von 10</h3>
                <p class="question-text">Developmental feedback vs. evaluative feedback means:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Evaluative feedback: 'Dein presentation was good/bad' (judgment von past). Developmental feedback: 'Here's how to make dein next presentation more impactful' (guidance for future). Brown Belt coaches use both: evaluative for clarity ('Here's what happened'), developmental for growth ('Here's how to improve'). But developmental feedback builds capability - it's forward-looking, specific, and actionable. This is how du develop people." onclick="selectQuizAnswer(3, this)">
                        A) Developmental is for growth, evaluative is for performance reviews
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Evaluative feedback: 'Dein presentation was good/bad' (judgment von past). Developmental feedback: 'Here's how to make dein next presentation more impactful' (guidance for future). Brown Belt coaches use both: evaluative for clarity ('Here's what happened'), developmental for growth ('Here's how to improve'). But developmental feedback builds capability - it's forward-looking, specific, and actionable. This is how du develop people." onclick="selectQuizAnswer(3, this)">
                        B) Developmental focuses on future capability, evaluative focuses on past performance
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Evaluative feedback: 'Dein presentation was good/bad' (judgment von past). Developmental feedback: 'Here's how to make dein next presentation more impactful' (guidance for future). Brown Belt coaches use both: evaluative for clarity ('Here's what happened'), developmental for growth ('Here's how to improve'). But developmental feedback builds capability - it's forward-looking, specific, and actionable. This is how du develop people." onclick="selectQuizAnswer(3, this)">
                        C) They're the same - just different names
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Evaluative feedback: 'Dein presentation was good/bad' (judgment von past). Developmental feedback: 'Here's how to make dein next presentation more impactful' (guidance for future). Brown Belt coaches use both: evaluative for clarity ('Here's what happened'), developmental for growth ('Here's how to improve'). But developmental feedback builds capability - it's forward-looking, specific, and actionable. This is how du develop people." onclick="selectQuizAnswer(3, this)">
                        D) Developmental is positive, evaluative is negative
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 4: Multiple Choice -->
            <div class="quiz-question" data-question="4">
                <h3>Frage 4 von 10</h3>
                <p class="question-text">Creating thinking partnerships (coaching relationships) means:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Thinking partnerships create space for discovery. Du're not solving their problems or sharing dein wisdom - du're creating conditions for them to think clearly. Powerful questions, active listening, reflecting back what du hear. Nancy Kline's 'Time to Think' research shows: people think better when someone listens without interrupting or judging. Brown Belt coaches create thinking partnerships - spaces where clarity emerges naturally." onclick="selectQuizAnswer(4, this)">
                        A) Being friends with dein team members
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Thinking partnerships create space for discovery. Du're not solving their problems or sharing dein wisdom - du're creating conditions for them to think clearly. Powerful questions, active listening, reflecting back what du hear. Nancy Kline's 'Time to Think' research shows: people think better when someone listens without interrupting or judging. Brown Belt coaches create thinking partnerships - spaces where clarity emerges naturally." onclick="selectQuizAnswer(4, this)">
                        B) Creating safe spaces for people to think out loud and discover their own answers
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Thinking partnerships create space for discovery. Du're not solving their problems or sharing dein wisdom - du're creating conditions for them to think clearly. Powerful questions, active listening, reflecting back what du hear. Nancy Kline's 'Time to Think' research shows: people think better when someone listens without interrupting or judging. Brown Belt coaches create thinking partnerships - spaces where clarity emerges naturally." onclick="selectQuizAnswer(4, this)">
                        C) Partnering with them to solve problems together
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Thinking partnerships create space for discovery. Du're not solving their problems or sharing dein wisdom - du're creating conditions for them to think clearly. Powerful questions, active listening, reflecting back what du hear. Nancy Kline's 'Time to Think' research shows: people think better when someone listens without interrupting or judging. Brown Belt coaches create thinking partnerships - spaces where clarity emerges naturally." onclick="selectQuizAnswer(4, this)">
                        D) Mentoring them based on dein experience
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 5: Multiple Choice -->
            <div class="quiz-question" data-question="5">
                <h3>Frage 5 von 10</h3>
                <p class="question-text">Building independence, not dependency, means:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt coaches build capability, not dependency. The goal: they need du less over time, not more. This means: asking questions instead von giving answers, letting them make decisions even when du'd choose differently, celebrating their independent problem-solving. Dependency feels good (du're needed!) but it's a leadership failure. Independence feels scary (they don't need du!) but it's leadership success. Build leaders who can lead without du." onclick="selectQuizAnswer(5, this)">
                        A) Never helping - make them figure everything out themselves
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Brown Belt coaches build capability, not dependency. The goal: they need du less over time, not more. This means: asking questions instead von giving answers, letting them make decisions even when du'd choose differently, celebrating their independent problem-solving. Dependency feels good (du're needed!) but it's a leadership failure. Independence feels scary (they don't need du!) but it's leadership success. Build leaders who can lead without du." onclick="selectQuizAnswer(5, this)">
                        B) Helping them build problem-solving capability so they need du less over time
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt coaches build capability, not dependency. The goal: they need du less over time, not more. This means: asking questions instead von giving answers, letting them make decisions even when du'd choose differently, celebrating their independent problem-solving. Dependency feels good (du're needed!) but it's a leadership failure. Independence feels scary (they don't need du!) but it's leadership success. Build leaders who can lead without du." onclick="selectQuizAnswer(5, this)">
                        C) Giving them all the answers so they learn faster
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt coaches build capability, not dependency. The goal: they need du less over time, not more. This means: asking questions instead von giving answers, letting them make decisions even when du'd choose differently, celebrating their independent problem-solving. Dependency feels good (du're needed!) but it's a leadership failure. Independence feels scary (they don't need du!) but it's leadership success. Build leaders who can lead without du." onclick="selectQuizAnswer(5, this)">
                        D) Checking in frequently to ensure they're on track
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 6: Multiple Choice -->
            <div class="quiz-question" data-question="6">
                <h3>Frage 6 von 10</h3>
                <p class="question-text">When NOT to coach (directive leadership moments) includes:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt F√ºhrungskr√§fte wissen when to coach vs. direct. Coach when: they have capability, there's time for discovery, the stakes allow learning. Direct when: crisis/safety, they lack basic capability, time is critical. Beispiel: Fire in building ‚Üí direct ('Evacuate now!'). Improving presentation skills ‚Üí coach ('What would make this more impactful?'). The skill is knowing which mode the situation requires. Flexibility, not dogmatism." onclick="selectQuizAnswer(6, this)">
                        A) Always coach - directive leadership is outdated
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Brown Belt F√ºhrungskr√§fte wissen when to coach vs. direct. Coach when: they have capability, there's time for discovery, the stakes allow learning. Direct when: crisis/safety, they lack basic capability, time is critical. Beispiel: Fire in building ‚Üí direct ('Evacuate now!'). Improving presentation skills ‚Üí coach ('What would make this more impactful?'). The skill is knowing which mode the situation requires. Flexibility, not dogmatism." onclick="selectQuizAnswer(6, this)">
                        B) Crisis situations, safety issues, or when the person lacks basic capability
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt F√ºhrungskr√§fte wissen when to coach vs. direct. Coach when: they have capability, there's time for discovery, the stakes allow learning. Direct when: crisis/safety, they lack basic capability, time is critical. Beispiel: Fire in building ‚Üí direct ('Evacuate now!'). Improving presentation skills ‚Üí coach ('What would make this more impactful?'). The skill is knowing which mode the situation requires. Flexibility, not dogmatism." onclick="selectQuizAnswer(6, this)">
                        C) When du're busy and don't have time for coaching
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt F√ºhrungskr√§fte wissen when to coach vs. direct. Coach when: they have capability, there's time for discovery, the stakes allow learning. Direct when: crisis/safety, they lack basic capability, time is critical. Beispiel: Fire in building ‚Üí direct ('Evacuate now!'). Improving presentation skills ‚Üí coach ('What would make this more impactful?'). The skill is knowing which mode the situation requires. Flexibility, not dogmatism." onclick="selectQuizAnswer(6, this)">
                        D) When the person is senior and should know better
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 7: Multiple Choice -->
            <div class="quiz-question" data-question="7">
                <h3>Frage 7 von 10</h3>
                <p class="question-text">Scaling dich selbst through others means:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt leaders scale through teaching, not delegating. When du teach someone to think strategically, they make better decisions. When du teach someone to coach, they develop others. Dein impact multiplies. This is the difference between delegation (giving away tasks) and scaling (multiplying capability). Brown Belt: build leaders who build leaders. Dein legacy isn't what du accomplished - it's what others accomplish because du taught them." onclick="selectQuizAnswer(7, this)">
                        A) Delegating all dein work so du have less to do
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Brown Belt leaders scale through teaching, not delegating. When du teach someone to think strategically, they make better decisions. When du teach someone to coach, they develop others. Dein impact multiplies. This is the difference between delegation (giving away tasks) and scaling (multiplying capability). Brown Belt: build leaders who build leaders. Dein legacy isn't what du accomplished - it's what others accomplish because du taught them." onclick="selectQuizAnswer(7, this)">
                        B) Teaching others to think and decide so dein impact multiplies
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt leaders scale through teaching, not delegating. When du teach someone to think strategically, they make better decisions. When du teach someone to coach, they develop others. Dein impact multiplies. This is the difference between delegation (giving away tasks) and scaling (multiplying capability). Brown Belt: build leaders who build leaders. Dein legacy isn't what du accomplished - it's what others accomplish because du taught them." onclick="selectQuizAnswer(7, this)">
                        C) Hiring people to replace du
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt leaders scale through teaching, not delegating. When du teach someone to think strategically, they make better decisions. When du teach someone to coach, they develop others. Dein impact multiplies. This is the difference between delegation (giving away tasks) and scaling (multiplying capability). Brown Belt: build leaders who build leaders. Dein legacy isn't what du accomplished - it's what others accomplish because du taught them." onclick="selectQuizAnswer(7, this)">
                        D) Creating systems that run without du
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 8: Multiple Choice -->
            <div class="quiz-question" data-question="8">
                <h3>Frage 8 von 10</h3>
                <p class="question-text">Measuring coaching effectiveness means tracking:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Coaching effectiveness = capability growth. Are they solving harder problems? Making better decisions? Needing du less? Taking on more responsibility? Brown Belt coaches measure impact, not activity. A coaching session isn't successful because it happened - it's successful if it built capability. Track: complexity von challenges they handle, frequency von 'needing dein help,' quality von independent decisions. This is how du know coaching works." onclick="selectQuizAnswer(8, this)">
                        A) How many coaching sessions du've conducted
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Coaching effectiveness = capability growth. Are they solving harder problems? Making better decisions? Needing du less? Taking on more responsibility? Brown Belt coaches measure impact, not activity. A coaching session isn't successful because it happened - it's successful if it built capability. Track: complexity von challenges they handle, frequency von 'needing dein help,' quality von independent decisions. This is how du know coaching works." onclick="selectQuizAnswer(8, this)">
                        B) The capability growth von the people du coach - can they handle more complex challenges?
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Coaching effectiveness = capability growth. Are they solving harder problems? Making better decisions? Needing du less? Taking on more responsibility? Brown Belt coaches measure impact, not activity. A coaching session isn't successful because it happened - it's successful if it built capability. Track: complexity von challenges they handle, frequency von 'needing dein help,' quality von independent decisions. This is how du know coaching works." onclick="selectQuizAnswer(8, this)">
                        C) Whether people follow dein coaching advice
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Coaching effectiveness = capability growth. Are they solving harder problems? Making better decisions? Needing du less? Taking on more responsibility? Brown Belt coaches measure impact, not activity. A coaching session isn't successful because it happened - it's successful if it built capability. Track: complexity von challenges they handle, frequency von 'needing dein help,' quality von independent decisions. This is how du know coaching works." onclick="selectQuizAnswer(8, this)">
                        D) How much people appreciate dein coaching
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 9: Multiple Choice -->
            <div class="quiz-question" data-question="9">
                <h3>Frage 9 von 10</h3>
                <p class="question-text">The mentor's dilemma (when to let them fail) is resolved by:</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt mentors calculate: Cost von failure vs. Value von learning. Low cost + High learning = Let them fail. High cost + Low learning = Prevent failure. Beispiel: Let them make a $100 decision mistake (low cost, high learning). Prevent a $100,000 decision mistake (high cost, even if learning potential). The skill is calibrating: when does failure teach vs. damage? This is judgment, not rules. Protect them from catastrophic failures, allow learning failures." onclick="selectQuizAnswer(9, this)">
                        A) Never letting them fail - prevent all mistakes
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt mentors calculate: Cost von failure vs. Value von learning. Low cost + High learning = Let them fail. High cost + Low learning = Prevent failure. Beispiel: Let them make a $100 decision mistake (low cost, high learning). Prevent a $100,000 decision mistake (high cost, even if learning potential). The skill is calibrating: when does failure teach vs. damage? This is judgment, not rules. Protect them from catastrophic failures, allow learning failures." onclick="selectQuizAnswer(9, this)">
                        B) Always letting them fail - failure is the best teacher
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Brown Belt mentors calculate: Cost von failure vs. Value von learning. Low cost + High learning = Let them fail. High cost + Low learning = Prevent failure. Beispiel: Let them make a $100 decision mistake (low cost, high learning). Prevent a $100,000 decision mistake (high cost, even if learning potential). The skill is calibrating: when does failure teach vs. damage? This is judgment, not rules. Protect them from catastrophic failures, allow learning failures." onclick="selectQuizAnswer(9, this)">
                        C) Letting them fail when the cost is low but learning is high; preventing failure when cost exceeds learning value
                    </button>
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt mentors calculate: Cost von failure vs. Value von learning. Low cost + High learning = Let them fail. High cost + Low learning = Prevent failure. Beispiel: Let them make a $100 decision mistake (low cost, high learning). Prevent a $100,000 decision mistake (high cost, even if learning potential). The skill is calibrating: when does failure teach vs. damage? This is judgment, not rules. Protect them from catastrophic failures, allow learning failures." onclick="selectQuizAnswer(9, this)">
                        D) Letting them fail when they ignore dein advice
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>

            <!-- Frage 10: Multiple Choice -->
            <div class="quiz-question" data-question="10">
                <h3>Frage 10 von 10</h3>
                <p class="question-text">Wahr oder Falsch: Great coaches always have the answers to their coachee's problems.</p>
                
                <div class="quiz-options">
                    <button class="quiz-option" data-correct="false" data-explanation="Brown Belt coaches recognize: Wenn du always have the answer, du're teaching dependency. Wenn du help them discover answers, du're building capability. Powerful questions > quick answers. Beispiel: Instead von 'Do X,' ask 'What options have du considered?' Instead von 'Here's what I'd do,' ask 'What would need to be true for Y to work?' Dein job isn't to be smart - it's to help them get smart. This is coaching mastery." onclick="selectQuizAnswer(10, this)">
                        A) True - that's why du're the coach
                    </button>
                    <button class="quiz-option" data-correct="true" data-explanation="Brown Belt coaches recognize: Wenn du always have the answer, du're teaching dependency. Wenn du help them discover answers, du're building capability. Powerful questions > quick answers. Beispiel: Instead von 'Do X,' ask 'What options have du considered?' Instead von 'Here's what I'd do,' ask 'What would need to be true for Y to work?' Dein job isn't to be smart - it's to help them get smart. This is coaching mastery." onclick="selectQuizAnswer(10, this)">
                        B) False - great coaches ask powerful questions that help coachees discover their own answers
                    </button>
                </div>
                
                <div class="quiz-feedback" style="display: none;">
                    <p class="feedback-text"></p>
                </div>
            </div>
<div class="quiz-completion" style="display: none;">
                <h3>Quiz Abgeschlossen! üéâ</h3>
                <p class="quiz-score">Deine Punktzahl: <span id="quizScore">0</span>/10</p>
                <p class="quiz-xp">+50 XP vergeben!</p>
                <button class="btn-primary" onclick="completeQuiz(4)
                    window.dispatchEvent(new CustomEvent(\'lessonAbgeschlossend\'));">Weiter</button>
            </div>
        </div>


        <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousFrage()">‚Üê Zur√ºck</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextFrage()" disabled>Weiter ‚Üí</button>
                </div>
            </div>
            
            <div id="resultsSection" class="results-container">
                <div class="score-display">
                    <div class="score-number" id="finalScore">--</div>
                    <div class="score-label" id="scoreLabel">--</div>
                </div>
                
                <div id="categoryScores" class="category-scores">
                    <!-- Category scores inserted here -->
                </div>
                
                <div class="recommendation" id="recommendation">
                    <!-- Recommendation inserted here -->
                </div>
                
                <div class="nav-buttons" style="margin-top: 2rem;">
                    <a href="brown-belt-de.html" class="btn btn-secondary">‚Üê Zur√ºck zum Brown Belt</a>
                    <a href="black-belt-de.html" class="btn btn-primary">Weiter to Black Belt ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

<!-- ============================================================================ -->
<!-- END OF PART 1 -->
<!-- NEXT: Insert PART 2 (Fragen array with 22 varied elements) -->
<!-- ============================================================================ -->
<!-- ============================================================================ -->
<!-- PART 2: QUESTIONS ARRAY (22 Varied Elements) -->
<!-- 11 standard, 3 exercises, 3 scenarios, 2 reflections, 2 challenges -->
<!-- Copy this AFTER Part 1, BEFORE Part 3 -->
<!-- ============================================================================ -->

    <script>
        const questions = [
            // SECTION 1: DIRECT FEEDBACK (5 elements: 2 standard, 1 exercise, 1 scenario, 1 standard)
            {
                type: 'standard',
                category: 'Direct Feedback',
                question: "Wenn du musst, um give difficult feedback, dein default approach is...",
                options: [
                    { text: "Avoid it completely - too uncomfortable", value: 1 },
                    { text: "Hint at it indirectly without being clear", value: 2 },
                    { text: "Give it but heavily soft the message", value: 3 },
                    { text: "Give it directly but kindly", value: 4 },
                    { text: "Give it immediately, clearly, and with care", value: 5 }
                ]
            },
            {
                type: 'exercise',
                category: 'Direct Feedback',
                question: "The Feedback Du've Been Avoiding",
                instruction: "Think von someone who needs feedback from du that du haven't given yet. Write what du need to say to them (minimum 20 characters).",
                placeholder: "Beispiel: 'Sarah, I need to talk about the pattern I've noticed in our meetings. When du interrupt others, it...'",
                minLength: 20
            },
            {
                type: 'scenario',
                category: 'Direct Feedback',
                question: "The Defensive Colleague",
                story: "Du give a peer feedback about missing deadlines. They immediately respond: 'That's not fair - du don't see all the work I'm juggling. Everyone else is fine with my pace.' How do du respond?",
                options: [
                    { text: "Back down: 'Du're right, I probably don't see everything'", value: 1 },
                    { text: "End the conversation to avoid escalation", value: 2 },
                    { text: "Argue about whether dein perception is accurate", value: 3 },
                    { text: "Acknowledge their workload but restate the impact", value: 4 },
                    { text: "Stay calm: 'I hear du're busy. The pattern I'm seeing is...' with specific examples", value: 5 }
                ]
            },
            {
                type: 'standard',
                category: 'Direct Feedback',
                question: "Dein comfort level receiving critical feedback is...",
                options: [
                    { text: "Very defensive - I push back hard", value: 1 },
                    { text: "Uncomfortable - I get defensive internally", value: 2 },
                    { text: "Neutral - I can listen but don't love it", value: 3 },
                    { text: "Open - I appreciate honest feedback", value: 4 },
                    { text: "Eager - I actively seek critical feedback", value: 5 }
                ]
            },
            {
                type: 'standard',
                category: 'Direct Feedback',
                question: "Follow-up after giving difficult feedback...",
                options: [
                    { text: "Never - I hope once is enough", value: 1 },
                    { text: "Rarely - usually I avoid re-engaging", value: 2 },
                    { text: "Sometimes - if I remember", value: 3 },
                    { text: "Usually - I schedule check-ins", value: 4 },
                    { text: "Always - follow-up is part von the feedback", value: 5 }
                ]
            },

            // SECTION 2: PEER ACCOUNTABILITY (4 elements: 2 standard, 1 challenge, 1 standard)
            {
                type: 'standard',
                category: 'Peer Accountability',
                question: "When a colleague consistently misses commitments that affect du...",
                options: [
                    { text: "Work around them silently", value: 1 },
                    { text: "Bei anderen beschweren, aber nicht bei ihnen", value: 2 },
                    { text: "Eventually mention it vaguely", value: 3 },
                    { text: "Address it directly after 2-3 occurrences", value: 4 },
                    { text: "Address it after the second miss with clear impact statement", value: 5 }
                ]
            },
            {
                type: 'challenge',
                category: 'Peer Accountability',
                question: "Peer Accountability Action Check",
                instruction: "Check all the accountability actions du've taken with peers (not reports) in the past month:",
                items: [
                    "Called out a missed deadline that affected me",
                    "Gave direct feedback on behavior or performance",
                    "Challenged a decision or approach respectfully",
                    "Asked for accountability from a peer on their commitment",
                    "Addressed a pattern I noticed rather than single incident"
                ]
            },
            {
                type: 'standard',
                category: 'Peer Accountability',
                question: "Holding peers accountable without formal authority feels...",
                options: [
                    { text: "Impossible - not my place at all", value: 1 },
                    { text: "Sehr unangenehm - ich vermeide es", value: 2 },
                    { text: "Unangenehm, aber manchmal notwendig", value: 3 },
                    { text: "Natural when done respectfully", value: 4 },
                    { text: "Essential - we're all responsible for team success", value: 5 }
                ]
            },
            {
                type: 'standard',
                category: 'Peer Accountability',
                question: "When peers hold du accountable, du...",
                options: [
                    { text: "Werde defensiv und wehre dich", value: 1 },
                    { text: "Feel attacked or criticized", value: 2 },
                    { text: "Accept it but feel uncomfortable", value: 3 },
                    { text: "Appreciate their courage to speak up", value: 4 },
                    { text: "Thank them genuinely - it's a gift", value: 5 }
                ]
            },

            // SECTION 3: STANDARDS MAINTENANCE (5 elements: 2 standard, 1 reflection, 1 exercise, 1 standard)
            {
                type: 'standard',
                category: 'Standards',
                question: "Wenn dich jemand bittet lower standards 'just this once'...",
                options: [
                    { text: "Normalerweise zustimmen, um Konflikt zu vermeiden", value: 1 },
                    { text: "Reluctantly agree while uncomfortable", value: 2 },
                    { text: "Negotiate a compromise", value: 3 },
                    { text: "Die meiste Zeit standhaft bleiben", value: 4 },
                    { text: "Never compromise - explain why standards exist", value: 5 }
                ]
            },
            {
                type: 'reflection',
                category: 'Standards',
                question: "Standards Reflection",
                prompt: "Think about a time recently when du compromised on quality or standards. What was the real cost - to du, the team, or the work? What would holding the line have required?"
            },
            {
                type: 'exercise',
                category: 'Standards',
                question: "Dein Non-Negotiables",
                instruction: "List dein 3 non-negotiable standards - the lines du won't compromise regardless von pressure (minimum 30 characters total).",
                placeholder: "Beispiel: 1) We ship with tests passing, 2) We give each other direct feedback within 48 hours, 3) We document decisions",
                minLength: 30
            },
            {
                type: 'standard',
                category: 'Standards',
                question: "Under pressure or tight deadlines, dein standards...",
                options: [
                    { text: "Drop significantly - speed wins", value: 1 },
                    { text: "Lower noticeably to meet deadlines", value: 2 },
                    { text: "Flex somewhat based on urgency", value: 3 },
                    { text: "Remain mostly stable", value: 4 },
                    { text: "Never change - pressure is when they matter most", value: 5 }
                ]
            },
            {
                type: 'standard',
                category: 'Standards',
                question: "Dein reputation for holding the line on quality is...",
                options: [
                    { text: "Flexible and accommodating", value: 1 },
                    { text: "Generally easy-going", value: 2 },
                    { text: "Moderate - firm on some things", value: 3 },
                    { text: "Known for being clear about standards", value: 4 },
                    { text: "Known as uncompromising on quality", value: 5 }
                ]
            },

            // SECTION 4: EARLY INTERVENTION (4 elements: 2 standard, 1 scenario, 1 standard)
            {
                type: 'standard',
                category: 'Early Intervention',
                question: "Wenn bemerkst du a small issue, spricht du an it...",
                options: [
                    { text: "Rarely - wait to see if it's a pattern", value: 1 },
                    { text: "Occasionally - only if it persists", value: 2 },
                    { text: "Sometimes - depends on severity", value: 3 },
                    { text: "Usually - prefer early intervention", value: 4 },
                    { text: "Always - small issues become big problems", value: 5 }
                ]
            },
            {
                type: 'scenario',
                category: 'Early Intervention',
                question: "The Late Teammate",
                story: "A teammate has been 5-10 Minuten late to dein team's daily standup for the past three days. Everyone else is on time. No one has said anything yet. What do du do?",
                options: [
                    { text: "Nothing - 5 Minuten isn't worth mentioning", value: 1 },
                    { text: "Make a joke about it but don't address seriously", value: 2 },
                    { text: "Bring it up if it continues for a full week", value: 3 },
                    { text: "Pull them aside today: 'Hey, noticed du've been late...'", value: 4 },
                    { text: "Address it today privately with curiosity: 'Is everything ok? Noticed the pattern...'", value: 5 }
                ]
            },
            {
                type: 'standard',
                category: 'Early Intervention',
                question: "Dein default timing for addressing behavioral issues is...",
                options: [
                    { text: "Wait weeks or longer", value: 1 },
                    { text: "Usually wait a week+", value: 2 },
                    { text: "A few days typically", value: 3 },
                    { text: "Within 24-48 hours", value: 4 },
                    { text: "Same day whenever possible", value: 5 }
                ]
            },
            {
                type: 'standard',
                category: 'Early Intervention',
                question: "Dein belief about addressing issues early is...",
                options: [
                    { text: "Often overreacting to small things", value: 1 },
                    { text: "Risky - might make things worse", value: 2 },
                    { text: "H√§ngt von der Situation ab", value: 3 },
                    { text: "Usually the right call", value: 4 },
                    { text: "Always better - prevents escalation", value: 5 }
                ]
            },

            // SECTION 5: UNCOMFORTABLE TRUTH (4 elements: 2 standard, 1 reflection, 1 challenge)
            {
                type: 'standard',
                category: 'Uncomfortable Truth',
                question: "Wenn du know something important but risky to say...",
                options: [
                    { text: "Keep it to myself completely", value: 1 },
                    { text: "Tell someone else privately", value: 2 },
                    { text: "Hint at it indirectly", value: 3 },
                    { text: "Say it but svontly", value: 4 },
                    { text: "Say it clearly despite risk", value: 5 }
                ]
            },
            {
                type: 'scenario',
                category: 'Uncomfortable Truth',
                question: "The Failing Project",
                story: "Du're on a project team. It's clear to du that the project won't meet its goals with the current approach, but leadership is publicly committed to this path. No one is speaking up. What do du do?",
                options: [
                    { text: "Stay quiet - leadership must know something I don't", value: 1 },
                    { text: "Mention concerns only to trusted peers", value: 2 },
                    { text: "Ask leading questions in meetings without stating my view", value: 3 },
                    { text: "State my concerns clearly but only when asked", value: 4 },
                    { text: "Proactively share my assessment with specifics: 'Here's what I'm seeing...'", value: 5 }
                ]
            },
            {
                type: 'reflection',
                category: 'Uncomfortable Truth',
                prompt: "What's one truth du haven't spoken recently because it felt too risky? What's the actual cost von dein silence - to du, to the team, to the work?"
            },
            {
                type: 'challenge',
                category: 'Uncomfortable Truth',
                question: "Truth-Telling Track Record",
                instruction: "Check the uncomfortable truths du HAVE spoken in the past quarter:",
                items: [
                    "Challenged a leader's decision or direction",
                    "Named a team dysfunction that others were avoiding",
                    "Gave feedback that could have hurt a relationship",
                    "Spoke up about something risky for my career",
                    "Said what everyone was thinking but no one would say"
                ]
            },
            {
                type: 'standard',
                category: 'Uncomfortable Truth',
                question: "Dein track record von speaking difficult truths is...",
                options: [
                    { text: "Rarely - too risky", value: 1 },
                    { text: "Occasionally - only when forced", value: 2 },
                    { text: "Sometimes - when stakes are high", value: 3 },
                    { text: "Regularly - when it matters", value: 4 },
                    { text: "Consistently - it's my responsibility", value: 5 }
                ]
            }
        ];

        // State management
        let currentFrage = 0;
        let answers = {};
        let questionStartTime = Date.now();

        // Category mapping for scoring
        const categoryFragen = {
            'Direct Feedback': [],
            'Peer Accountability': [],
            'Standards': [],
            'Early Intervention': [],
            'Uncomfortable Truth': []
        };

        // Build category mapping
        questions.forEach((q, index) => {
            if (categoryFragen[q.category]) {
                categoryFragen[q.category].push(index);
            }
        });

<!-- ============================================================================ -->
<!-- END OF PART 2 -->
<!-- NEXT: Insert PART 3 (Main functions for rendering different question types) -->
<!-- ============================================================================ -->
<!-- ============================================================================ -->
<!-- PART 3: MAIN FUNCTIONS (Rendering logic for all question types) -->
<!-- Copy this AFTER Part 2, BEFORE Part 4 -->
<!-- ============================================================================ -->

        function startAssessment() {
            document.getElementById('introSection').style.display = 'none';
            document.getElementById('questionSection').style.display = 'block';
            document.getElementById('progressContainer').classList.add('active');
            showFrage(0);
        }

        function showFrage(index) {
            currentFrage = index;
            const q = questions[index];
            const card = document.getElementById('questionCard');
            
            // Route to appropriate renderer based on type
            if (q.type === 'standard') {
                renderStandardFrage(q, card, index);
            } else if (q.type === 'exercise') {
                renderExercise(q, card, index);
            } else if (q.type === 'scenario') {
                renderScenario(q, card, index);
            } else if (q.type === 'reflection') {
                renderReflection(q, card, index);
            } else if (q.type === 'challenge') {
                renderChallenge(q, card, index);
            }
            
            updateProgress();
            updateNavigationButtons();
        }

        function renderStandardFrage(q, card, index) {
            const selectedValue = answers[index] || null;
            
            let sectionHeader = '';
            if (index === 0 || questions[index-1].category !== q.category) {
                sectionHeader = `
                    <div class="section-header">
                        <h3>Section: ${q.category}</h3>
                        <p>Testing dein ${q.category.toLowerCase()} capabilities</p>
                    </div>
                `;
            }
            
            card.innerHTML = `
                ${sectionHeader}
                <div class="question-number">ELEMENT ${index + 1} OF ${questions.length} ‚Ä¢ STANDARD QUESTION</div>
                <div class="question-text">${q.question}</div>
                <div class="options">
                    ${q.options.map((opt, i) => `
                        <label class="option ${selectedValue === opt.value ? 'selected' : ''}" onclick="selectOption(${index}, ${opt.value}, this)">
                            <input type="radio" name="q${index}" value="${opt.value}" ${selectedValue === opt.value ? 'checked' : ''}>
                            ${opt.text}
                        </label>
                    `).join('')}
                </div>
            `;
        }

        function renderExercise(q, card, index) {
            const savedText = answers[index] || '';
            
            let sectionHeader = '';
            if (index === 0 || questions[index-1].category !== q.category) {
                sectionHeader = `
                    <div class="section-header">
                        <h3>Section: ${q.category}</h3>
                        <p>Testing dein ${q.category.toLowerCase()} capabilities</p>
                    </div>
                `;
            }
            
            card.innerHTML = `
                ${sectionHeader}
                <div class="question-card exercise-card">
                    <div class="question-number">ELEMENT ${index + 1} OF ${questions.length} ‚Ä¢ EXERCISE</div>
                    <div class="question-text">${q.question}</div>
                    <div class="exercise-instruction">
                        <p><strong>Instructions:</strong> ${q.instruction}</p>
                    </div>
                    <textarea 
                        class="exercise-textarea" 
                        id="exercise-${index}" 
                        placeholder="${q.placeholder}"
                        oninput="handleExerciseInput(${index})"
                    >${savedText}</textarea>
                </div>
            `;
        }

        function renderScenario(q, card, index) {
            const selectedValue = answers[index] || null;
            
            let sectionHeader = '';
            if (index === 0 || questions[index-1].category !== q.category) {
                sectionHeader = `
                    <div class="section-header">
                        <h3>Section: ${q.category}</h3>
                        <p>Testing dein ${q.category.toLowerCase()} capabilities</p>
                    </div>
                `;
            }
            
            card.innerHTML = `
                ${sectionHeader}
                <div class="question-card scenario-card">
                    <div class="question-number">ELEMENT ${index + 1} OF ${questions.length} ‚Ä¢ SCENARIO</div>
                    <div class="question-text">${q.question}</div>
                    <div class="scenario-story">
                        <p>${q.story}</p>
                    </div>
                    <div class="options">
                        ${q.options.map((opt, i) => `
                            <label class="option ${selectedValue === opt.value ? 'selected' : ''}" onclick="selectOption(${index}, ${opt.value}, this)">
                                <input type="radio" name="q${index}" value="${opt.value}" ${selectedValue === opt.value ? 'checked' : ''}>
                                ${opt.text}
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderReflection(q, card, index) {
            const isAbgeschlossen = answers[index] === true;
            
            let sectionHeader = '';
            if (index === 0 || questions[index-1].category !== q.category) {
                sectionHeader = `
                    <div class="section-header">
                        <h3>Section: ${q.category}</h3>
                        <p>Testing dein ${q.category.toLowerCase()} capabilities</p>
                    </div>
                `;
            }
            
            card.innerHTML = `
                ${sectionHeader}
                <div class="question-card reflection-card">
                    <div class="question-number">ELEMENT ${index + 1} OF ${questions.length} ‚Ä¢ REFLECTION</div>
                    <div class="question-text">${q.question}</div>
                    <div class="reflection-prompt">
                        <p>${q.prompt}</p>
                    </div>
                    <button 
                        class="btn ${isAbgeschlossen ? 'btn-secondary' : 'btn-primary'}" 
                        onclick="completeReflection(${index})"
                        style="width: 100%;"
                    >
                        ${isAbgeschlossen ? '‚úì Reflection Acknowledged' : 'I\'ve Reflected on This ‚Üí'}
                    </button>
                </div>
            `;
        }

        function renderChallenge(q, card, index) {
            const checkedItems = answers[index] || [];
            
            let sectionHeader = '';
            if (index === 0 || questions[index-1].category !== q.category) {
                sectionHeader = `
                    <div class="section-header">
                        <h3>Section: ${q.category}</h3>
                        <p>Testing dein ${q.category.toLowerCase()} capabilities</p>
                    </div>
                `;
            }
            
            card.innerHTML = `
                ${sectionHeader}
                <div class="question-card challenge-card">
                    <div class="question-number">ELEMENT ${index + 1} OF ${questions.length} ‚Ä¢ CHALLENGE</div>
                    <div class="question-text">${q.question}</div>
                    <div class="challenge-instruction">
                        <p><strong>Instructions:</strong> ${q.instruction}</p>
                    </div>
                    <div class="checklist">
                        ${q.items.map((item, i) => `
                            <label class="checklist-item ${checkedItems.includes(i) ? 'checked' : ''}" onclick="handleChecklistChange(${index}, ${i})">
                                <input type="checkbox" ${checkedItems.includes(i) ? 'checked' : ''}>
                                <span>${item}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function selectOption(questionIndex, value, element) {
            answers[questionIndex] = value;
            
            // Update UI
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            
            updateNavigationButtons();
        }

        function handleExerciseInput(index) {
            const textarea = document.getElementById(`exercise-${index}`);
            const text = textarea.value.trim();
            const minLength = questions[index].minLength || 10;
            
            if (text.length >= minLength) {
                answers[index] = text;
            } else {
                delete answers[index];
            }
            
            updateNavigationButtons();
        }

        function completeReflection(index) {
            answers[index] = true;
            renderReflection(questions[index], document.getElementById('questionCard'), index);
            updateNavigationButtons();
        }

        function handleChecklistChange(questionIndex, itemIndex) {
            if (!answers[questionIndex]) {
                answers[questionIndex] = [];
            }
            
            if (answers[questionIndex].includes(itemIndex)) {
                answers[questionIndex] = answers[questionIndex].filter(i => i !== itemIndex);
            } else {
                answers[questionIndex].push(itemIndex);
            }
            
            renderChallenge(questions[questionIndex], document.getElementById('questionCard'), questionIndex);
            updateNavigationButtons();
        }

        function updateProgress() {
            const percent = Math.round(((currentFrage + 1) / questions.length) * 100);
            document.getElementById('currentQ').textContent = currentFrage + 1;
            document.getElementById('progress-percent').textContent = percent;
            document.getElementById('progressFill').style.width = percent + '%';
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = currentFrage === 0;
            prevBtn.style.opacity = currentFrage === 0 ? '0.5' : '1';
            
            const hasAnswer = answers[currentFrage] !== undefined && answers[currentFrage] !== null;
            nextBtn.disabled = !hasAnswer;
            nextBtn.style.opacity = hasAnswer ? '1' : '0.5';
            
            if (currentFrage === questions.length - 1) {
                nextBtn.textContent = 'View Results ‚Üí';
            } else {
                nextBtn.textContent = 'Weiter ‚Üí';
            }
        }

        function nextFrage() {
            if (currentFrage < questions.length - 1) {
                showFrage(currentFrage + 1);
            } else {
                showResults();
            }
        }

        function previousFrage() {
            if (currentFrage > 0) {
                showFrage(currentFrage - 1);
            }
        }

        function showResults() {
            document.getElementById('questionSection').style.display = 'none';
            document.getElementById('progressContainer').style.display = 'none';
            document.getElementById('resultsSection').classList.add('active');
            
            calculateResults();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

<!-- ============================================================================ -->
<!-- END OF PART 3 -->
<!-- NEXT: Insert PART 4 (Results calculation with category scoring and closing) -->
<!-- ============================================================================ -->
<!-- ============================================================================ -->
<!-- PART 4: RESULTS CALCULATION & CLOSING (Final part) -->
<!-- Copy this AFTER Part 3 to complete the file -->
<!-- ============================================================================ -->

        function calculateResults() {
            // Calculate scores by category
            const categoryScores = {};
            let totalPoints = 0;
            let totalPossible = 0;
            
            Object.keys(categoryFragen).forEach(category => {
                let categoryPoints = 0;
                let categoryPossible = 0;
                
                categoryFragen[category].forEach(qIndex => {
                    const q = questions[qIndex];
                    const answer = answers[qIndex];
                    
                    if (q.type === 'standard' || q.type === 'scenario') {
                        categoryPoints += answer || 0;
                        categoryPossible += 5;
                    } else if (q.type === 'exercise') {
                        // Exercise scored as complete (5) or incomplete (0)
                        if (answer && answer.length >= (q.minLength || 10)) {
                            categoryPoints += 5;
                        }
                        categoryPossible += 5;
                    } else if (q.type === 'reflection') {
                        // Reflection scored as complete (5) or incomplete (0)
                        if (answer === true) {
                            categoryPoints += 5;
                        }
                        categoryPossible += 5;
                    } else if (q.type === 'challenge') {
                        // Challenge scored based on items checked (1 point each)
                        const itemsChecked = Array.isArray(answer) ? answer.length : 0;
                        const totalItems = q.items.length;
                        categoryPoints += itemsChecked;
                        categoryPossible += totalItems;
                    }
                });
                
                categoryScores[category] = {
                    points: categoryPoints,
                    possible: categoryPossible,
                    percentage: categoryPossible > 0 ? Math.round((categoryPoints / categoryPossible) * 100) : 0
                };
                
                totalPoints += categoryPoints;
                totalPossible += categoryPossible;
            });
            
            const overallPercentage = Math.round((totalPoints / totalPossible) * 100);
            
            displayResults(overallPercentage, categoryScores);
            
            // Save to localStorage
            localStorage.setItem('brownBeltStripe4Abgeschlossen', 'true');
                    window.dispatchEvent(new CustomEvent(\'lessonAbgeschlossend\'));
            localStorage.setItem('brownBeltStripe4Score', overallPercentage);
        }

        function displayResults(percentage, categoryScores) {
            // Display overall score
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Determine tier and label
            let tier, label, description, strengths, gaps, nextSteps;
            
            if (percentage >= 80) {
                tier = 'mastery';
                label = 'Accountability Mastery';
                description = 'Du demonstrate exceptional accountability across all dimensions. h√§ltst du dich selbst and others to high standards, intervene early, speak difficult truths, and maintain consistency under pressure.';
                strengths = [
                    'Du give direct feedback even when uncomfortable',
                    'h√§ltst du peers accountable without formal authority',
                    'Du maintain standards under pressure',
                    'spricht du an issues early before they escalate',
                    'Du speak uncomfortable truths when necessary'
                ];
                gaps = [
                    'Weiter refining ist dein Ansatz with the most resistant personalities',
                    'Build systems that make accountability easier for others',
                    'Mentor others in developing these skills'
                ];
                nextSteps = [
                    'Lead by example - dein consistency sets the standard',
                    'Coach others on accountability conversations',
                    'Design team rituals that reinforce accountability',
                    'Challenge dich selbst with increasingly difficult conversations',
                    'Prepare for Black Belt: Strategic Leadership'
                ];
            } else if (percentage >= 65) {
                tier = 'strong';
                label = 'Strong Accountability Foundation';
                description = 'Du have solid accountability skills and use them regularly. h√§ltst du the line die meiste Zeit, though certain situations or relationships still challenge du.';
                strengths = [
                    'Du give feedback when necessary',
                    'Du maintain standards in most situations',
                    'spricht du an issues reasonably quickly',
                    'Du speak up on important matters'
                ];
                gaps = [
                    'Some relationships or power dynamics still intimidate du',
                    'Du occasionally compromise standards under pressure',
                    'Follow-through could be more consistent',
                    'Some difficult truths remain unspoken'
                ];
                nextSteps = [
                    'Identify dein specific accountability gaps (people, situations, topics)',
                    'Practice giving feedback in lower-stakes situations first',
                    'Build accountability check-ins into dein routine',
                    'Find an accountability partner to practice with',
                    'Retake Stripe 4 in 30 days to measure progress'
                ];
            } else if (percentage >= 50) {
                tier = 'developing';
                label = 'Developing Accountability';
                description = 'Du verstehst accountability intellectually but struggle with consistent application. Du avoid difficult conversations more than du engage them, and dein standards vary based on pressure and relationships.';
                strengths = [
                    'Du recognize when Verantwortlichkeit ist needed',
                    'Du have given difficult feedback at times',
                    'Du want to improve in this area'
                ];
                gaps = [
                    'Du frequently avoid difficult conversations',
                    'Du compromise standards regularly under pressure',
                    'Du wait too long to address issues',
                    'Du struggle to hold peers accountable',
                    'Many uncomfortable truths remain unspoken'
                ];
                nextSteps = [
                    'Review all Brown Belt Stripes 1-3 focusing on practical application',
                    'Schedule one accountability conversation this week',
                    'Practice with lower-stakes feedback first',
                    'Find a mentor who models strong accountability',
                    'Join peer practice groups or coaching circles',
                    'Retake Stripe 4 in 60 days'
                ];
            } else {
                tier = 'foundational';
                label = 'Foundational Work Needed';
                description = 'Verantwortlichkeit ist currently a significant gap in dein leadership. Du avoid difficult conversations, compromise standards frequently, and struggle to speak up even when necessary. This is limiting dein effectiveness and the team\'s performance.';
                strengths = [
                    'Du completed this assessment honestly',
                    'Du\'re aware this is a development area',
                    'Du have the opportunity to transform this weakness'
                ];
                gaps = [
                    'Du consistently avoid accountability conversations',
                    'Du rarely give direct feedback',
                    'Standards drop significantly under any pressure',
                    'Du don\'t hold peers accountable',
                    'Uncomfortable truths remain unspoken'
                ];
                nextSteps = [
                    'This is dein #1 leadership development priority',
                    'Restart from Brown Belt Stripe 1 with intense focus',
                    'Hire a coach or find a mentor for 1:1 support',
                    'Practice basic feedback with trusted colleagues first',
                    'Read "Crucial Conversations" and practice the models',
                    'Schedule weekly accountability practice sessions',
                    'Retake Stripe 4 in 90 days'
                ];
            }
            
            document.getElementById('scoreLabel').textContent = label;
            
            // Display category scores
            const categoryContainer = document.getElementById('categoryScores');
            categoryContainer.innerHTML = Object.keys(categoryScores)
                .map(category => {
                    const score = categoryScores[category];
                    return `
                        <div class="category-item">
                            <div class="category-name">${category}: ${score.percentage}%</div>
                            <div class="category-bar">
                                <div class="category-fill" style="width: ${score.percentage}%"></div>
                            </div>
                        </div>
                    `;
                })
                .join('');
            
            // Display recommendation
            const recommendationHTML = `
                <h3>${label}</h3>
                <p style="color: var(--text-muted); margin-bottom: 1.5rem;">${description}</p>
                
                <div style="background: var(--light-bg); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h4 style="color: var(--primary-brown); margin-bottom: 1rem;">‚úÖ Dein Strengths:</h4>
                    <ul style="margin-left: 1.5rem; line-height: 1.8;">
                        ${strengths.map(s => `<li>${s}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="background: #fef3c7; padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h4 style="color: var(--warning-orange); margin-bottom: 1rem;">‚ö†Ô∏è Development Areas:</h4>
                    <ul style="margin-left: 1.5rem; line-height: 1.8;">
                        ${gaps.map(g => `<li>${g}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="action-plan">
                    <h4>üéØ Dein 30-Day Action Plan:</h4>
                    <ol style="margin-left: 1.5rem; line-height: 1.8;">
                        ${nextSteps.map(step => `<li>${step}</li>`).join('')}
                    </ol>
                </div>
                
                <div style="background: linear-gradient(135deg, #f5e6d3 0%, #e8d5c4 100%); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: center;">
                    <p style="font-size: 1.1rem; color: var(--primary-brown); margin: 0;">
                        <strong>üèÜ Brown Belt Abgeschlossen!</strong><br>
                        ${percentage >= 80 ? 'Du\'re ready for Black Belt: Strategic Leadership' : 'Weiter practicing, then advance when ready'}
                    </p>
                </div>
            `;
            
            document.getElementById('recommendation').innerHTML = recommendationHTML;
        }
    
        function getStripeNumber() {
            const match = window.location.pathname.match(/stripe(\d+)/);
            return match ? parseInt(match[1]) : 1;
        }
        
        function retryQuiz() {
            quizAnswers = [];
            quizScore = 0;
            document.querySelectorAll('.quiz-question').forEach(question => {
                const options = question.querySelectorAll('.quiz-option');
                options.forEach(opt => {
                    opt.style.pointerEvents = 'auto';
                    opt.classList.remove('selected-correct', 'selected-incorrect');
                });
                const feedback = question.querySelector('.quiz-feedback');
                if (feedback) {
                    feedback.style.display = 'none';
                    feedback.classList.remove('correct', 'incorrect');
                }
            });
            const completionDiv = document.querySelector('.quiz-completion');
            if (completionDiv) completionDiv.style.display = 'none';
            const firstFrage = document.querySelector('.quiz-question');
            if (firstFrage) firstFrage.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function scrollToLessons() {
            const lessonsSection = document.querySelector('.intro-section, .main-card, .header');
            if (lessonsSection) {
                lessonsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }</script>

    <!-- Gamification System -->
    <!-- Performance Optimizer - Load First -->
<script src="js/performance-optimizer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script src="js/xp-level-system.js"></script>
<script src="js/gamification-celebrations.js"></script>
    <script src="js/gamification.js" defer></script>
    <script src="js/stripe-completion-helper.min.js" defer></script>
<!-- TAP-IN Utilities -->
<script src="js/shared-utilities.js"></script>
<script src="js/global-error-handler.min.js"></script>
<script src="js/storage-health.min.js"></script>
<script>
        // Quiz functionality
        let quizAnswers = [];
        let quizScore = 0;
        const totalQuizFragen = 0;

        function selectQuizAnswer(questionNum, optionElement) {
            // Disable all options for this question
            const question = document.querySelector(`[data-question="${questionNum}"]`);
            const options = question.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.disabled = true;
                opt.style.pointerEvents = 'none';
            });
            
            // Check if correct
            const isCorrect = optionElement.dataset.correct === 'true';
            
            // Visual feedback
            optionElement.classList.add(isCorrect ? 'selected-correct' : 'selected-incorrect');
            
            // Show feedback
            const feedbackDiv = question.querySelector('.quiz-feedback');
            feedbackDiv.style.display = 'block';
            feedbackDiv.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            if (isCorrect) {
                feedbackDiv.querySelector('.feedback-text').textContent = 
                    "‚úÖ Correct! " + (optionElement.dataset.explanation || '');
                quizScore++;
            } else {
                // Highlight correct answer
                options.forEach(opt => {
                    if (opt.dataset.correct === 'true') {
                        opt.classList.add('selected-correct');
                    }
                });
                feedbackDiv.querySelector('.feedback-text').textContent = 
                    "‚ùå Not quite. " + (optionElement.dataset.explanation || '');
            }
            
            // Track answer
            quizAnswers[questionNum - 1] = isCorrect;
            
            // Check if all answered
            checkQuizCompletion();
        }

        function checkQuizCompletion() {
            const totalFragen = document.querySelectorAll('.quiz-question').length;
            const answered = quizAnswers.filter(a => a !== undefined).length;
            
            if (answered === totalFragen) {
                const completionDiv = document.querySelector('.quiz-completion');
                completionDiv.style.display = 'block';
                
                // Check if passed
                const passingThreshold = 7;
                const passed = quizScore >= passingThreshold;
                
                if (passed) {
                    // PASSED - Show success message
                    completionDiv.innerHTML = `
                        <h3>Quiz Abgeschlossen! üéâ</h3>
                        <p class="quiz-score">Deine Punktzahl: <span id="quizScore">${quizScore}</span>/10</p>
                        <p class="quiz-xp">+${quizScore === 10 ? 75 : 50} XP awarded!</p>
                        <button class="btn-primary" onclick="completeQuiz(getStripeNumber())">Weiter</button>
                    `;
                    document.getElementById('quizScore').textContent = quizScore;
                    
                    // Award XP
                    const xpAmount = quizScore === 10 ? 75 : 50;
                    awardQuizXP(xpAmount);
                } else {
                    // FAILED - Show belt-specific submission message
                    const failedFragen = [];
                    quizAnswers.forEach((isCorrect, index) => {
                        if (!isCorrect) {
                            const question = document.querySelector(`[data-question="${index + 1}"]`);
                            if (question) {
                                const questionText = question.querySelector('.question-text')?.textContent || `Frage ${index + 1}`;
                                failedFragen.push({
                                    num: index + 1,
                                    text: questionText.substring(0, 80) + (questionText.length > 80 ? '...' : '')
                                });
                            }
                        }
                    });
                    
                    completionDiv.innerHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">üü§</div>
                            <h3 style="color: #dc2626; margin-bottom: 1rem; font-size: 1.5rem;">Du Got Submitted by a Brown Belt! ü•ã</h3>
                            <p style="color: #64748b; margin-bottom: 2rem; line-height: 1.6; font-size: 1rem;">Der Brown Belt hat L√ºcken aufgedeckt in dein knowledge. Das ist fortgeschrittenes Material - nimm dir Zeit zum √úberpr√ºfen, dann komm zur√ºck, bereit.</p>
                            
                            <div style="background: #fef2f2; border: 2px solid #fecaca; border-radius: 12px; padding: 1.5rem; margin: 2rem 0; text-align: left;">
                                <h4 style="color: #991b1b; margin-bottom: 1rem; font-size: 1.1rem;">üìö Review These Fragen:</h4>
                                <ul style="color: #7f1d1d; line-height: 1.8; margin-left: 1.5rem; font-size: 0.95rem;">
                                    ${failedFragen.map(q => `<li style="margin-bottom: 0.5rem;"><strong>Frage ${q.num}:</strong> ${q.text}</li>`).join('')}
                                </ul>
                                <p style="color: #991b1b; margin-top: 1rem; font-size: 0.9rem;">
                                    <strong>üí° Tipp:</strong> Scrolle nach oben, um die Lektionen zu √ºberpr√ºfen und Szenarien, dann wiederhole das Quiz!
                                </p>
                            </div>
                            
                            <div style="margin-top: 2rem;">
                                <button class="btn-primary" onclick="retryQuiz()" style="margin-right: 1rem; padding: 12px 24px; font-size: 1rem;">üîÑ Quiz wiederholen</button>
                                <button class="btn-secondary" onclick="scrollToLessons()" style="padding: 12px 24px; font-size: 1rem;">üìñ Lektionen √ºberpr√ºfen</button>
                            </div>
                            
                            <p style="color: #64748b; margin-top: 1.5rem; font-size: 0.9rem;">Ergebnis: ${quizScore}/10 (Ben√∂tigt ${passingThreshold}/10 zum Bestehen)</p>
                        </div>
                    `;
                    
                    // Award small XP for attempt
                    awardQuizXP(10);
                }
                
                // Scroll to completion
                completionDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }</span>/10</p>
                        <p class="quiz-xp">+${quizScore === 10 ? 75 : 50} XP awarded!</p>
                        <button class="btn-primary" onclick="completeQuiz(getStripeNumber())">Weiter</button>
                    `;
                    document.getElementById('quizScore').textContent = quizScore;
                    
                    // Award XP
                    const xpAmount = quizScore === 10 ? 75 : 50;
                    awardQuizXP(xpAmount);
                } else {
                    // FAILED - Show belt-specific submission message
                    const failedFragen = [];
                    quizAnswers.forEach((isCorrect, index) => {
                        if (!isCorrect) {
                            const question = document.querySelector(`[data-question="${index + 1}"]`);
                            if (question) {
                                const questionText = question.querySelector('.question-text')?.textContent || `Frage ${index + 1}`;
                                failedFragen.push({
                                    num: index + 1,
                                    text: questionText.substring(0, 80) + (questionText.length > 80 ? '...' : '')
                                });
                            }
                        }
                    });
                    
                    completionDiv.innerHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">üü§</div>
                            <h3 style="color: #dc2626; margin-bottom: 1rem; font-size: 1.5rem;">Du Got Submitted by a Brown Belt! ü•ã</h3>
                            <p style="color: #64748b; margin-bottom: 2rem; line-height: 1.6; font-size: 1rem;">Der Brown Belt hat L√ºcken aufgedeckt in dein knowledge. Das ist fortgeschrittenes Material - nimm dir Zeit zum √úberpr√ºfen, dann komm zur√ºck, bereit.</p>
                            
                            <div style="background: #fef2f2; border: 2px solid #fecaca; border-radius: 12px; padding: 1.5rem; margin: 2rem 0; text-align: left;">
                                <h4 style="color: #991b1b; margin-bottom: 1rem; font-size: 1.1rem;">üìö Review These Fragen:</h4>
                                <ul style="color: #7f1d1d; line-height: 1.8; margin-left: 1.5rem; font-size: 0.95rem;">
                                    ${failedFragen.map(q => `<li style="margin-bottom: 0.5rem;"><strong>Frage ${q.num}:</strong> ${q.text}</li>`).join('')}
                                </ul>
                                <p style="color: #991b1b; margin-top: 1rem; font-size: 0.9rem;">
                                    <strong>üí° Tipp:</strong> Scrolle nach oben, um die Lektionen zu √ºberpr√ºfen und Szenarien, dann wiederhole das Quiz!
                                </p>
                            </div>
                            
                            <div style="margin-top: 2rem;">
                                <button class="btn-primary" onclick="retryQuiz()" style="margin-right: 1rem; padding: 12px 24px; font-size: 1rem;">üîÑ Quiz wiederholen</button>
                                <button class="btn-secondary" onclick="scrollToLessons()" style="padding: 12px 24px; font-size: 1rem;">üìñ Lektionen √ºberpr√ºfen</button>
                            </div>
                            
                            <p style="color: #64748b; margin-top: 1.5rem; font-size: 0.9rem;">Ergebnis: ${quizScore}/10 (Ben√∂tigt ${passingThreshold}/10 zum Bestehen)</p>
                        </div>
                    `;
                    
                    // Award small XP for attempt
                    awardQuizXP(10);
                }
                
                // Scroll to completion
                completionDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });
            }
        }

        function awardQuizXP(amount) {
            // Use existing XP system if available
            if (typevon TapInGamification !== 'undefined' && TapInGamification.awardXP) {
                TapInGamification.awardXP(amount, 'Quiz Completion');
            } else {
                // Fallback to localStorage
                const currentXP = parseInt(localStorage.getItem('totalXP') || '0');
                const newXP = currentXP + amount;
                localStorage.setItem('totalXP', newXP.toString());
            }
        }

        function completeQuiz(stripeNum) {
            // Mark quiz complete
            const storageKey = 'brownbeltStripe' + stripeNum + 'QuizAbgeschlossen';
            localStorage.setItem(storageKey, 'true');
            localStorage.setItem(storageKey + 'Score', quizScore.toString());
            localStorage.setItem(storageKey + 'Date', new Date().toISOString());
            
            // Navigate to next stripe or back to hub
            const nextStripe = stripeNum + 1;
            if (nextStripe <= 4) {
                if (confirm('Quiz Abgeschlossen! Weiter to Stripe ' + nextStripe + '?')) {
                    window.location.href = 'brown-belt-stripe' + nextStripe + '-gamified-de.html';
                } else {
                    window.location.href = 'gym-dashboard-de.html';
                }
            } else {
                alert('üéâ Brown Belt Abgeschlossen! Ready for the next level.');
                window.location.href = 'gym-dashboard-de.html';
            }
        }
</script>
    <!-- TAP-IN Core Modules -->
    <script src="js/language-switcher.min.js"></script>
    <script src="js/meta-tags-manager.js"></script>
    <script src="js/achievement-badges.js"></script>
    <script src="js/structured-data.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(function(registration) {
                        console.log('Service Worker registered:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', function() {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', function() {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New service worker available
                                    console.log('New service worker available');
                                }
                            });
                        });
                    })
                    .catch(function(error) {
                        // Silent fail - not critical
                    });
            });
        }
    </script>
    <script src="js/pwa-install-prompt.js"></script>

    <!-- Screen Reader Enhancements for Accessibility -->
    <script src="js/screen-reader-enhancements.js" defer></script>
</body>
</html>

<!-- ============================================================================ -->
<!-- END OF PART 4 - FILE COMPLETE -->
<!-- ============================================================================ -->
<!-- 
ASSEMBLY INSTRUCTIONS:
1. Copy Part 1 content
2. Copy Part 2 content immediately after Part 1
3. Copy Part 3 content immediately after Part 2
4. Copy Part 4 content immediately after Part 3
5. Save as: brown-belt-stripe4-gamified-de.html
6. Test in browser

Total: ~1,887 lines assembled
22 varied elements across 5 categories
13-16 Minuten completion time
-->

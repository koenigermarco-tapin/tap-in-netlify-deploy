<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <!-- Preload Critical Resources -->
    <link rel="preload" href="/css/core-styles.css" as="style">
    <link rel="preload" href="/js/core-gamification.js" as="script">
    <link rel="preload" href="/css/accessibility.css" as="style">

    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:url" content="https://tap-in-platform.netlify.app/temp.html">
<meta property="og:title" content="Find Your Leadership Belt Level">
<meta property="og:description" content="Complete this assessment to discover your current leadership level and get a personalized training path.">
<meta property="og:image" content="/og-image.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://tap-in-platform.netlify.app/temp.html">
<meta property="twitter:title" content="Find Your Leadership Belt Level">
<meta property="twitter:description" content="Complete this assessment to discover your current leadership level and get a personalized training path.">
<meta property="twitter:image" content="/og-image.png">

    <title>TAP-IN Belt Assessment | Discover Your Starting Point</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/accessibility.css">
    <link rel="stylesheet" href="css/dark-mode.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-navy: #1a365d;
            --navy-light: #2d4a7c;
            --dark-bg: #1a1a1a;
            --dark-bg-2: #2d2d2d;
            --accent-red: #b91c1c;
            --card-bg: #ffffff;
            --border-light: #e2e8f0;
            --text-dark: #1a202c;
            --text-muted: #718096;
            --success-green: #38a169;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #4a7c9c 0%, #3d6680 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
            line-height: 1.6;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 2rem;
            color: white;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        /* Main Card */
        .assessment-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        }

        /* Intro Boxes */
        .intro-box {
            background: #f7fafc;
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .intro-box h3 {
            color: var(--primary-navy);
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .intro-box p {
            color: var(--text-dark);
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .intro-box ul {
            margin: 0.75rem 0;
            padding-left: 1.25rem;
        }

        .intro-box li {
            color: var(--text-dark);
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .intro-box em {
            color: var(--text-muted);
        }

        /* Philosophy Box - DARK */
        .intro-box.philosophy {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: none;
            border-left: 6px solid var(--accent-red);
        }

        .intro-box.philosophy h3 {
            color: #ffffff;
        }

        .intro-box.philosophy p {
            color: #e2e8f0;
        }

        .intro-box.philosophy strong {
            color: #ffffff;
        }

        /* Begin Button */
        .begin-button {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 2rem auto;
            padding: 1.25rem 2rem;
            background: linear-gradient(135deg, var(--primary-navy) 0%, var(--navy-light) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .begin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(26, 54, 93, 0.3);
        }

        /* Progress Container */
        .progress-container {
            margin-bottom: 2rem;
            display: none;
        }

        .section-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .section-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-align: center;
            flex: 1;
            padding: 0 0.25rem;
            transition: all 0.3s;
        }

        .section-label.active {
            color: var(--primary-navy);
            font-weight: 600;
        }

        .section-label.completed {
            color: var(--success-green);
        }

        .progress-bar {
            height: 8px;
            background: var(--border-light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-navy) 0%, var(--navy-light) 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Question Container */
        .question-container {
            display: none;
        }

        .question-number {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        /* Insight Card */
        .insight-card {
            background: #ffffff;
            border: 2px solid var(--primary-navy);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .insight-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .insight-title {
            font-weight: 700;
            color: var(--primary-navy);
            font-size: 1.05rem;
            margin-bottom: 0.5rem;
        }

        .insight-content {
            color: #4a5568;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }

        .insight-quote {
            font-style: italic;
            color: var(--text-muted);
            font-size: 0.85rem;
            border-left: 3px solid var(--primary-navy);
            padding-left: 1rem;
        }

        /* Scale Options */
        .scale-container {
            display: flex;
            justify-content: space-between;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .scale-option {
            flex: 1;
            padding: 1rem 0.5rem;
            background: #ffffff;
            border: 2px solid var(--border-light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text-dark);
        }

        .scale-option:hover {
            border-color: var(--primary-navy);
            background: #f7fafc;
        }

        .scale-option.selected {
            border-color: var(--primary-navy);
            background: var(--primary-navy);
            color: #ffffff;
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            padding: 0 0.25rem;
        }

        /* Multiple Choice Options */
        .choice-container {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin: 1rem 0;
        }

        .choice-option {
            padding: 1rem 1.25rem;
            background: #ffffff;
            border: 2px solid var(--border-light);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            font-size: 0.95rem;
            color: var(--text-dark);
        }

        .choice-option:hover {
            border-color: var(--primary-navy);
            background: #f7fafc;
        }

        .choice-option.selected {
            border-color: var(--primary-navy);
            background: var(--primary-navy);
            color: #ffffff;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.875rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .nav-btn.back {
            background: transparent;
            border: 2px solid var(--border-light);
            color: var(--text-muted);
        }

        .nav-btn.back:hover {
            border-color: var(--primary-navy);
            color: var(--primary-navy);
        }

        .nav-btn.next {
            background: linear-gradient(135deg, var(--primary-navy) 0%, var(--navy-light) 100%);
            border: none;
            color: white;
            flex: 1;
            max-width: 200px;
        }

        .nav-btn.next:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(26, 54, 93, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Stripe Unlock Overlay */
        .stripe-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .stripe-unlock {
            background: linear-gradient(135deg, var(--primary-navy) 0%, var(--navy-light) 100%);
            color: white;
            padding: 2.5rem 3rem;
            border-radius: 20px;
            text-align: center;
            animation: stripePopIn 0.5s ease-out;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            max-width: 400px;
        }

        @keyframes stripePopIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .stripe-unlock .belt-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .stripe-unlock h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .stripe-unlock p {
            color: #a0aec0;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }

        .stripe-unlock .stripe-visual {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .stripe-unlock .stripe {
            width: 40px;
            height: 8px;
            background: #4a5568;
            border-radius: 4px;
        }

        .stripe-unlock .stripe.filled {
            background: #f6e05e;
        }

        .stripe-continue {
            background: white;
            color: var(--primary-navy);
            border: none;
            padding: 0.875rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
        }

        /* Results Section */
        .results-container {
            display: none;
            text-align: center;
        }

        .belt-result {
            background: linear-gradient(135deg, var(--primary-navy) 0%, var(--navy-light) 100%);
            color: white;
            padding: 2.5rem;
            border-radius: 16px;
            margin-bottom: 2rem;
        }

        .belt-result .belt-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .belt-result h2 {
            font-size: 1rem;
            font-weight: 500;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .belt-result .belt-name {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .belt-result .belt-modifier {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 1rem;
        }

        .belt-result .belt-reason {
            font-size: 0.95rem;
            opacity: 0.9;
            max-width: 400px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Stripes Summary */
        .stripes-summary {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }

        .stripes-summary h3 {
            font-size: 1rem;
            color: var(--text-dark);
            margin-bottom: 0.75rem;
        }

        .stripe-row {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .stripe-row .stripe {
            width: 50px;
            height: 10px;
            background: #f6e05e;
            border-radius: 5px;
        }

        .stripes-summary p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Result Cards */
        .result-card {
            background: white;
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            text-align: left;
        }

        .result-card h3 {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .result-card .type-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-navy);
            margin-bottom: 0.5rem;
        }

        .result-card p {
            font-size: 0.9rem;
            color: var(--text-dark);
            line-height: 1.6;
        }

        /* Score Cards */
        .score-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .score-card {
            background: white;
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
        }

        .score-card h4 {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .score-card .score {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary-navy);
        }

        .score-card .score-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Growth Areas */
        .growth-areas {
            background: #fffaf0;
            border: 1px solid #f6e05e;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .growth-areas h3 {
            font-size: 1rem;
            color: var(--text-dark);
            margin-bottom: 0.75rem;
        }

        .growth-areas ul {
            margin: 0;
            padding-left: 1.25rem;
        }

        .growth-areas li {
            font-size: 0.9rem;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        /* Results CTA */
        .results-cta {
            margin-top: 2rem;
        }

        .results-cta .cta-subtext {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.75rem;
        }

        /* Responsive */
        @media (max-width: 600px) {
            body {
                padding: 1rem;
            }

            .assessment-card {
                padding: 1.5rem;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .question-text {
                font-size: 1.1rem;
            }

            .scale-container {
                gap: 0.25rem;
            }

            .scale-option {
                padding: 0.75rem 0.25rem;
                font-size: 1rem;
            }

            .score-cards {
                grid-template-columns: 1fr;
            }

            .stripe-unlock {
                margin: 1rem;
                padding: 2rem;
            }

            .section-label {
                font-size: 0.6rem;
            }
        }
    
/* Enhanced Focus Styles for Accessibility */
button:focus,
a:focus,
input:focus,
textarea:focus,
select:focus,
.stripe-item:focus,
.module-card:focus,
.entry-card:focus {
    outline: 3px solid #6366f1;
    outline-offset: 2px;
    box-shadow: 0 0 0 6px rgba(99, 102, 241, 0.2);
}

/* Screen reader only class */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}
</style>
    <link rel="canonical" href="https://tap-in-platform.netlify.app/belt-assessment-v2.html">

<body>
    <a href="#main-content" class="skip-link" style="position: absolute; top: -40px; left: 0; background: #6366f1; color: white; padding: 8px 16px; text-decoration: none; z-index: 9999; border-radius: 0 0 4px 0; font-weight: 600;"
    onfocus="this.style.top='0';" onblur="this.style.top='-40px';">Skip to main content</a>
    <div class="container">
        <div class="header">
            <h1>ü•ã TAP-IN Belt Assessment</h1>
            <p>Discover your starting point</p>
        </div>

        <div class="assessment-card">
            <!-- Intro Section -->
            <div id="intro-section">
                <div class="intro-box">
                    <h3>üéØ Why This Assessment?</h3>
                    <p>Before you can grow, you need to know where you stand. This assessment measures your self-awareness, energy patterns, trust capacity, and conflict skills‚Äîthe four foundations of personal development.</p>
                    <p>In 10-15 minutes, you'll discover your starting belt and get a personalized development path.</p>
                </div>

                <div class="intro-box philosophy">
                    <h3>ü•ã The Belt Philosophy</h3>
                    <p>In Brazilian Jiu-Jitsu, the belt doesn't lie. You can't fake your way to a higher level‚Äîyou earn it through consistent practice, honest self-assessment, and showing up when it's hard.</p>
                    <p>Personal development works the same way. Your starting belt isn't a judgment‚Äîit's a map. It shows you exactly where to focus so you can grow with purpose, not guesswork.</p>
                    <p><strong>Everyone starts somewhere. Champions just start.</strong></p>
                </div>

                <div class="intro-box">
                    <h3>üìã What to Expect</h3>
                    <ul>
                        <li><strong>28 questions</strong> across 4 sections</li>
                        <li><strong>Insight cards</strong> that teach as you go</li>
                        <li><strong>Stripe unlocks</strong> as you complete each section</li>
                        <li><strong>Your results:</strong> Starting belt + work rhythm + growth areas</li>
                    </ul>
                    <p><em>Answer honestly. There are no right or wrong answers‚Äîonly accurate and inaccurate ones.</em></p>
                </div>

                <button class="begin-button" onclick="startAssessment()" aria-label="ü•ã Begin Assessment">
                    ü•ã Begin Assessment
                </button>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container" id="progress-container">
                <div class="section-progress">
                    <span class="section-label" id="section-1-label">Know Yourself</span>
                    <span class="section-label" id="section-2-label">Your Energy</span>
                    <span class="section-label" id="section-3-label">Trust</span>
                    <span class="section-label" id="section-4-label">Conflict</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <!-- Question Container -->
            <div class="question-container" id="question-container"></div>

            <!-- Results Container -->
            <div class="results-container" id="results-container"></div>
        </div>
    </div>

    <!-- Stripe Unlock Overlay -->
    <div class="stripe-overlay" id="stripe-overlay">
        <div class="stripe-unlock" id="stripe-unlock-content"></div>
    </div>

    <script>
        // Questions Data
        const questions = [
            // SECTION 1: Know Yourself (Worker Type) - Q1-Q8
            {
                section: 1,
                text: "I prefer working on projects that have:",
                type: "choice",
                options: [
                    { text: "Clear deadlines within days or weeks", value: 1 },
                    { text: "Moderate timelines of 1-3 months", value: 2 },
                    { text: "Long-term horizons of 6+ months", value: 3 }
                ]
            },
            {
                section: 1,
                text: "My ideal work schedule looks like:",
                type: "choice",
                options: [
                    { text: "Intense bursts with significant breaks", value: 1 },
                    { text: "Consistent daily rhythm with regular hours", value: 2 },
                    { text: "Flexible long-term planning with variable intensity", value: 3 }
                ],
                insight: {
                    icon: "‚è±Ô∏è",
                    title: "Time Horizons Shape Decisions",
                    content: "Research from Harvard Business School shows that how you perceive time fundamentally shapes your decision-making. Some thrive on immediate challenges, others need long-term vision to stay motivated.",
                    quote: "Understanding your natural time orientation is the first step to sustainable productivity."
                }
            },
            {
                section: 1,
                text: "When facing a challenge, I typically:",
                type: "choice",
                options: [
                    { text: "Attack it immediately with full force", value: 1 },
                    { text: "Create a structured plan and work steadily", value: 2 },
                    { text: "Step back to see the bigger picture first", value: 3 }
                ]
            },
            {
                section: 1,
                text: "I feel most accomplished when:",
                type: "choice",
                options: [
                    { text: "Completing quick wins and seeing immediate results", value: 1 },
                    { text: "Making consistent daily progress", value: 2 },
                    { text: "Achieving long-term goals after sustained effort", value: 3 }
                ],
                insight: {
                    icon: "üß¨",
                    title: "Your Chronotype Matters",
                    content: "Neuroscience reveals we have built-in biological rhythms that affect when we do our best work. Fighting your chronotype leads to burnout; working with it leads to flow.",
                    quote: "Peak performance isn't about working harder‚Äîit's about working in rhythm."
                }
            },
            {
                section: 1,
                text: "My energy levels throughout the day:",
                type: "choice",
                options: [
                    { text: "Spike high then need recovery", value: 1 },
                    { text: "Stay relatively consistent", value: 2 },
                    { text: "Build slowly and sustain for long periods", value: 3 }
                ]
            },
            {
                section: 1,
                text: "When it comes to deadlines:",
                type: "choice",
                options: [
                    { text: "I work best under pressure close to the deadline", value: 1 },
                    { text: "I prefer steady progress with buffer time", value: 2 },
                    { text: "I think in phases, not single deadlines", value: 3 }
                ],
                insight: {
                    icon: "üéØ",
                    title: "Challenge Response Patterns",
                    content: "Stanford research on motivation shows people fall into distinct patterns when facing obstacles. Some charge forward, some pace themselves, some play the long game. None is better‚Äîjust different.",
                    quote: "Know your pattern, and you can design your environment to match."
                }
            },
            {
                section: 1,
                text: "My approach to learning new skills:",
                type: "choice",
                options: [
                    { text: "Intensive immersion to learn quickly", value: 1 },
                    { text: "Regular practice sessions over time", value: 2 },
                    { text: "Patient accumulation over months/years", value: 3 }
                ]
            },
            {
                section: 1,
                text: "I'm most motivated by:",
                type: "choice",
                options: [
                    { text: "Immediate rewards and recognition", value: 1 },
                    { text: "Steady progress and routine wins", value: 2 },
                    { text: "Vision of long-term transformation", value: 3 }
                ],
                insight: {
                    icon: "üîã",
                    title: "Energy Management > Time Management",
                    content: "The most productive people don't manage time‚Äîthey manage energy. Understanding whether you're a sprinter, jogger, or ultrarunner determines how you should structure your days.",
                    quote: "You can't add hours to the day, but you can multiply your energy."
                }
            },
            
            // SECTION 2: Your Energy (Mental Health) - Q9-Q14
            {
                section: 2,
                text: "How would you rate your current energy levels?",
                type: "scale",
                labels: { low: "Exhausted", high: "Thriving" }
            },
            {
                section: 2,
                text: "How often do you feel overwhelmed by your responsibilities?",
                type: "scale",
                labels: { low: "Constantly", high: "Rarely" },
                insight: {
                    icon: "üò¥",
                    title: "Sleep is a Leadership Skill",
                    content: "McKinsey research shows sleep-deprived leaders make worse decisions, have lower emotional intelligence, and create more conflict. Rest isn't laziness‚Äîit's performance optimization.",
                    quote: "You can't pour from an empty cup."
                }
            },
            {
                section: 2,
                text: "How is your sleep quality lately?",
                type: "scale",
                labels: { low: "Poor", high: "Excellent" }
            },
            {
                section: 2,
                text: "How well do you recover from stressful periods?",
                type: "scale",
                labels: { low: "Slowly", high: "Quickly" },
                insight: {
                    icon: "‚ö°",
                    title: "Stress Isn't the Enemy",
                    content: "Stanford psychologist Kelly McGonigal found that stress only harms you if you believe it's harmful. Reframing stress as your body preparing for challenge changes everything.",
                    quote: "Stress can be enhancing or debilitating‚Äîyour belief decides which."
                }
            },
            {
                section: 2,
                text: "How sustainable does your current pace feel?",
                type: "scale",
                labels: { low: "Burning out", high: "Sustainable" }
            },
            {
                section: 2,
                text: "How often do you take intentional breaks for recovery?",
                type: "scale",
                labels: { low: "Never", high: "Regularly" },
                insight: {
                    icon: "üîÑ",
                    title: "Recovery is Part of Training",
                    content: "Elite athletes know growth happens during recovery, not during the workout. The same applies to mental performance‚Äîstrategic rest accelerates growth.",
                    quote: "The best don't train harder. They recover smarter."
                }
            },
            
            // SECTION 3: Trust Foundation - Q15-Q22
            {
                section: 3,
                text: "I openly admit my mistakes to others.",
                type: "scale",
                labels: { low: "Never", high: "Always" }
            },
            {
                section: 3,
                text: "I feel comfortable asking for help when I need it.",
                type: "scale",
                labels: { low: "Uncomfortable", high: "Comfortable" },
                insight: {
                    icon: "üîì",
                    title: "Vulnerability is the Birthplace of Trust",
                    content: "Patrick Lencioni's research across thousands of teams found that trust isn't built through competence‚Äîit's built through vulnerability. Teams that admit weaknesses outperform those that hide them.",
                    quote: "Trust is knowing that when a team member pushes you, they care about the team. ‚Äî Patrick Lencioni"
                }
            },
            {
                section: 3,
                text: "I share my weaknesses and concerns with people I work with.",
                type: "scale",
                labels: { low: "Never", high: "Regularly" }
            },
            {
                section: 3,
                text: "I give others the benefit of the doubt before jumping to conclusions.",
                type: "scale",
                labels: { low: "Rarely", high: "Always" },
                insight: {
                    icon: "üß†",
                    title: "Psychological Safety Predicts Success",
                    content: "Google's Project Aristotle studied 180 teams and found psychological safety was the #1 predictor of team performance‚Äîmore than skills, resources, or strategy.",
                    quote: "In the best teams, members feel safe to take risks and be vulnerable with each other."
                }
            },
            {
                section: 3,
                text: "I apologize quickly when I've done something wrong.",
                type: "scale",
                labels: { low: "Difficult", high: "Easy" }
            },
            {
                section: 3,
                text: "I trust my own judgment and decisions.",
                type: "scale",
                labels: { low: "Second-guess", high: "Trust fully" },
                insight: {
                    icon: "üí™",
                    title: "Asking for Help is Strength",
                    content: "Research shows that asking for help is perceived as confidence, not weakness. People who ask for help are rated as more competent than those who struggle alone.",
                    quote: "The strong don't need to prove strength by going it alone."
                }
            },
            {
                section: 3,
                text: "I follow through on commitments I make to myself.",
                type: "scale",
                labels: { low: "Rarely", high: "Always" }
            },
            {
                section: 3,
                text: "I can be vulnerable without feeling weak.",
                type: "scale",
                labels: { low: "Feels dangerous", high: "Feels like strength" },
                insight: {
                    icon: "ü™û",
                    title: "Self-Trust Precedes Team Trust",
                    content: "You can't fully trust others until you trust yourself. Self-trust means knowing your values, honoring your commitments to yourself, and being honest about your limitations.",
                    quote: "Trust yourself first. Everything else follows."
                }
            },
            
            // SECTION 4: Conflict Skills - Q23-Q28
            {
                section: 4,
                text: "I speak up when I disagree, even if others might push back.",
                type: "scale",
                labels: { low: "Stay quiet", high: "Speak up" }
            },
            {
                section: 4,
                text: "I can separate a person from their idea when debating.",
                type: "scale",
                labels: { low: "Feels personal", high: "Debate ideas only" },
                insight: {
                    icon: "‚öîÔ∏è",
                    title: "Conflict is a Gift",
                    content: "Teams that avoid conflict don't avoid problems‚Äîthey just hide them. Lencioni found that healthy teams engage in passionate, unfiltered debate around ideas while maintaining respect.",
                    quote: "The only thing worse than conflict is artificial harmony."
                }
            },
            {
                section: 4,
                text: "I remain calm during heated discussions.",
                type: "scale",
                labels: { low: "Get emotional", high: "Stay regulated" }
            },
            {
                section: 4,
                text: "I actively seek out perspectives different from my own.",
                type: "scale",
                labels: { low: "Prefer agreement", high: "Seek difference" },
                insight: {
                    icon: "üé≠",
                    title: "Conflict Styles Shape Outcomes",
                    content: "Research identifies five conflict styles: competing, collaborating, compromising, avoiding, and accommodating. None is always right‚Äîbut knowing your default helps you adapt.",
                    quote: "Awareness of your conflict pattern is the first step to mastering it."
                }
            },
            {
                section: 4,
                text: "After a conflict, I can move forward without holding grudges.",
                type: "scale",
                labels: { low: "Hold onto it", high: "Let go quickly" }
            },
            {
                section: 4,
                text: "I see disagreement as an opportunity for better outcomes.",
                type: "scale",
                labels: { low: "Negative", high: "Opportunity" },
                insight: {
                    icon: "üå°Ô∏è",
                    title: "Emotional Regulation Under Fire",
                    content: "The ability to stay calm during disagreement is a skill, not a personality trait. Navy SEALs train this. Athletes train this. You can train this too.",
                    quote: "Between stimulus and response, there is a space. In that space is your power."
                }
            }
        ];

        // Stripe unlock data
        const stripeUnlocks = {
            1: {
                title: "Self-Knowledge Stripe",
                message: "You understand your natural rhythm. This is the foundation."
            },
            2: {
                title: "Energy Awareness Stripe",
                message: "You've assessed your sustainability. Awareness precedes change."
            },
            3: {
                title: "Trust Foundation Stripe",
                message: "Trust is the foundation of all growth. You've assessed yours honestly."
            },
            4: {
                title: "Conflict Skills Stripe",
                message: "You've completed all four sections. Your belt awaits."
            }
        };

        // Worker type descriptions
        const workerTypes = {
            sprinter: {
                name: "Sprinter",
                description: "You thrive on intensity and immediate results. Your superpower is rapid execution and peak performance in short bursts.",
                strengths: [
                    "High-intensity focus when deadline approaches",
                    "Rapid problem-solving under pressure",
                    "Ability to mobilize quickly for urgent challenges",
                    "Peak performance in crisis situations"
                ],
                challenges: [
                    "Sustainable pacing over long projects",
                    "Maintaining energy between sprints",
                    "Planning ahead without immediate urgency",
                    "Recovery and downtime management"
                ],
                advice: "Design your work in sprints. Schedule recovery time BEFORE burnout hits. Use artificial deadlines to create urgency when needed. Your intensity is a gift‚Äîjust learn to turn it on and off intentionally.",
                famous: "People like you: Elon Musk, Navy SEALs in combat, emergency room doctors"
            },
            jogger: {
                name: "Jogger",
                description: "You excel at consistent, steady progress. Your superpower is reliability and sustainable performance over time.",
                strengths: [
                    "Consistent daily progress without burnout",
                    "Reliability that others can count on",
                    "Sustainable work habits over years",
                    "Stable emotional regulation under pressure"
                ],
                challenges: [
                    "Maintaining motivation without urgent deadlines",
                    "Responding to sudden crises or pivots",
                    "Operating in chaotic, fast-moving environments",
                    "Taking calculated risks when safe progress stalls"
                ],
                advice: "Your consistency is your superpower‚Äîdon't let 'hustle culture' make you feel inadequate. Build systems and routines. Track small wins. You're the tortoise, and the tortoise wins. Just make sure you're running the right race.",
                famous: "People like you: Warren Buffett, Angela Merkel, marathon runners who train 365 days/year"
            },
            ultrarunner: {
                name: "Ultrarunner",
                description: "You're built for the long game. Your superpower is patience, vision, and endurance through extended challenges.",
                strengths: [
                    "Strategic thinking across years, not weeks",
                    "Patience to invest in compound growth",
                    "Resilience through setbacks over time",
                    "Vision to see what others miss in the noise"
                ],
                challenges: [
                    "Staying engaged with urgent, short-term tasks",
                    "Communicating your long-term vision to sprinters",
                    "Dealing with rapid-fire decision-making",
                    "Maintaining motivation when results take years"
                ],
                advice: "Your ability to play the long game is rare and valuable. Break your vision into phases so you can celebrate progress. Pair with sprinters for execution. Remember: compounding works, but only if you stay in the game long enough.",
                famous: "People like you: Jeff Bezos (20-year plans), ultra-endurance athletes, research scientists"
            }
        };

        // State
        let currentQuestion = 0;
        let answers = [];
        let completedSections = [];

        // Initialize
        function startAssessment() {
            document.getElementById('intro-section').style.display = 'none';
            document.getElementById('progress-container').style.display = 'block';
            document.getElementById('question-container').style.display = 'block';
            showQuestion(0);
        }

        function showQuestion(index) {
            currentQuestion = index;
            const q = questions[index];
            const container = document.getElementById('question-container');
            
            let html = '';
            
            // Show insight card if exists
            if (q.insight) {
                html += `
                    <div class="insight-card">
                        <div class="insight-icon">${q.insight.icon}</div>
                        <div class="insight-title">${q.insight.title}</div>
                        <div class="insight-content">${q.insight.content}</div>
                        <div class="insight-quote">"${q.insight.quote}"</div>
                    </div>
                `;
            }
            
            // Question number
            html += `<div class="question-number">Question ${index + 1} of ${questions.length}</div>`;
            html += `<div class="question-text">${q.text}</div>`;
            
            // Answer options
            if (q.type === 'scale') {
                html += `
                    <div class="scale-container">
                        ${[1,2,3,4,5].map(n => `
                            <div class="scale-option ${answers[index] === n ? 'selected' : ''}" 
                                 onclick="selectAnswer(${n})">${n}</div>
                        `).join('')}
                    </div>
                    <div class="scale-labels">
                        <span>${q.labels.low}</span>
                        <span>${q.labels.high}</span>
                    </div>
                `;
            } else if (q.type === 'choice') {
                html += `
                    <div class="choice-container">
                        ${q.options.map((opt, i) => `
                            <div class="choice-option ${answers[index] === opt.value ? 'selected' : ''}"
                                 onclick="selectAnswer(${opt.value})">${opt.text}</div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Navigation
            html += `
                <div class="nav-buttons">
                    <button class="nav-btn back" onclick="prevQuestion()" ${index === 0 ? 'style="visibility:hidden"' : ''} aria-label="‚Üê Back">‚Üê Back</button>
                    <button class="nav-btn next" onclick="nextQuestion()" ${answers[index] === undefined ? 'disabled' : ''} aria-label="${index === questions.length - 1 ? 'See Results' : 'Continue ‚Üí'}">
                        ${index === questions.length - 1 ? 'See Results' : 'Continue ‚Üí'}
                    </button>
                </div>
            `;
            
            container.innerHTML = html;
            updateProgress();
            updateSectionLabels();
        }

        function selectAnswer(value) {
            answers[currentQuestion] = value;
            showQuestion(currentQuestion);
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) return;
            
            const currentSection = questions[currentQuestion].section;
            const nextIndex = currentQuestion + 1;
            
            // Check if section completed
            if (nextIndex < questions.length) {
                const nextSection = questions[nextIndex].section;
                if (nextSection !== currentSection && !completedSections.includes(currentSection)) {
                    completedSections.push(currentSection);
                    showStripeUnlock(currentSection, () => {
                        showQuestion(nextIndex);
                    });
                    return;
                }
                showQuestion(nextIndex);
            } else {
                // Last question - check final section
                if (!completedSections.includes(currentSection)) {
                    completedSections.push(currentSection);
                    showStripeUnlock(currentSection, () => {
                        showResults();
                    });
                } else {
                    showResults();
                }
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }

        function updateSectionLabels() {
            const currentSection = questions[currentQuestion].section;
            
            for (let i = 1; i <= 4; i++) {
                const label = document.getElementById(`section-${i}-label`);
                label.classList.remove('active', 'completed');
                
                if (completedSections.includes(i)) {
                    label.classList.add('completed');
                    label.textContent = ['‚úì Know Yourself', '‚úì Your Energy', '‚úì Trust', '‚úì Conflict'][i-1];
                } else if (i === currentSection) {
                    label.classList.add('active');
                }
            }
        }

        function showStripeUnlock(section, callback) {
            const data = stripeUnlocks[section];
            const overlay = document.getElementById('stripe-overlay');
            const content = document.getElementById('stripe-unlock-content');
            
            const stripes = [1,2,3,4].map(i => 
                `<div class="stripe ${i <= section ? 'filled' : ''}"></div>`
            ).join('');
            
            content.innerHTML = `
                <div class="belt-icon">ü•ã</div>
                <h3>${data.title}</h3>
                <p>${data.message}</p>
                <div class="stripe-visual">${stripes}</div>
                <button class="stripe-continue" onclick="closeStripeUnlock()" aria-label="Continue ‚Üí">Continue ‚Üí</button>
            `;
            
            overlay.style.display = 'flex';
            
            window.stripeCallback = callback;
        }

        function closeStripeUnlock() {
            document.getElementById('stripe-overlay').style.display = 'none';
            if (window.stripeCallback) {
                window.stripeCallback();
            }
        }

        function calculateResults() {
            // Worker Type (Q1-Q8)
            let sprinter = 0, jogger = 0, ultrarunner = 0;
            for (let i = 0; i < 8; i++) {
                if (answers[i] === 1) sprinter++;
                else if (answers[i] === 2) jogger++;
                else if (answers[i] === 3) ultrarunner++;
            }
            
            let workerType = 'jogger';
            if (sprinter >= jogger && sprinter >= ultrarunner) workerType = 'sprinter';
            else if (ultrarunner >= jogger && ultrarunner >= sprinter) workerType = 'ultrarunner';
            
            // Energy Score (Q9-Q14)
            let energySum = 0;
            for (let i = 8; i < 14; i++) {
                energySum += answers[i] || 0;
            }
            const energyScore = energySum / 6;
            
            // Trust Score (Q15-Q22)
            let trustSum = 0;
            for (let i = 14; i < 22; i++) {
                trustSum += answers[i] || 0;
            }
            const trustScore = trustSum / 8;
            
            // Conflict Score (Q23-Q28)
            let conflictSum = 0;
            for (let i = 22; i < 28; i++) {
                conflictSum += answers[i] || 0;
            }
            const conflictScore = conflictSum / 6;
            
            // Determine Belt
            const avgScore = (trustScore + conflictScore) / 2;
            let belt, modifier, reason, nextSteps, beltPhilosophy;
            
            if (energyScore < 2.5) {
                belt = 'WHITE';
                modifier = 'Energy First';
                reason = 'Your energy levels suggest focusing on self-care foundations first. You can\'t build a house on a crumbling foundation‚Äîand you can\'t develop leadership skills while running on empty.';
                nextSteps = [
                    'Complete the White Belt Energy Management stripe',
                    'Establish a consistent sleep schedule (7-8 hours)',
                    'Identify your top 3 energy drains and address one',
                    'Build a simple recovery routine (5-10 min daily)'
                ];
                beltPhilosophy = 'White Belt is not about weakness‚Äîit\'s about wisdom. Champions know recovery is where growth happens. Your first job is to take care of the weapon: you.';
            } else if (avgScore >= 3.8 && trustScore >= 3.5 && conflictScore >= 3.5) {
                belt = 'BLUE';
                modifier = 'Strong Foundation';
                reason = 'You have solid trust and conflict skills. You\'re ready for Blue Belt training, where you\'ll refine your skills and learn to lead through difficult conversations.';
                nextSteps = [
                    'Complete the Blue Belt Difficult Conversations stripe',
                    'Practice the "Disagree and Commit" framework weekly',
                    'Lead one vulnerable conversation this week',
                    'Track your conflict patterns in the Mood Tracker'
                ];
                beltPhilosophy = 'Blue Belt is where most people plateau‚Äîdon\'t be most people. This is where technique replaces strength, where you learn to flow instead of force.';
            } else if (avgScore >= 3.0) {
                belt = 'BLUE';
                modifier = 'Ready to Grow';
                reason = "You're ready for Blue Belt challenges. Some areas need attention, but you have the foundation to progress. Growth happens at the edge of comfort.";
                nextSteps = [
                    'Start with Blue Belt Stripe 1: Difficult Conversations',
                    'Practice vulnerability with one person you trust',
                    'Initiate one difficult conversation you\'ve been avoiding',
                    'Journal about your conflict patterns for 7 days'
                ];
                beltPhilosophy = 'You don\'t need to be perfect to progress. You just need to be honest about where you are and committed to where you\'re going.';
            } else if (avgScore >= 2.5) {
                belt = 'WHITE';
                modifier = 'Building Momentum';
                reason = 'White Belt will strengthen your foundation in trust and communication. Like in Brazilian Jiu-Jitsu, white belts who rush to blue get tapped out. Master the basics.';
                nextSteps = [
                    'Complete White Belt Stripe 1: Self-Knowledge',
                    'Practice daily self-check-ins (energy, mood, stress)',
                    'Share one vulnerability with someone you trust',
                    'Read "The Five Dysfunctions of a Team" by Patrick Lencioni'
                ];
                beltPhilosophy = 'White Belt is sacred. This is where you learn to be honest with yourself‚Äîthe foundation of all growth. Respect the process.';
            } else {
                belt = 'WHITE';
                modifier = 'Starting Fresh';
                reason = "Everyone starts somewhere. White Belt is exactly where champions begin. The only difference between you and a black belt is time and honest practice.";
                nextSteps = [
                    'Complete the White Belt Self-Knowledge assessment',
                    'Start the 21-Day Mood Tracker to build awareness',
                    'Identify your top 3 values (use Values Discovery)',
                    'Commit to one small daily practice for 7 days'
                ];
                beltPhilosophy = 'The belt doesn\'t lie. You can\'t fake your way to mastery. But you CAN show up, be honest, and trust the process. That\'s all being a white belt requires.';
            }
            
            // Growth areas with specific actions
            const growthAreas = [];
            if (energyScore < 3) {
                growthAreas.push({
                    area: 'Energy Management & Recovery',
                    why: 'You can\'t perform at your best while running on fumes',
                    action: 'Start tracking sleep, stress, and energy levels daily'
                });
            }
            if (trustScore < 3) {
                growthAreas.push({
                    area: 'Vulnerability-Based Trust',
                    why: 'Teams don\'t trust competence‚Äîthey trust vulnerability',
                    action: 'Share one mistake or weakness with your team this week'
                });
            }
            if (conflictScore < 3) {
                growthAreas.push({
                    area: 'Productive Conflict Skills',
                    why: 'Avoiding conflict doesn\'t avoid problems‚Äîit hides them',
                    action: 'Initiate one difficult conversation you\'ve been postponing'
                });
            }
            if (growthAreas.length === 0) {
                growthAreas.push({
                    area: 'Deepen Your Strengths',
                    why: 'Mastery is about going deeper, not just wider',
                    action: 'Teach what you know to someone one level behind you'
                });
            }
            
            return {
                workerType,
                energyScore,
                trustScore,
                conflictScore,
                belt,
                modifier,
                reason,
                nextSteps,
                beltPhilosophy,
                growthAreas
            };
        }

        function showResults() {
            document.getElementById('progress-container').style.display = 'none';
            document.getElementById('question-container').style.display = 'none';
            
            const results = calculateResults();
            const container = document.getElementById('results-container');
            
            const wtData = workerTypes[results.workerType];
            
            container.innerHTML = `
                <!-- User Avatar in Results -->
                <div id="resultsAvatar" style="margin-bottom: 2rem;"></div>
                
                <div class="belt-result">
                    <div class="belt-icon">ü•ã</div>
                    <h2>Your Starting Belt</h2>
                    <div class="belt-name">${results.belt} BELT</div>
                    <div class="belt-modifier">${results.modifier}</div>
                    <p class="belt-reason">${results.reason}</p>
                </div>
                
                <div class="intro-box philosophy">
                    <h3>ü•ã What This Belt Means</h3>
                    <p>${results.beltPhilosophy}</p>
                </div>
                
                <div class="stripes-summary">
                    <h3>Stripes Earned During Assessment</h3>
                    <div class="stripe-row">
                        <div class="stripe"></div>
                        <div class="stripe"></div>
                        <div class="stripe"></div>
                        <div class="stripe"></div>
                    </div>
                    <p>‚úì Self-Knowledge | ‚úì Energy Awareness | ‚úì Trust Foundation | ‚úì Conflict Skills</p>
                </div>
                
                <div class="result-card">
                    <h3>Your Work Rhythm</h3>
                    <div class="type-name">${wtData.name}</div>
                    <p>${wtData.description}</p>
                </div>
                
                <div class="intro-box">
                    <h3>üí™ Your Strengths</h3>
                    <ul>
                        ${wtData.strengths.map(s => `<li>${s}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="intro-box">
                    <h3>‚ö†Ô∏è Your Challenges</h3>
                    <ul>
                        ${wtData.challenges.map(c => `<li>${c}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="intro-box philosophy">
                    <h3>üí° Advice for ${wtData.name}s</h3>
                    <p>${wtData.advice}</p>
                    <p><em>${wtData.famous}</em></p>
                </div>
                
                <div class="score-cards">
                    <div class="score-card">
                        <h4>Energy</h4>
                        <div class="score">${results.energyScore.toFixed(1)}</div>
                        <div class="score-label">out of 5</div>
                    </div>
                    <div class="score-card">
                        <h4>Trust</h4>
                        <div class="score">${results.trustScore.toFixed(1)}</div>
                        <div class="score-label">out of 5</div>
                    </div>
                    <div class="score-card">
                        <h4>Conflict</h4>
                        <div class="score">${results.conflictScore.toFixed(1)}</div>
                        <div class="score-label">out of 5</div>
                    </div>
                </div>
                
                <div class="growth-areas">
                    <h3>üéØ Your Growth Focus Areas</h3>
                    ${results.growthAreas.map(ga => `
                        <div style="margin-bottom: 1rem;">
                            <strong>${ga.area}</strong><br>
                            <span style="color: #4a5568;">Why: ${ga.why}</span><br>
                            <span style="color: #2d3748;">‚Üí Action: ${ga.action}</span>
                        </div>
                    `).join('')}
                </div>
                
                <div class="intro-box">
                    <h3>üìã Your Next Steps (This Week)</h3>
                    <ul>
                        ${results.nextSteps.map(step => `<li>${step}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="intro-box philosophy">
                    <h3>üî• Remember</h3>
                    <p><strong>The belt doesn't define you‚Äîit shows you where to focus.</strong></p>
                    <p>In Brazilian Jiu-Jitsu, everyone starts as a white belt. The greats don't skip steps‚Äîthey master each one. Your starting belt isn't a judgment. It's a gift: clarity on exactly where to begin.</p>
                    <p>Champions aren't born at black belt. They're forged one stripe at a time, one honest roll at a time, one day of showing up when it's hard.</p>
                    <p><em>"The belt only covers two inches of your ass. You have to cover the rest." ‚Äî Royce Gracie</em></p>
                </div>
                
                <div class="results-cta">
                    <button class="begin-button" onclick="location.href='${results.belt.toLowerCase()}-belt.html'" aria-label="Start ${results.belt} Belt Training ‚Üí">
                        Start ${results.belt} Belt Training ‚Üí
                    </button>
                    <p class="cta-subtext">Your personalized development path awaits. Time to earn your stripes.</p>
                </div>
            `;
            
            container.style.display = 'block';
            
            // Load avatar in results
            setTimeout(function() {
                const avatarContainer = document.getElementById('resultsAvatar');
                if (avatarContainer) {
                    fetch('components/user-avatar.html')
                        .then(r => r.text())
                        .then(html => {
                            avatarContainer.innerHTML = html;
                            setTimeout(function() {
                                if (typeof AVATAR_SYSTEM !== 'undefined') {
                                    AVATAR_SYSTEM.init();
                                }
                            }, 100);
                        })
                        .catch(err => {
                            console.warn('Avatar component not found:', err);
                            if (avatarContainer) avatarContainer.style.display = 'none';
                        });
                }
            }, 500);
            
            // Save results
            localStorage.setItem('tapinBeltAssessment', JSON.stringify({
                date: new Date().toISOString(),
                ...results,
                answers
            }));
        }
    </script>

    <!-- Avatar System -->
    <script src="js/avatar-system.js"></script>
    
    <!-- Performance Optimizer - Load First -->
<script src="js/performance-optimizer.js"></script>
<!-- TAP-IN Utilities -->
<script src="js/shared-utilities.js"></script>
<script src="js/global-error-handler.js"></script>
<script src="js/storage-health.js"></script>

<!-- Load Avatar in Results -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load avatar in results if results container is visible
    const resultsContainer = document.getElementById('results-container');
    const avatarContainer = document.getElementById('resultsAvatar');
    
    if (resultsContainer && resultsContainer.style.display !== 'none' && avatarContainer) {
        fetch('components/user-avatar.html')
            .then(r => r.text())
            .then(html => {
                avatarContainer.innerHTML = html;
                setTimeout(function() {
                    if (typeof AVATAR_SYSTEM !== 'undefined') {
                        AVATAR_SYSTEM.init();
                    }
                }, 100);
            })
            .catch(err => {
                console.warn('Avatar component not found:', err);
            });
    }
});
</script>
    <!-- TAP-IN Core Modules -->
    <script src="js/language-switcher.js"></script>
    <script src="js/meta-tags-manager.js"></script>
    <script src="js/achievement-badges.js"></script>
    <script src="js/structured-data.js"></script>

<script src="js/performance-monitor.js"></script>
<!-- Toast Notification System -->
<div id="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 10000; display: flex; flex-direction: column; gap: 10px;"></div>

<script>
(function() {
    'use strict';
    
    window.showToast = function(message, type = 'info', duration = 3000) {
        const container = document.getElementById('toast-container');
        if (!container) return;
        
        const toast = document.createElement('div');
        toast.style.cssText = `
            background: ${type === 'error' ? '#ef4444' : type === 'success' ? '#10b981' : '#3b82f6'};
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            min-width: 300px;
            max-width: 500px;
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
        `;
        
        const icon = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
        toast.innerHTML = `<span style="font-size: 1.25rem;">${icon}</span><span>${message}</span>`;
        
        container.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, duration);
    };
    
    // Add animations if not present
    if (!document.getElementById('toast-animations')) {
        const style = document.createElement('style');
        style.id = 'toast-animations';
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            @keyframes slideOutRight {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(400px);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    }
})();
</script>

    <script src="js/dark-mode.js"></script>
    <script src="js/micro-interactions.js"></script>
    <script src="js/enhanced-loading-states.js"></script>
    <script src="js/keyboard-navigation.js" defer></script>

